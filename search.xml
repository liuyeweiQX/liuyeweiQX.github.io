<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>CompletableFutureå¼‚æ­¥ä»»åŠ¡</title>
    <url>/2020/12/16/CompletableFuture%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1/</url>
    <content><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>æ‰€è°“å¼‚æ­¥è°ƒç”¨å…¶å®å°±æ˜¯å®ç°ä¸€ä¸ªå¯æ— éœ€ç­‰å¾…è¢«è°ƒç”¨å‡½æ•°çš„è¿”å›å€¼è€Œè®©æ“ä½œç»§ç»­è¿è¡Œçš„æ–¹æ³•ã€‚<strong>åœ¨ Java è¯­è¨€ä¸­ï¼Œç®€å•çš„è®²å°±æ˜¯å¦å¯ä¸€ä¸ªçº¿ç¨‹æ¥å®Œæˆè°ƒç”¨ä¸­çš„éƒ¨åˆ†è®¡ç®—ï¼Œä½¿è°ƒç”¨ç»§ç»­è¿è¡Œæˆ–è¿”å›ï¼Œè€Œä¸éœ€è¦ç­‰å¾…è®¡ç®—ç»“æœã€‚ä½†è°ƒç”¨è€…ä»éœ€è¦å–çº¿ç¨‹çš„è®¡ç®—ç»“æœ</strong>ã€‚</p>
<h4 id="Javaå®ç°å¤šçº¿ç¨‹çš„ä¸‰ç§æ–¹å¼"><a href="#Javaå®ç°å¤šçº¿ç¨‹çš„ä¸‰ç§æ–¹å¼" class="headerlink" title="Javaå®ç°å¤šçº¿ç¨‹çš„ä¸‰ç§æ–¹å¼"></a>Javaå®ç°å¤šçº¿ç¨‹çš„ä¸‰ç§æ–¹å¼</h4><ul>
<li>ç»§æ‰¿Threadç±»<br>run() æ–¹æ³• å’Œ start() æ–¹æ³•ï¼š<br>run() æ–¹æ³•ï¼šæ™®é€šçš„æˆå‘˜æ–¹æ³•<br>start() æ–¹æ³•ï¼šè´Ÿè´£å¯åŠ¨ä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼Œå¹¶è°ƒç”¨ run() æ–¹æ³•</li>
</ul>
<p><strong>å› æ­¤å¯åŠ¨çº¿ç¨‹ï¼Œéœ€è¦ä½¿ç”¨ start() æ–¹æ³•</strong>  </p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/12/16/CompletableFuture%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1/content1.png" class title="content1">   
<ul>
<li>å®ç° Runnable æ¥å£</li>
</ul>
<p><strong>å®é™…ä¸Š Thread ç±»ä¹Ÿæ˜¯å®ç°äº† Runnable æ¥å£ï¼š</strong><br>class Thread implements Runnable {<br><strong>å¯åŠ¨ Runnable å®ä¾‹æ—¶ï¼Œéœ€è¦æ”¾åœ¨ Thread ä¸­ï¼Œç„¶åè°ƒç”¨ start() æ–¹æ³•</strong>     </p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/12/16/CompletableFuture%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1/content2.png" class title="content2">  

<ul>
<li>å®ç° Callable æ¥å£<br>Java 5 å¼€å§‹æä¾›<br>å¯ä»¥è¿”å›ç»“æœï¼ˆé€šè¿‡ Futureï¼‰ï¼Œä¹Ÿå¯ä»¥æŠ›å‡ºå¼‚å¸¸<br>éœ€è¦å®ç°çš„æ˜¯ call() æ–¹æ³•</li>
</ul>
<p><strong>ä»¥ä¸Šä¸¤ç‚¹ä¹Ÿæ˜¯ Callable æ¥å£ ä¸ Runnable æ¥å£çš„åŒºåˆ«</strong></p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/12/16/CompletableFuture%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1/content3.png" class title="content3">     

<h4 id="Java-FutureTaskå¯å¼‚æ­¥æ‰§è¡Œçš„ä»»åŠ¡"><a href="#Java-FutureTaskå¯å¼‚æ­¥æ‰§è¡Œçš„ä»»åŠ¡" class="headerlink" title="Java FutureTaskå¯å¼‚æ­¥æ‰§è¡Œçš„ä»»åŠ¡"></a>Java FutureTaskå¯å¼‚æ­¥æ‰§è¡Œçš„ä»»åŠ¡</h4><p>FutureTask æ˜¯ Future æ¥å£çš„ä¸€ä¸ªå®ç°ç±»ã€‚<br>ä½¿ç”¨æ–¹å¼ï¼š</p>
<ul>
<li>æ„é€ ä¸€ä¸ª Callable æ¥å£çš„å®ä¾‹</li>
<li>æ„é€ ä¸€ä¸ª FutureTask çš„å®ä¾‹ï¼Œå°è£… Callable æ¥å£çš„å®ä¾‹</li>
<li>é€šè¿‡çº¿ç¨‹æ±  ExecutorService æ¥è¿è¡Œ FutureTask çš„å®ä¾‹</li>
<li>é€šè¿‡ get() æ–¹æ³•æ¥è·å¾—ç»“æœ</li>
</ul>
<p><strong>å¯ä»¥çœ‹å‡ºï¼ŒFutureTask ä¸ä½¿ç”¨ Callable &amp; Future çš„ç›®çš„å·®ä¸å¤šï¼Œå› æ­¤ FutureTask å®é™…ä¸å¸¸ä½¿ç”¨ï¼Œç›´æ¥ä½¿ç”¨ Callable &amp; Future å°±å¯ä»¥äº†</strong>ã€‚   </p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/12/16/CompletableFuture%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1/content4.png" class title="content4">  

<p>JDK5 æ–°å¢äº† Future æ¥å£ï¼Œç”¨äºæè¿°ä¸€ä¸ªå¼‚æ­¥è®¡ç®—çš„ç»“æœã€‚è™½ç„¶ Future ä»¥åŠç›¸å…³ä½¿ç”¨æ–¹æ³•æä¾›äº†å¼‚æ­¥æ‰§è¡Œä»»åŠ¡çš„èƒ½åŠ›ï¼Œä½†æ˜¯å¯¹äºç»“æœçš„è·å–å´æ˜¯å¾ˆä¸æ–¹ä¾¿ï¼Œ<strong>åªèƒ½é€šè¿‡é˜»å¡æˆ–è€…è½®è¯¢çš„æ–¹å¼å¾—åˆ°ä»»åŠ¡çš„ç»“æœ</strong>ã€‚ ä¾‹å¦‚ï¼š</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/12/16/CompletableFuture%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1/content5.png" class title="content5">

<p>é˜»å¡çš„æ–¹å¼æ˜¾ç„¶å’Œæˆ‘ä»¬çš„å¼‚æ­¥ç¼–ç¨‹çš„åˆè¡·ç›¸è¿èƒŒï¼Œè½®è¯¢çš„æ–¹å¼åˆä¼šè€—è´¹æ— è°“çš„ CPU èµ„æºï¼Œè€Œä¸”ä¹Ÿä¸èƒ½åŠæ—¶åœ°å¾—åˆ°è®¡ç®—ç»“æœï¼Œ<strong>ä¸ºä»€ä¹ˆä¸èƒ½ç”¨è§‚å¯Ÿè€…è®¾è®¡æ¨¡å¼å‘¢ï¼Ÿå³å½“è®¡ç®—ç»“æœå®ŒæˆåŠæ—¶é€šçŸ¥ç›‘å¬è€…ã€‚ï¼ˆä¾‹å¦‚é€šè¿‡å›è°ƒçš„æ–¹å¼ï¼‰</strong> </p>
<h3 id="CompletableFuture"><a href="#CompletableFuture" class="headerlink" title="CompletableFuture"></a>CompletableFuture</h3><p>Java 8 ä¸­, æ–°å¢åŠ äº†ä¸€ä¸ªåŒ…å« 50 ä¸ªæ–¹æ³•å·¦å³çš„ç±» CompletableFutureï¼Œå®ƒæä¾›äº†éå¸¸å¼ºå¤§çš„ Future çš„æ‰©å±•åŠŸèƒ½ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬ç®€åŒ–å¼‚æ­¥ç¼–ç¨‹çš„å¤æ‚æ€§ï¼Œå¹¶ä¸”æä¾›äº†å‡½æ•°å¼ç¼–ç¨‹çš„èƒ½åŠ›ï¼Œå¯ä»¥é€šè¿‡å›è°ƒçš„æ–¹å¼å¤„ç†è®¡ç®—ç»“æœï¼Œä¹Ÿæä¾›äº†è½¬æ¢å’Œç»„åˆ CompletableFuture çš„æ–¹æ³•ã€‚</p>
<p>å¯¹äºé˜»å¡æˆ–è€…è½®è¯¢æ–¹å¼ï¼Œä¾ç„¶å¯ä»¥é€šè¿‡ CompletableFuture ç±»çš„ CompletionStage å’Œ Future æ¥å£æ–¹å¼æ”¯æŒã€‚</p>
<p>CompletableFuture ç±»å£°æ˜äº† CompletionStage æ¥å£ï¼ŒCompletionStage æ¥å£å®é™…ä¸Šæä¾›äº†åŒæ­¥æˆ–å¼‚æ­¥è¿è¡Œè®¡ç®—çš„èˆå°ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡å®ç°å¤šä¸ª CompletionStage å‘½ä»¤ï¼Œå¹¶ä¸”å°†è¿™äº›å‘½ä»¤ä¸²è”åœ¨ä¸€èµ·çš„æ–¹å¼å®ç°å¤šä¸ªå‘½ä»¤ä¹‹é—´çš„è§¦å‘ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ CompletableFuture.supplyAsync(this::sendMsg); è¿™ä¹ˆä¸€è¡Œä»£ç åˆ›å»ºä¸€ä¸ªç®€å•çš„å¼‚æ­¥è®¡ç®—ã€‚åœ¨è¿™è¡Œä»£ç ä¸­ï¼ŒsupplyAsync æ”¯æŒå¼‚æ­¥åœ°æ‰§è¡Œæˆ‘ä»¬æŒ‡å®šçš„æ–¹æ³•ï¼Œè¿™ä¸ªä¾‹å­ä¸­çš„å¼‚æ­¥æ‰§è¡Œæ–¹æ³•æ˜¯ sendMsgã€‚å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ Executor æ‰§è¡Œå¼‚æ­¥ç¨‹åºï¼Œé»˜è®¤æ˜¯ ForkJoinPool.commonPool()ã€‚<br>æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨å¼‚æ­¥è®¡ç®—ç»“æŸä¹‹åæŒ‡å®šå›è°ƒå‡½æ•°ï¼Œä¾‹å¦‚ CompletableFuture.supplyAsync(this::sendMsg) .thenAccept(this::notify);<br>è¿™è¡Œä»£ç ä¸­çš„ thenAccept è¢«ç”¨äºå¢åŠ å›è°ƒå‡½æ•°ï¼Œåœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ notify å°±æˆäº†å¼‚æ­¥è®¡ç®—çš„æ¶ˆè´¹è€…ï¼Œå®ƒä¼šå¤„ç†è®¡ç®—ç»“æœã€‚   </p>
<h3 id="CompletionStage-æ¥å£"><a href="#CompletionStage-æ¥å£" class="headerlink" title="CompletionStage æ¥å£"></a>CompletionStage<T> æ¥å£</T></h3><p>ä¸€ä¸ªå¯èƒ½æ‰§è¡Œçš„å¼‚æ­¥è®¡ç®—çš„æŸä¸ªé˜¶æ®µï¼Œåœ¨å¦ä¸€ä¸ªCompletionStageå®Œæˆæ—¶æ‰§è¡Œä¸€ä¸ªæ“ä½œæˆ–è®¡ç®—ä¸€ä¸ªå€¼ã€‚<br>ä¸€ä¸ªé˜¶æ®µå®Œæˆåï¼Œå…¶è®¡ç®—ç»“æŸã€‚ä½†æ˜¯ï¼Œè¯¥è®¡ç®—é˜¶æ®µå¯èƒ½ä¼šè§¦å‘ä¸‹ä¸€ä¸ªè®¡ç®—é˜¶æ®µã€‚<br>æœ€ç®€å•çš„ä¾‹å­<br>CompletableFuture å®é™…ä¸Šä¹Ÿå®ç°äº† Future æ¥å£ï¼š </p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/12/16/CompletableFuture%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1/content6.png" class title="content6">      

<p>æ‰€ä»¥æˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ©ç”¨ CompletableFuture æ¥å®ç°åŸºæœ¬çš„ Future åŠŸèƒ½ï¼Œä¾‹å¦‚ï¼š</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/12/16/CompletableFuture%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1/content7.png" class title="content7"> 

<p>æ­¤æ—¶æ­¤åˆ»ä¸»çº¿ç¨‹ future.get() å°†å¾—åˆ°å­—ç¬¦ä¸²çš„ç»“æœ I have completedï¼ŒåŒæ—¶å®Œæˆå›è°ƒä»¥åå°†ä¼šç«‹å³ç”Ÿæ•ˆã€‚æ³¨æ„ complete() æ–¹æ³•åªèƒ½è°ƒç”¨ä¸€æ¬¡ï¼Œåç»­è°ƒç”¨å°†è¢«å¿½ç•¥ã€‚<br>æ³¨æ„ï¼šget() æ–¹æ³•å¯èƒ½ä¼šæŠ›å‡ºå¼‚å¸¸ InterruptedException å’Œ ExecutionExceptionã€‚<br>å¦‚æœæˆ‘ä»¬å·²ç»çŸ¥é“äº†å¼‚æ­¥ä»»åŠ¡çš„ç»“æœï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥åˆ›å»ºä¸€ä¸ªå·²å®Œæˆçš„ futureï¼Œå¦‚ä¸‹ï¼š</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/12/16/CompletableFuture%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1/content8.png" class title="content8"> 

<p>å¦‚æœåœ¨å¼‚æ­¥æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬è§‰å¾—æ‰§è¡Œä¼šè¶…æ—¶æˆ–è€…ä¼šå‡ºç°é—®é¢˜ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ cancle() æ–¹æ³•å–æ¶ˆï¼Œæ­¤æ—¶è°ƒç”¨ get() æ–¹æ³•æ—¶ä¼šäº§ç”Ÿå¼‚å¸¸ java.util.concurrent.CancellationExceptionï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/12/16/CompletableFuture%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1/content9.png" class title="content9"> 

<h3 id="ä½¿ç”¨å·¥å‚æ–¹æ³•åˆ›å»º-CompletableFuture"><a href="#ä½¿ç”¨å·¥å‚æ–¹æ³•åˆ›å»º-CompletableFuture" class="headerlink" title="ä½¿ç”¨å·¥å‚æ–¹æ³•åˆ›å»º CompletableFuture"></a>ä½¿ç”¨å·¥å‚æ–¹æ³•åˆ›å»º CompletableFuture</h3><p>åœ¨ä¸Šè¿°çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬æ‰‹åŠ¨åœ°åˆ›å»º CompletableFutureï¼Œå¹¶ä¸”æ‰‹åŠ¨çš„åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼ˆæˆ–è€…åˆ©ç”¨çº¿ç¨‹æ± ï¼‰æ¥å¯åŠ¨å¼‚æ­¥ä»»åŠ¡ï¼Œè¿™æ ·ä¼¼ä¹æœ‰äº›å¤æ‚ã€‚</p>
<p>å…¶å®æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ CompletableFuture çš„å·¥å‚æ–¹æ³•ï¼Œä¼ å…¥ Supplier æˆ–è€… Runnable çš„å®ç°ç±»ï¼Œç›´æ¥å¾—åˆ°ä¸€ä¸ª CompletableFuture çš„å®ä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public static &lt;U&gt; CompletableFuture&lt;U&gt; supplyAsync(Supplier&lt;U&gt; supplier)</span><br><span class="line">public static &lt;U&gt; CompletableFuture&lt;U&gt; supplyAsync(Supplier&lt;U&gt; supplier, Executor executor)</span><br><span class="line">public static CompletableFuture&lt;Void&gt; runAsync(Runnable runnable)</span><br><span class="line">public static CompletableFuture&lt;Void&gt; runAsync(Runnable runnable, Executor executor)</span><br></pre></td></tr></table></figure>
<p>ç¬¬ä¸€ä¸ªå’Œç¬¬ä¸‰ä¸ªæ–¹æ³•ï¼Œæ²¡æœ‰ Executor å‚æ•°ï¼Œå°†ä¼šä½¿ç”¨ ForkJoinPool.commonPool() (å…¨å±€çš„ï¼Œåœ¨ JDK8 ä¸­ä»‹ç»çš„é€šç”¨æ± ï¼‰ï¼Œè¿™é€‚ç”¨äº CompletableFuture ç±»ä¸­çš„å¤§å¤šæ•°çš„æ–¹æ³•ã€‚</p>
<ul>
<li>Runnable æ¥å£æ–¹æ³• public abstract void run(); æ²¡æœ‰è¿”å›å€¼</li>
<li>Supplier æ¥å£æ–¹æ³• T get(); æœ‰è¿”å›å€¼ã€‚<strong>å¦‚æœä½ éœ€è¦å¤„ç†å¼‚æ­¥æ“ä½œå¹¶è¿”å›ç»“æœï¼Œä½¿ç”¨å‰ä¸¤ç§ Supplier<U> æ–¹æ³•</U></strong><br>ä½¿ç”¨ Lambda è¡¨è¾¾å¼æ¥ä¼ å…¥ Supplier æˆ–è€… Runnable çš„å®ç°ç±»ã€‚ <img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/12/16/CompletableFuture%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1/content10.png" class title="content10">  </li>
</ul>
<h3 id="è½¬æ¢å’Œä½œç”¨äºå¼‚æ­¥ä»»åŠ¡çš„ç»“æœ-thenApply"><a href="#è½¬æ¢å’Œä½œç”¨äºå¼‚æ­¥ä»»åŠ¡çš„ç»“æœ-thenApply" class="headerlink" title="è½¬æ¢å’Œä½œç”¨äºå¼‚æ­¥ä»»åŠ¡çš„ç»“æœ (thenApply)"></a>è½¬æ¢å’Œä½œç”¨äºå¼‚æ­¥ä»»åŠ¡çš„ç»“æœ (thenApply)</h3><p>æˆ‘ä»¬å¯ä»¥å åŠ åŠŸèƒ½ï¼ŒæŠŠå¤šä¸ª future ç»„åˆåœ¨ä¸€èµ·ç­‰</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public &lt;U&gt; CompletableFuture&lt;U&gt; thenApply(Function&lt;? super T,? extends U&gt; fn)</span><br></pre></td></tr></table></figure>
<p>è¯¥æ–¹æ³•çš„ä½œç”¨æ˜¯åœ¨è¯¥è®¡ç®—é˜¶æ®µæ­£å¸¸å®Œæˆåï¼Œå°†è¯¥è®¡ç®—é˜¶æ®µçš„ç»“æœä½œä¸ºå‚æ•°ä¼ é€’ç»™å‚æ•° fn å€¼çš„å‡½æ•°Functionï¼Œå¹¶ä¼šè¿”å›ä¸€ä¸ªæ–°çš„ CompletionStage</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public &lt;U&gt; CompletableFuture&lt;U&gt; thenApplyAsync(Function&lt;? super T,? extends U&gt; fn)</span><br></pre></td></tr></table></figure>
<p>è¯¥æ–¹æ³•å’Œä¸Šé¢çš„æ–¹æ³• thenApply åŠŸèƒ½ç±»ä¼¼ï¼Œä¸åŒçš„æ˜¯å¯¹è¯¥è®¡ç®—é˜¶æ®µçš„ç»“æœè¿›è¡Œè®¡ç®—çš„å‡½æ•° fn çš„æ‰§è¡Œæ—¶å¼‚æ­¥çš„ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public &lt;U&gt; CompletableFuture&lt;U&gt; thenApplyAsync(Function&lt;? super T,? extends U&gt; fn, Executor executor)</span><br></pre></td></tr></table></figure>
<p>è¯¥æ–¹æ³•å’Œä¸Šé¢çš„æ–¹æ³• thenApplyAsync åŠŸèƒ½ç±»ä¼¼ï¼Œä¸åŒçš„æ˜¯å¯¹è¯¥è®¡ç®—é˜¶æ®µçš„ç»“æœè¿›è¡Œè®¡ç®—çš„å‡½æ•° fn çš„æ‰§è¡Œæ—¶å¼‚æ­¥çš„ï¼Œ å¹¶ä¸”æ˜¯åœ¨è°ƒç”¨è€…æä¾›çš„çº¿ç¨‹æ± ä¸­æ‰§è¡Œçš„ã€‚<br>Function æ¥å£æ–¹æ³• R apply(T t); åŒ…å«ä¸€ä¸ªå‚æ•°å’Œä¸€ä¸ªè¿”å›å€¼<br>ä¸€ä¸ªç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/12/16/CompletableFuture%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1/content11.png" class title="content11"> 

<h3 id="è¿è¡Œå®Œæˆçš„å¼‚æ­¥ä»»åŠ¡çš„ç»“æœ-thenAccept-thenRun"><a href="#è¿è¡Œå®Œæˆçš„å¼‚æ­¥ä»»åŠ¡çš„ç»“æœ-thenAccept-thenRun" class="headerlink" title="è¿è¡Œå®Œæˆçš„å¼‚æ­¥ä»»åŠ¡çš„ç»“æœ (thenAccept/thenRun)"></a>è¿è¡Œå®Œæˆçš„å¼‚æ­¥ä»»åŠ¡çš„ç»“æœ (thenAccept/thenRun)</h3><p>åœ¨ future çš„ç®¡é“é‡Œæœ‰ä¸¤ç§å…¸å‹çš„â€œæœ€ç»ˆâ€é˜¶æ®µæ–¹æ³•ã€‚ä»–ä»¬åœ¨ä½ ä½¿ç”¨ future çš„å€¼çš„æ—¶å€™åšå¥½å‡†å¤‡ï¼Œå½“ thenAccept() æä¾›æœ€ç»ˆçš„å€¼æ—¶ï¼ŒthenRun æ‰§è¡Œ Runnableã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public CompletableFuture&lt;Void&gt; thenAccept(Consumer&lt;? super T&gt; action)</span><br><span class="line">public CompletableFuture&lt;Void&gt; thenAcceptAsync(Consumer&lt;? super T&gt; action)</span><br><span class="line">public CompletableFuture&lt;Void&gt; thenAcceptAsync(Consumer&lt;? super T&gt; action, Executor executor)</span><br><span class="line">public CompletableFuture&lt;Void&gt; thenRun(Runnable action)</span><br><span class="line">public CompletableFuture&lt;Void&gt; thenRunAsync(Runnable action)</span><br><span class="line">public CompletableFuture&lt;Void&gt; thenRunAsync(Runnable action, Executor executor)</span><br></pre></td></tr></table></figure>
<p>Consumer æ¥å£æ–¹æ³• void accept(T t); åŒ…å«ä¸€ä¸ªå‚æ•°ï¼Œä½†æ˜¯æ²¡æœ‰è¿”å›å€¼<br>ä¸€ä¸ªç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/12/16/CompletableFuture%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1/content12.png" class title="content12"> 

<h3 id="ç»“åˆä¸¤ä¸ª-CompletableFuture"><a href="#ç»“åˆä¸¤ä¸ª-CompletableFuture" class="headerlink" title="ç»“åˆä¸¤ä¸ª CompletableFuture"></a>ç»“åˆä¸¤ä¸ª CompletableFuture</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public &lt;U&gt; CompletableFuture&lt;U&gt; thenCompose(Function&lt;? super T, ? extends CompletionStage&lt;U&gt;&gt; fn)</span><br><span class="line">//ä¼ å…¥å‰ä¸€ä¸ª CompletableFuture çš„è¿”å›å€¼ï¼Œè¿”å›å¦å¤–ä¸€ä¸ª CompletableFuture å®ä¾‹</span><br><span class="line">public &lt;U&gt; CompletableFuture&lt;U&gt; thenComposeAsync(Function&lt;? super T, ? extends CompletionStage&lt;U&gt;&gt; fn)</span><br><span class="line">public &lt;U&gt; CompletableFuture&lt;U&gt; thenComposeAsync(Function&lt;? super T, ? extends CompletionStage&lt;U&gt;&gt; fn, Executor executor)</span><br><span class="line">public &lt;U,V&gt; CompletableFuture&lt;V&gt; thenCombine(CompletionStage&lt;? extends U&gt; other, BiFunction&lt;? super T,? super U,? extends V&gt; fn)</span><br><span class="line">public &lt;U,V&gt; CompletableFuture&lt;V&gt; thenCombineAsync(CompletionStage&lt;? extends U&gt; other, BiFunction&lt;? super T,? super U,? extends V&gt; fn)</span><br><span class="line">public &lt;U,V&gt; CompletableFuture&lt;V&gt; thenCombineAsync(CompletionStage&lt;? extends U&gt; other, BiFunction&lt;? super T,? super U,? extends V&gt; fn, Executor executor)</span><br></pre></td></tr></table></figure>
<p>ä¸€ä¸ªç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/12/16/CompletableFuture%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1/content13.png" class title="content13"> 

<p>ä¸Šè¿°åŠŸèƒ½ä¹Ÿå¯ä»¥é€šè¿‡ thenCombine() æ–¹æ³•å®ç°ï¼Œä¼ å…¥ä¸€ä¸ª BiFunction æ¥å£çš„å®ä¾‹ï¼ˆä»¥ Lambda å½¢å¼ï¼‰ ä¾‹å¦‚ï¼š </p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/12/16/CompletableFuture%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1/content14.png" class title="content14"> 

<h3 id="å¹¶è¡Œæ‰§è¡Œå¤šä¸ªå¼‚æ­¥ä»»åŠ¡"><a href="#å¹¶è¡Œæ‰§è¡Œå¤šä¸ªå¼‚æ­¥ä»»åŠ¡" class="headerlink" title="å¹¶è¡Œæ‰§è¡Œå¤šä¸ªå¼‚æ­¥ä»»åŠ¡"></a>å¹¶è¡Œæ‰§è¡Œå¤šä¸ªå¼‚æ­¥ä»»åŠ¡</h3><p>æœ‰æ—¶å€™æˆ‘ä»¬å¯èƒ½éœ€è¦ç­‰å¾…æ‰€æœ‰çš„å¼‚æ­¥ä»»åŠ¡éƒ½æ‰§è¡Œå®Œæ¯•ï¼Œç„¶åç»„åˆä»–ä»¬çš„ç»“æœã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ allOf() æ–¹æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public static CompletableFuture&lt;Void&gt; allOf(CompletableFuture&lt;?&gt;... cfs)</span><br></pre></td></tr></table></figure>
<p>ä¸€ä¸ªç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/12/16/CompletableFuture%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1/content15.png" class title="content15">

<p>æœ‰æ—¶å€™æˆ‘ä»¬å¯èƒ½<strong>ä¸éœ€è¦</strong>ç­‰å¾…æ‰€æœ‰çš„å¼‚æ­¥ä»»åŠ¡éƒ½æ‰§è¡Œå®Œæ¯•ï¼Œåªè¦ä»»ä½•ä¸€ä¸ªä»»åŠ¡å®Œæˆå°±è¿”å›ç»“æœã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ anyOf() æ–¹æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public static CompletableFuture&lt;Object&gt; anyOf(CompletableFuture&lt;?&gt;... cfs)</span><br></pre></td></tr></table></figure>
<p>ä¸€ä¸ªç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/12/16/CompletableFuture%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1/content16.png" class title="content16">
<h3 id="å¼‚å¸¸çš„å¤„ç†"><a href="#å¼‚å¸¸çš„å¤„ç†" class="headerlink" title="å¼‚å¸¸çš„å¤„ç†"></a>å¼‚å¸¸çš„å¤„ç†</h3><p>æˆ‘ä»¬å¯ä»¥åœ¨ handle() æ–¹æ³•é‡Œå¤„ç†å¼‚å¸¸ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public &lt;U&gt; CompletableFuture&lt;U&gt; handle(BiFunction&lt;? super T, Throwable, ? extends U&gt; fn) </span><br></pre></td></tr></table></figure>
<p>ç¬¬ä¸€ä¸ªå‚æ•°ä¸º CompletableFuture è¿”å›çš„ç»“æœ<br>ç¬¬äºŒä¸ªå‚æ•°ä¸ºæŠ›å‡ºçš„å¼‚å¸¸<br>ä¸€ä¸ªç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š  </p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/12/16/CompletableFuture%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1/content17.png" class title="content17">                           ]]></content>
      <categories>
        <category>Javaè¿›é˜¶</category>
      </categories>
      <tags>
        <tag>å¼‚æ­¥</tag>
      </tags>
  </entry>
  <entry>
    <title>GitåŸºç¡€å­¦ä¹ </title>
    <url>/2021/04/14/Git%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/</url>
    <content><![CDATA[<h3 id="ç‰ˆæœ¬æ§åˆ¶"><a href="#ç‰ˆæœ¬æ§åˆ¶" class="headerlink" title="ç‰ˆæœ¬æ§åˆ¶"></a>ç‰ˆæœ¬æ§åˆ¶</h3><p><strong>ç‰ˆæœ¬æ§åˆ¶</strong>ï¼ˆRevision controlï¼‰æ˜¯ä¸€ç§åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­ç”¨äºç®¡ç†æˆ‘ä»¬å¯¹æ–‡ä»¶ã€ç›®å½•æˆ–å·¥ç¨‹ç­‰å†…å®¹çš„ä¿®æ”¹å†å²ï¼Œæ–¹ä¾¿æŸ¥çœ‹æ›´æ”¹å†å²è®°å½•ï¼Œå¤‡ä»½ä»¥ä¾¿æ¢å¤ä»¥å‰ç‰ˆæœ¬çš„è½¯ä»¶å·¥ç¨‹æŠ€æœ¯ã€‚</p>
<ol>
<li>å®ç°è·¨åŒºåŸŸå¤šäººååŒå¼€å‘</li>
<li>è¿½è¸ªå’Œè®°è½½ä¸€ä¸ªæˆ–è€…å¤šä¸ªæ–‡ä»¶çš„å†å²è®°å½•</li>
<li>ç»„ç»‡å’Œä¿æŠ¤ä½ çš„æºä»£ç å’Œæ–‡æ¡£</li>
<li>ç»Ÿè®¡å·¥ä½œé‡</li>
<li>å¹¶è¡Œå¼€å‘ã€æé«˜å¼€å‘æ•ˆç‡</li>
<li>è·Ÿè¸ªè®°å½•æ•´ä¸ªè½¯ä»¶çš„å¼€å‘è¿‡ç¨‹</li>
<li>å‡è½»å¼€å‘äººå‘˜çš„è´Ÿæ‹…ï¼ŒèŠ‚çº¦æ—¶é—´ï¼ŒåŒæ—¶é™ä½äººä¸ºé”™è¯¯</li>
</ol>
<p>ä¸»æµç‰ˆæœ¬æ§åˆ¶å·¥å…·ï¼šGitã€SVNã€CVSã€VSSã€TFSã€Visual Studio Online</p>
<h3 id="Gitå’ŒSVNçš„åŒºåˆ«"><a href="#Gitå’ŒSVNçš„åŒºåˆ«" class="headerlink" title="Gitå’ŒSVNçš„åŒºåˆ«"></a>Gitå’ŒSVNçš„åŒºåˆ«</h3><ol>
<li><p>æœ¬åœ°ç‰ˆæœ¬æ§åˆ¶<br>è®°å½•æ–‡ä»¶æ¯æ¬¡çš„æ›´æ–°ï¼Œå¯ä»¥å¯¹æ¯ä¸ªç‰ˆæœ¬åšä¸€ä¸ªå¿«ç…§ï¼Œæˆ–æ˜¯è®°å½•è¡¥ä¸æ–‡ä»¶ï¼Œé€‚åˆä¸ªäººä½¿ç”¨</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2021/04/14/Git%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/content1.png" class title="content1"></li>
<li><p>é›†ä¸­ç‰ˆæœ¬æ§åˆ¶ï¼ˆä»£è¡¨å·¥å…·ï¼šSVNï¼‰<br>æ‰€æœ‰çš„ç‰ˆæœ¬æ•°æ®éƒ½å­˜åœ¨æœåŠ¡å™¨ä¸Šï¼Œç”¨æˆ·æœ¬åœ°åªæœ‰è‡ªå·±ä»¥å‰æ‰€åŒæ­¥çš„ç‰ˆæœ¬ï¼Œå¦‚æœä¸è¿ç½‘çš„è¯ï¼Œç”¨æˆ·å°±çœ‹ä¸åˆ°å†å²ç‰ˆæœ¬ï¼Œä¹Ÿæ— æ³•åˆ‡æ¢ç‰ˆæœ¬éªŒè¯é—®é¢˜ï¼Œæˆ–åœ¨ä¸åŒåˆ†æ”¯å·¥ä½œã€‚è€Œä¸”ï¼Œæ‰€æœ‰æ•°æ®éƒ½ä¿å­˜åœ¨å•ä¸€çš„æœåŠ¡å™¨ä¸Šï¼Œæœ‰å¾ˆå¤§çš„é£é™©è¿™ä¸ªæœåŠ¡å™¨ä¼šæŸåï¼Œè¿™æ ·å°±ä¼šä¸¢å¤±æ‰€æœ‰çš„æ•°æ®ï¼Œå½“ç„¶å¯ä»¥å®šæœŸå¤‡ä»½ã€‚</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2021/04/14/Git%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/content2.png" class title="content2"></li>
<li><p>åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶<br>æ¯ä¸ªäººéƒ½æ‹¥æœ‰å…¨éƒ¨çš„ä»£ç ï¼Œæœ‰å®‰å…¨éšæ‚£ã€‚<br>æ‰€æœ‰ç‰ˆæœ¬ä¿¡æ¯ä»“åº“å…¨éƒ¨åŒæ­¥åˆ°æœ¬åœ°çš„æ¯ä¸ªç”¨æˆ·ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨æœ¬åœ°æŸ¥çœ‹æ‰€æœ‰ç‰ˆæœ¬å†å²ï¼Œå¯ä»¥ç¦»çº¿åœ¨æœ¬åœ°æäº¤ï¼Œåªéœ€åœ¨è¿ç½‘æ—¶pushåˆ°ç›¸åº”çš„æœåŠ¡å™¨æˆ–å…¶ä»–ç”¨æˆ·é‚£é‡Œã€‚ç”±äºæ¯ä¸ªç”¨æˆ·é‚£é‡Œä¿å­˜çš„éƒ½æ˜¯æ‰€æœ‰çš„ç‰ˆæœ¬æ•°æ®ï¼Œåªè¦æœ‰ä¸€ä¸ªç”¨æˆ·çš„è®¾å¤‡æ²¡æœ‰é—®é¢˜å°±å¯ä»¥æ¢å¤æ‰€æœ‰çš„æ•°æ®ï¼Œä½†è¿™å¢åŠ äº†æœ¬åœ°å­˜å‚¨ç©ºé—´çš„å ç”¨ã€‚<br>ä¸ä¼šå› ä¸ºæœåŠ¡å™¨æŸåæˆ–è€…ç½‘ç»œé—®é¢˜ï¼Œé€ æˆä¸èƒ½å·¥ä½œçš„æƒ…å†µï¼</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2021/04/14/Git%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/content3.png" class title="content3"></li>
</ol>
<p><strong>Gitä¸SVNæœ€ä¸»è¦åŒºåˆ«</strong><br>SVNæ˜¯é›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿã€ç‰ˆæœ¬åº“æ˜¯é›†ä¸­æ”¾åœ¨ä¸­å¤®æœåŠ¡å™¨çš„ï¼Œè€Œå·¥ä½œçš„æ—¶å€™ï¼Œç”¨çš„éƒ½æ˜¯è‡ªå·±çš„ç”µè„‘ï¼Œæ‰€ä»¥é¦–å…ˆè¦ä»ä¸­å¤®æœåŠ¡å™¨å¾—åˆ°æœ€æ–°çš„ç‰ˆæœ¬ï¼Œç„¶åå·¥ä½œï¼Œå®Œæˆå·¥ä½œåï¼Œéœ€è¦æŠŠè‡ªå·±åšå®Œçš„æ´»æ¨é€åˆ°ä¸­å¤®æœåŠ¡å™¨ã€‚é›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿæ˜¯å¿…é¡»è”ç½‘æ‰èƒ½å·¥ä½œï¼Œå¯¹ç½‘ç»œå¸¦å®½è¦æ±‚è¾ƒé«˜ã€‚<br>Gitæ˜¯åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œæ²¡æœ‰ä¸­å¤®æœåŠ¡å™¨ï¼Œæ¯ä¸ªäººçš„ç”µè„‘å°±æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç‰ˆæœ¬åº“ï¼Œå·¥ä½œçš„æ—¶å€™ä¸éœ€è¦è”ç½‘äº†ï¼Œå› ä¸ºç‰ˆæœ¬éƒ½åœ¨è‡ªå·±ç”µè„‘ä¸Šã€‚ååŒçš„æ–¹æ³•æ˜¯è¿™æ ·çš„ï¼šæ¯”å¦‚è¯´è‡ªå·±åœ¨ç”µè„‘ä¸Šæ”¹äº†æ–‡ä»¶Aï¼Œå…¶ä»–äººä¹Ÿåœ¨ç”µè„‘ä¸Šæ”¹äº†æ–‡ä»¶Aï¼Œè¿™æ—¶ï¼Œä½ ä»¬ä¸¤ä¹‹é—´åªéœ€æŠŠå„è‡ªçš„ä¿®æ”¹æ¨é€ç»™å¯¹æ–¹ï¼Œå°±å¯ä»¥äº’ç›¸çœ‹åˆ°å¯¹æ–¹çš„ä¿®æ”¹äº†ã€‚Gitå¯ä»¥ç›´æ¥çœ‹åˆ°æ›´æ–°äº†å“ªäº›ä»£ç å’Œæ–‡ä»¶ã€‚<br>Gitæ˜¯ç›®å‰ä¸–ç•Œä¸Šæœ€å…ˆè¿›çš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿã€‚</p>
<h3 id="Gitç¯å¢ƒé…ç½®"><a href="#Gitç¯å¢ƒé…ç½®" class="headerlink" title="Gitç¯å¢ƒé…ç½®"></a>Gitç¯å¢ƒé…ç½®</h3><p>å®˜ç½‘ä¸‹è½½ï¼š<a href="https://git-scm.com/%EF%BC%8C">https://git-scm.com/ï¼Œ</a>  ä¸‹è½½gitå¯¹åº”æ“ä½œç³»ç»Ÿçš„ç‰ˆæœ¬ã€‚<br>å®˜ç½‘ä¸‹è½½å¤ªæ…¢ï¼Œå¯ä»¥ä½¿ç”¨æ·˜å®é•œåƒä¸‹è½½ï¼š<a href="http://npm.taobao.org/mirrors/git-for-windows/">http://npm.taobao.org/mirrors/git-for-windows/</a><br>å®‰è£…åˆ™ä¸€ç›´ç‚¹å‡»ä¸‹ä¸€æ­¥<br>å¸è½½åˆ™å…ˆæ¸…ç†ç¯å¢ƒå˜é‡é…ç½®ï¼Œå†å¸è½½</p>
<ul>
<li>Git Bashï¼šUnixä¸Linuxçš„é£æ ¼çš„å‘½ä»¤è¡Œï¼Œä½¿ç”¨æœ€å¤šï¼Œæ¨èæœ€å¤š</li>
<li>Git CMDï¼šWindowsé£æ ¼çš„å‘½ä»¤è¡Œ</li>
<li>Git GUIï¼šå›¾å½¢ç•Œé¢çš„Gitï¼Œä¸å»ºè®®åˆå­¦è€…ä½¿ç”¨ï¼Œå°½é‡å…ˆç†Ÿæ‚‰å¸¸ç”¨å‘½ä»¤</li>
</ul>
<p>åŸºæœ¬Linuxå‘½ä»¤å­¦ä¹ ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cdï¼šæ”¹å˜ç›®å½•</span><br><span class="line">cd .. ï¼šå›é€€åˆ°ä¸Šä¸€ä¸ªç›®å½•ï¼Œç›´æ¥cdè¿›å…¥é»˜è®¤ç›®å½•</span><br><span class="line">pwdï¼šæ˜¾ç¤ºå½“å‰æ‰€åœ¨çš„ç›®å½•è·¯å¾„</span><br><span class="line">ls(ll)ï¼šéƒ½æ˜¯åˆ—å‡ºå½“å‰ç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶ï¼Œåªä¸è¿‡llåˆ—å‡ºçš„å†…å®¹æ›´ä¸ºè¯¦ç»†</span><br><span class="line">touchï¼šæ–°å»ºä¸€ä¸ªæ–‡ä»¶ å¦‚touch index.js å°±ä¼šåœ¨å½“å‰ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªindex.jsæ–‡ä»¶</span><br><span class="line">rmï¼šåˆ é™¤ä¸€ä¸ªæ–‡ä»¶ï¼Œrm index.js å°±ä¼šæŠŠindex.jsæ–‡ä»¶åˆ é™¤</span><br><span class="line">mkdirï¼šæ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹</span><br><span class="line">rm -rï¼šåˆ é™¤ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œrm -r srcåˆ é™¤srcæ–‡ä»¶å¤¹</span><br><span class="line">mvï¼šç§»åŠ¨æ–‡ä»¶ï¼Œmv index.html src å°†index.htmlæ–‡ä»¶ç§»åŠ¨åˆ°srcç›®å½•ä¸‹</span><br><span class="line">resetï¼šé‡æ–°åˆå§‹åŒ–ç»ˆç«¯/æ¸…å±</span><br><span class="line">clearï¼šæ¸…å±</span><br><span class="line">historyï¼šæŸ¥çœ‹å‘½ä»¤å†å²</span><br><span class="line">helpï¼šå¸®åŠ©</span><br><span class="line">exitï¼šé€€å‡º</span><br><span class="line">#è¡¨ç¤ºæ³¨é‡Š</span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹é…ç½®ï¼šgit config -l<br>æŸ¥çœ‹å…¨å±€é…ç½®ï¼šgit config â€“global â€“listï¼ˆè¿™ä¸ªäº‹å…ˆå¿…é¡»è‡ªå·±å…ˆé…ç½®å¥½ï¼‰</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2021/04/14/Git%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/content4.png" class title="content4">
<p>git config â€“global user.name â€œliuyeweiQXâ€ #åç§°<br>git config â€“global user.email <a href="mailto:&#x37;&#x36;&#x39;&#52;&#57;&#57;&#49;&#50;&#64;&#113;&#x71;&#46;&#99;&#111;&#x6d;">&#x37;&#x36;&#x39;&#52;&#57;&#57;&#49;&#50;&#64;&#113;&#x71;&#46;&#99;&#111;&#x6d;</a> #é‚®ç®±</p>
<h3 id="GitåŸºæœ¬ç†è®º"><a href="#GitåŸºæœ¬ç†è®º" class="headerlink" title="GitåŸºæœ¬ç†è®º"></a>GitåŸºæœ¬ç†è®º</h3><p>Gitæœ¬åœ°æœ‰ä¸‰ä¸ªå·¥ä½œåŒºåŸŸï¼šå·¥ä½œç›®å½•ï¼ˆWorking Directoryï¼‰ã€æš‚å­˜åŒºï¼ˆStage/Indexï¼‰ã€èµ„æºåº“ï¼ˆRepositoryæˆ–Git Directoryï¼‰ã€‚å¦‚æœåœ¨åŠ ä¸Šè¿œç¨‹çš„gitä»“åº“ï¼ˆRemote Directoryï¼‰å°±å¯ä»¥åˆ†ä¸ºå››ä¸ªå·¥ä½œåŒºåŸŸã€‚æ–‡ä»¶åœ¨è¿™å››ä¸ªåŒºåŸŸä¹‹é—´çš„è½¬æ¢å…³ç³»å¦‚ä¸‹ï¼š</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2021/04/14/Git%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/content5.png" class title="content5">

<ul>
<li>WorkSpaceï¼šå·¥ä½œåŒºï¼Œå°±æ˜¯å¹³æ—¶å­˜æ”¾é¡¹ç›®ä»£ç åœ°æ–¹</li>
<li>Index/Stageï¼šæš‚å­˜åŒºï¼Œç”¨äºä¸´æ—¶å­˜æ”¾ä½ çš„æ”¹åŠ¨ï¼Œäº‹å®ä¸Šä»–åªæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œä¿å­˜å³å°†æäº¤åˆ°æ–‡ä»¶åˆ—è¡¨ä¿¡æ¯</li>
<li>Repositoryï¼šä»“åº“åŒºï¼ˆæˆ–æœ¬åœ°ä»“åº“ï¼‰ï¼Œå°±æ˜¯å®‰å…¨å­˜æ”¾æ•°æ®çš„ä½ç½®ï¼Œè¿™é‡Œé¢æœ‰æäº¤åˆ°æ‰€æœ‰ç‰ˆæœ¬çš„æ•°æ®ã€‚å…¶ä¸­HEADæŒ‡å‘æœ€æ–°æ”¾å…¥ä»“åº“çš„ç‰ˆæœ¬</li>
<li>Remoteï¼šè¿œç¨‹ä»“åº“ï¼Œæ‰˜ç®¡ä»£ç çš„æœåŠ¡å™¨ï¼Œå¯ä»¥ç®€å•çš„è®¤ä¸ºæ˜¯é¡¹ç›®ç»„ä¸­çš„ä¸€å°ç”µè„‘ç”¨äºè¿œç¨‹æ•°æ®äº¤æ¢</li>
</ul>
<h3 id="Gité¡¹ç›®æ­å»º"><a href="#Gité¡¹ç›®æ­å»º" class="headerlink" title="Gité¡¹ç›®æ­å»º"></a>Gité¡¹ç›®æ­å»º</h3><p>git initï¼šæœ¬åœ°é¡¹ç›®åˆ›å»ºï¼Œåˆ›å»ºåå¯ä»¥çœ‹åˆ°é¡¹ç›®ç›®å½•å¤šå‡ºäº†ä¸€ä¸ª.gitç›®å½•ï¼Œå…³äºç‰ˆæœ¬ç­‰çš„æ‰€æœ‰ä¿¡æ¯éƒ½åœ¨è¿™ä¸ªç›®å½•é‡Œé¢<br>git clone + è¿œç¨‹ç›®å½•ï¼šå…‹éš†è¿œç¨‹ä»“åº“ï¼Œ</p>
<h3 id="Gitæ–‡ä»¶æ“ä½œ"><a href="#Gitæ–‡ä»¶æ“ä½œ" class="headerlink" title="Gitæ–‡ä»¶æ“ä½œ"></a>Gitæ–‡ä»¶æ“ä½œ</h3><p>æ–‡ä»¶4ç§çŠ¶æ€ï¼š</p>
<ul>
<li>Untrackedï¼šæœªè·Ÿè¸ªï¼Œæ­¤æ–‡ä»¶åœ¨æ–‡ä»¶å¤¹ä¸­ï¼Œä½†å¹¶æ²¡æœ‰åŠ å…¥åˆ°gitåº“ï¼Œä¸å‚ä¸ç‰ˆæœ¬æ§åˆ¶ï¼Œé€šè¿‡git addçŠ¶æ€å˜ä¸ºStaged</li>
<li>Unmodifyï¼šæ–‡ä»¶å·²ç»å…¥åº“ï¼Œæœªä¿®æ”¹ï¼Œå³ç‰ˆæœ¬åº“ä¸­çš„æ–‡ä»¶å¿«ç…§å†…å®¹ä¸æ–‡ä»¶å¤¹ä¸­å®Œå…¨ä¸€è‡´ï¼Œè¿™ç§ç±»å‹çš„æ–‡ä»¶æœ‰ä¸¤ç§å»å¤„ï¼Œå¦‚æœå®ƒè¢«ä¿®æ”¹å˜ä¸ºModifiedï¼Œå¦‚æœä½¿ç”¨git rmç§»å‡ºç‰ˆæœ¬åº“ï¼Œåˆ™æˆä¸ºUntrackedæ–‡ä»¶</li>
<li>Modifiedï¼šæ–‡ä»¶å·²ä¿®æ”¹ï¼Œä»…ä»…æ˜¯ä¿®æ”¹ï¼Œå¹¶æ²¡æœ‰è¿›è¡Œå…¶ä»–çš„æ“ä½œï¼Œè¿™ä¸ªæ–‡ä»¶ä¹Ÿæœ‰ä¸¤ä¸ªå»å¤„ï¼Œé€šè¿‡git addå¯è¿›å…¥æš‚å­˜stagedçŠ¶æ€ï¼Œä½¿ç”¨git checkedåˆ™ä¸¢å¼ƒä¿®æ”¹è¿‡ï¼Œè¿”å›unmodifyçŠ¶æ€ï¼Œè¿™ä¸ªgit checkoutå³ä»åº“ä¸­å–å‡ºæ–‡ä»¶ï¼Œè¦†ç›–å½“å‰ä¿®æ”¹</li>
<li>Stagedï¼šæš‚å­˜çŠ¶æ€ï¼Œæ‰§è¡Œgit commitåˆ™å°†ä¿®æ”¹åŒæ­¥åˆ°åº“ä¸­ï¼Œè¿™æ—¶åº“ä¸­çš„æ–‡ä»¶å’Œæœ¬åœ°æ–‡ä»¶åˆå˜ä¸ºä¸€è‡´ï¼Œæ–‡ä»¶ä¸ºUnmodifyçŠ¶æ€ï¼Œæ‰§è¡Œgit reset HEAD filenameå–æ¶ˆæš‚å­˜ï¼Œæ–‡ä»¶çŠ¶æ€ä¸ºModified</li>
</ul>
<p>æŸ¥çœ‹æ–‡ä»¶çŠ¶æ€ï¼šgit status /git status [filename]<br>æ·»åŠ æ‰€æœ‰æ–‡ä»¶åˆ°æš‚å­˜åŒºï¼šgit add .<br>æäº¤æš‚å­˜åŒºçš„æ‰€å“Ÿæ–‡ä»¶åˆ°æœ¬åœ°ä»“åº“ï¼šgit commit -m</p>
<p><strong>å¿½ç•¥æ–‡ä»¶</strong>ï¼š<br>å¦‚æœå¸Œæœ›æŸäº›æ–‡ä»¶ä¸çº³å…¥ç‰ˆæœ¬æ§åˆ¶ï¼Œåœ¨ç›®å½•ä¸‹å»ºç«‹â€œ.gitignoreâ€ï¼Œæ­¤æ–‡ä»¶æœ‰å¦‚ä¸‹è§„åˆ™ï¼š<br>#ä¸ºæ³¨é‡Š<br><em>.txt    #å¿½ç•¥æ‰€æœ‰.txtç»“å°¾çš„æ–‡ä»¶<br>!lib.txt #ä½†lib.txté™¤å¤–<br>/temp #ä»…å¿½ç•¥é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„TODOæ–‡ä»¶ï¼Œä¸åŒ…æ‹¬å…¶å®ƒç›®å½•temp<br>build/ #å¿½ç•¥build/ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶<br>doc/</em>.txt #ä¼šå¿½ç•¥ doc/notes.txt ä½†ä¸åŒ…æ‹¬doc/server/arch.txt</p>
<h3 id="Gitåˆ†æ”¯"><a href="#Gitåˆ†æ”¯" class="headerlink" title="Gitåˆ†æ”¯"></a>Gitåˆ†æ”¯</h3><p>åˆ—å‡ºæ‰€æœ‰æœ¬åœ°åˆ†æ”¯ï¼šgit branch<br>åˆ—å‡ºæ‰€æœ‰è¿œç¨‹åˆ†æ”¯ï¼šgit branch -r<br>æ–°å»ºåˆ†æ”¯ï¼Œä½†ä¾ç„¶åœç•™åœ¨å½“å‰åˆ†æ”¯ï¼šgit branch [branch-name]<br>æ–°å»ºåˆ†æ”¯ï¼Œå¹¶åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯ï¼šgit checkout -b [branch]<br>åˆå¹¶æŒ‡å®šåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯ï¼šgit merge [branch]<br>åˆ é™¤åˆ†æ”¯ï¼šgit branch -d [branch-name]<br>åˆ é™¤è¿œç¨‹åˆ†æ”¯ï¼š<br>git push origin â€“delete [branch-name]<br>git branch -dr [remote/branch]</p>
<h3 id="Gité¡¹ç›®åˆ°githubä¸Š"><a href="#Gité¡¹ç›®åˆ°githubä¸Š" class="headerlink" title="Gité¡¹ç›®åˆ°githubä¸Š"></a>Gité¡¹ç›®åˆ°githubä¸Š</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git init</span><br><span class="line">git add .</span><br><span class="line">git commit -m &quot;first commit&quot;</span><br><span class="line">git remote add origin [url]</span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>å·¥å…·</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title>Gulpå‹ç¼©å’ŒPWA</title>
    <url>/2020/09/08/Gulp%E5%8E%8B%E7%BC%A9%E5%92%8CPWA/</url>
    <content><![CDATA[<h3 id="Gulpå‹ç¼©"><a href="#Gulpå‹ç¼©" class="headerlink" title="Gulpå‹ç¼©"></a>Gulpå‹ç¼©</h3><p>Gulpæ˜¯ä¸€æ¬¾è‡ªåŠ¨åŒ–æ„å»ºçš„å·¥å…·</p>
<h4 id="å®‰è£…Gulp"><a href="#å®‰è£…Gulp" class="headerlink" title="å®‰è£…Gulp"></a>å®‰è£…Gulp</h4><p>npm install â€“global gulp-cli<br>å®‰è£…è¿‡ç¨‹ä¸­è‹¥æŠ¥æƒé™é”™è¯¯ï¼Œåˆ™æ‰§è¡Œsudo npm install â€“global gulp-cliå‘½ä»¤</p>
<h4 id="æ’ä»¶å®‰è£…"><a href="#æ’ä»¶å®‰è£…" class="headerlink" title="æ’ä»¶å®‰è£…"></a>æ’ä»¶å®‰è£…</h4><ul>
<li>HTMLå‹ç¼©æ’ä»¶ï¼š<br>npm install gulp-htmlclean â€“save-dev<br>npm install â€“save gulp-htmlmin</li>
<li>CSSå‹ç¼©æ’ä»¶ï¼š<br>npm install gulp-clean-css â€“save-dev</li>
<li>JSå‹ç¼©æ’ä»¶ï¼šï¼ˆäºŒé€‰ä¸€ï¼‰<br>terser æ˜¯ ES6+ çš„ JavaScript è§£æå™¨<br>gulp-babel æ˜¯ä¸€ä¸ª JavaScript è½¬æ¢ç¼–è¯‘å™¨ï¼Œå¯ä»¥æŠŠ ES6 è½¬æ¢æˆ ES5<ul>
<li>npm install â€“save-dev gulp-uglify  ;  npm install terser</li>
<li>npm install â€“save-dev gulp-uglify  ;  npm install â€“save-dev gulp-babel @babel/core @babel/preset-env</li>
</ul>
</li>
<li>å›¾ç‰‡å‹ç¼©æ’ä»¶ï¼š<br>npm install â€“save-dev gulp-imagemin</li>
</ul>
<h4 id="åˆ›å»ºgulpfile-jsæ–‡ä»¶"><a href="#åˆ›å»ºgulpfile-jsæ–‡ä»¶" class="headerlink" title="åˆ›å»ºgulpfile.jsæ–‡ä»¶"></a>åˆ›å»ºgulpfile.jsæ–‡ä»¶</h4><p>åœ¨ Hexo çš„æ ¹ç›®å½•ï¼Œåˆ›å»º gulpfile.js æ–‡ä»¶</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const gulp = require(&quot;gulp&quot;);</span><br><span class="line">const workbox = require(&quot;workbox-build&quot;);</span><br><span class="line">const cleanCSS = require(&#x27;gulp-clean-css&#x27;);</span><br><span class="line">const htmlmin = require(&#x27;gulp-htmlmin&#x27;);</span><br><span class="line">const htmlclean = require(&#x27;gulp-htmlclean&#x27;);</span><br><span class="line">const imagemin = require(&#x27;gulp-imagemin&#x27;);</span><br><span class="line">// tester (å¦‚æœä½¿ç”¨tester,æŠŠä¸‹é¢4è¡Œå‰é¢çš„//å»æ‰)</span><br><span class="line">// const uglifyjs = require(&#x27;terser&#x27;);</span><br><span class="line">// const composer = require(&#x27;gulp-uglify/composer&#x27;);</span><br><span class="line">// const pump = require(&#x27;pump&#x27;);</span><br><span class="line">// const minify = composer(uglifyjs, console);</span><br><span class="line"></span><br><span class="line">// babel (å¦‚æœä¸æ˜¯ä½¿ç”¨bebel,æŠŠä¸‹é¢å…©è¡Œè¨»é‡‹æ‰)</span><br><span class="line">const uglify = require(&#x27;gulp-uglify&#x27;)</span><br><span class="line">const babel = require(&#x27;gulp-babel&#x27;)</span><br><span class="line"></span><br><span class="line">// minify js - babelï¼ˆ å¦‚æœä¸æ˜¯ä½¿ç”¨bebel,æŠŠä¸‹é¢è¨»é‡‹æ‰ï¼‰</span><br><span class="line">gulp.task(&#x27;compress&#x27;, () =&gt;</span><br><span class="line">    gulp.src([&#x27;./public/**/*.js&#x27;, &#x27;!./public/**/*.min.js&#x27;])</span><br><span class="line">        .pipe(babel(&#123;</span><br><span class="line">            presets: [&#x27;@babel/preset-env&#x27;]</span><br><span class="line">        &#125;))</span><br><span class="line">        .pipe(uglify().on(&#x27;error&#x27;, function (e) &#123;</span><br><span class="line">            console.log(e)</span><br><span class="line">        &#125;))</span><br><span class="line">        .pipe(gulp.dest(&#x27;./public&#x27;))</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">// minify js - tester (å¦‚æœä½¿ç”¨tester,æŠŠä¸‹é¢å‰é¢çš„//å»æ‰)</span><br><span class="line">// gulp.task(&#x27;compress&#x27;, function (cb) &#123;</span><br><span class="line">//   const options = &#123;&#125;;</span><br><span class="line">//   pump([</span><br><span class="line">//     gulp.src([&#x27;./public/**/*.js&#x27;, &#x27;!./public/**/*.min.js&#x27;]),</span><br><span class="line">//     minify(options),</span><br><span class="line">//     gulp.dest(&#x27;./public&#x27;)</span><br><span class="line">//   ],</span><br><span class="line">//   cb</span><br><span class="line">//   );</span><br><span class="line">// &#125;);</span><br><span class="line"></span><br><span class="line">// css</span><br><span class="line">gulp.task(&#x27;minify-css&#x27;, () =&gt; &#123;</span><br><span class="line">    return gulp.src(&#x27;./public/**/*.css&#x27;)</span><br><span class="line">        .pipe(cleanCSS(&#123;</span><br><span class="line">            compatibility: &#x27;ie11&#x27;</span><br><span class="line">        &#125;))</span><br><span class="line">        .pipe(gulp.dest(&#x27;./public&#x27;));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// å£“ç¸® public ç›®éŒ„å…§ html</span><br><span class="line">gulp.task(&#x27;minify-html&#x27;, () =&gt; &#123;</span><br><span class="line">    return gulp.src(&#x27;./public/**/*.html&#x27;)</span><br><span class="line">        .pipe(htmlclean())</span><br><span class="line">        .pipe(htmlmin(&#123;</span><br><span class="line">            removeComments: true, // æ¸…é™¤ HTML è¨»é‡‹</span><br><span class="line">            collapseWhitespace: true, // å£“ç¸® HTML</span><br><span class="line">            collapseBooleanAttributes: true, // çœç•¥å¸ƒçˆ¾å±¬æ€§çš„å€¼ &lt;input checked=&quot;true&quot;/&gt; ==&gt; &lt;input /&gt;</span><br><span class="line">            removeEmptyAttributes: true, // åˆªé™¤æ‰€æœ‰ç©ºæ ¼ä½œå±¬æ€§å€¼ &lt;input id=&quot;&quot; /&gt; ==&gt; &lt;input /&gt;</span><br><span class="line">            removeScriptTypeAttributes: true, // åˆªé™¤ &lt;script&gt; çš„ type=&quot;text/javascript&quot;</span><br><span class="line">            removeStyleLinkTypeAttributes: true, // åˆªé™¤ &lt;style&gt; å’Œ &lt;link&gt; çš„ type=&quot;text/css&quot;</span><br><span class="line">            minifyJS: true, // å£“ç¸®é é¢ JS</span><br><span class="line">            minifyCSS: true, // å£“ç¸®é é¢ CSS</span><br><span class="line">            minifyURLs: true</span><br><span class="line">        &#125;))</span><br><span class="line">        .pipe(gulp.dest(&#x27;./public&#x27;))</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// å‹ç¼© public/uploads ç›®å½•å†…å›¾ç‰‡</span><br><span class="line">gulp.task(&#x27;minify-images&#x27;, async () =&gt; &#123;</span><br><span class="line">    gulp.src(&#x27;./public/img/**/*.*&#x27;)</span><br><span class="line">        .pipe(imagemin(&#123;</span><br><span class="line">            optimizationLevel: 5, //ç±»å‹ï¼šNumber  é¢„è®¾ï¼š3  å–å€¼ç¯„å›´ï¼š0-7ï¼ˆä¼˜åŒ–ç­‰çº§ï¼‰</span><br><span class="line">            progressive: true, //ç±»å‹ï¼šBoolean é¢„è®¾ï¼šfalse æ— å¤±çœŸå‹ç¼©jpgå›¾ç‰‡</span><br><span class="line">            interlaced: false, //ç±»å‹ï¼šBoolean é¢„è®¾ï¼šfalse éš”è¡Œæ‰«ægifè¿›è¡Œæ¸²æŸ“</span><br><span class="line">            multipass: false, //ç±»å‹ï¼šBoolean é¢„è®¾ï¼šfalse å¤šæ¬¡ä¼˜åŒ–svgç›´åˆ°å®Œå…¨ä¼˜åŒ–</span><br><span class="line">        &#125;))</span><br><span class="line">        .pipe(gulp.dest(&#x27;./public/img&#x27;));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">gulp.task(&#x27;generate-service-worker&#x27;, () =&gt; &#123;</span><br><span class="line">    return workbox.injectManifest(&#123;</span><br><span class="line">        swSrc: &#x27;./sw-template.js&#x27;,</span><br><span class="line">        swDest: &#x27;./public/sw.js&#x27;,</span><br><span class="line">        globDirectory: &#x27;./public&#x27;,</span><br><span class="line">        globPatterns: [</span><br><span class="line">            &quot;**/*.&#123;html,css,js,json,woff2&#125;&quot;</span><br><span class="line">        ],</span><br><span class="line">        modifyURLPrefix: &#123;</span><br><span class="line">            &quot;&quot;: &quot;./&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// åŸ·è¡Œ gulp å‘½ä»¤æ™‚åŸ·è¡Œçš„ä»»å‹™</span><br><span class="line">gulp.task(&quot;default&quot;, gulp.series(&quot;generate-service-worker&quot;, gulp.parallel(</span><br><span class="line">    &#x27;compress&#x27;,&#x27;minify-html&#x27;, &#x27;minify-css&#x27;, &#x27;minify-images&#x27;</span><br><span class="line">)));</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼š å¦‚æœæœ‰ä½¿ç”¨åˆ° Butterfly ä¸»é¢˜æä¾›çš„ mermaid æ ‡ç­¾ï¼Œé‚£éœ€è¦æŠŠ 52 è¡Œ.pipe(htmlclean()) æ³¨é‡Šæ‰ï¼ŒåŒæ—¶ï¼ŒæŠŠ 55 è¡Œçš„ collapseWhitespace: true, æ”¹ä¸º false</p>
<h4 id="è¿è¡Œ"><a href="#è¿è¡Œ" class="headerlink" title="è¿è¡Œ"></a>è¿è¡Œ</h4><p>åœ¨hexo gä¹‹åè¿è¡Œgulp</p>
<h3 id="PWA"><a href="#PWA" class="headerlink" title="PWA"></a>PWA</h3><p>æ¸è¿›å¼ç½‘ç»œåº”ç”¨ç¨‹å¼ï¼ˆè‹±è¯­ï¼šProgressive Web Appsï¼Œç®€ç§°ï¼šPWAï¼‰æ˜¯ä¸€ç§æ™®é€šç½‘é¡µæˆ–ç½‘ç«™æ¶æ„èµ·æ¥çš„ç½‘ç»œåº”ç”¨ç¨‹å¼ï¼Œä½†å®ƒå¯ä»¥ä»¥ä¼ ç»Ÿåº”ç”¨ç¨‹å¼æˆ–åŸç”Ÿç§»åŠ¨åº”ç”¨ç¨‹å¼å½¢å¼å±•ç¤ºç»™ç”¨æˆ·ã€‚è¿™ç§åº”ç”¨ç¨‹å¼å½¢æ€è§†å›¾å°†ç›®å‰æœ€ä¸ºç°ä»£åŒ–çš„æµè§ˆå™¨æä¾›çš„åŠŸèƒ½ä¸è¡ŒåŠ¨è£…ç½®çš„ä½“éªŒä¼˜åŠ¿ç›¸ç»“åˆã€‚</p>
<p>å½“ä½ çš„ç½‘ç«™å®ç°äº† PWAï¼Œé‚£å°±ä»£è¡¨äº†:</p>
<ul>
<li>ç”¨æˆ·å¯ä»¥æ·»åŠ ä½ çš„åšå®¢åˆ°ç”µè„‘â•±æ‰‹æœºçš„æ¡Œé¢ï¼Œä»¥åŸç”Ÿåº”ç”¨èˆ¬çš„æ–¹å¼æµè§ˆä½ çš„åšå®¢</li>
<li>ç”¨æˆ·å¯ä»¥æ›´å¿«é€Ÿåœ°æµè§ˆä½ çš„åšå®¢</li>
<li>ç”¨æˆ·å¯ä»¥ç¦»çº¿æµè§ˆä½ çš„åšå®¢</li>
</ul>
<p>ä½¿ç”¨ Service Workerã€‚æˆ‘ä»¬ä½¿ç”¨ Workbox è¿™ä¸ªå·¥å…·ç”Ÿæˆ sw.js ä»¥å¿«é€Ÿå®ç° Service Worker ï¼Œå¹¶å®ç°é¡µé¢çš„é¢„ç¼“å­˜å’Œé¡µé¢æ›´æ–°åçš„æé†’åŠŸèƒ½ã€‚</p>
<h4 id="å¼€å¯è®¾ç½®å’Œé…ç½®manifest-json"><a href="#å¼€å¯è®¾ç½®å’Œé…ç½®manifest-json" class="headerlink" title="å¼€å¯è®¾ç½®å’Œé…ç½®manifest.json"></a>å¼€å¯è®¾ç½®å’Œé…ç½®manifest.json</h4><p>ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­å¼€å¯pwaé€‰é¡¹</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pwa:</span><br><span class="line">  enable: true</span><br><span class="line">  manifest: /img/pwa/manifest.json</span><br><span class="line">  apple_touch_icon: /img/pwa/apple-touch-icon.png</span><br><span class="line">  favicon_32_32: /img/pwa/32.png</span><br><span class="line">  favicon_16_16: /img/pwa/16.png</span><br><span class="line">  mask_icon: /img/pwa/safari-pinned-tab.svg</span><br></pre></td></tr></table></figure>
<h4 id="åœ¨ä¸»é¢˜çš„source-ç›®å½•ä¸­åˆ›å»º-manifest-json-æ–‡ä»¶ã€‚"><a href="#åœ¨ä¸»é¢˜çš„source-ç›®å½•ä¸­åˆ›å»º-manifest-json-æ–‡ä»¶ã€‚" class="headerlink" title="åœ¨ä¸»é¢˜çš„source ç›®å½•ä¸­åˆ›å»º manifest.json æ–‡ä»¶ã€‚"></a>åœ¨ä¸»é¢˜çš„source ç›®å½•ä¸­åˆ›å»º manifest.json æ–‡ä»¶ã€‚</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;name&quot;: &quot;string&quot;, //åº”ç”¨å…¨ç§°</span><br><span class="line">    &quot;short_name&quot;: &quot;Junzhou&quot;, //åº”ç”¨ç®€ç§°</span><br><span class="line">    &quot;theme_color&quot;: &quot;#49b1f5&quot;, //åŒ¹é…æµè§ˆå™¨çš„åœ°å€æ é¢œè‰²</span><br><span class="line">    &quot;background_color&quot;: &quot;#49b1f5&quot;,//åŠ è½½åº”ç”¨æ—¶çš„èƒŒæ™¯è‰²</span><br><span class="line">    &quot;display&quot;: &quot;standalone&quot;,//é¦–é€‰æ˜¾ç¤ºæ¨¡å¼ å…¶ä»–é€‰é¡¹æœ‰ï¼šfullscreen,minimal-ui,browser</span><br><span class="line">    &quot;scope&quot;: &quot;/&quot;,</span><br><span class="line">    &quot;start_url&quot;: &quot;/&quot;,</span><br><span class="line">    &quot;icons&quot;: [ //è¯¥æ•°ç»„æŒ‡å®šiconså›¾æ ‡å‚æ•°ï¼Œç”¨æ¥æ—¶é€‚é…ä¸åŒè®¾å¤‡ï¼ˆéœ€ä¸ºpngï¼Œè‡³å°‘åŒ…å«ä¸€ä¸ª192px*192pxçš„å›¾æ ‡ï¼‰</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;src&quot;: &quot;images/pwaicons/36.png&quot;, //å›¾æ ‡æ–‡ä»¶çš„ç›®å½•ï¼Œéœ€åœ¨source/ç›®å½•ä¸‹è‡ªè¡Œåˆ›å»ºã€‚</span><br><span class="line">          &quot;sizes&quot;: &quot;36x36&quot;,</span><br><span class="line">          &quot;type&quot;: &quot;image/png&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;src&quot;: &quot;images/pwaicons/48.png&quot;,</span><br><span class="line">          &quot;sizes&quot;: &quot;48x48&quot;,</span><br><span class="line">          &quot;type&quot;: &quot;image/png&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;src&quot;: &quot;images/pwaicons/72.png&quot;,</span><br><span class="line">          &quot;sizes&quot;: &quot;72x72&quot;,</span><br><span class="line">          &quot;type&quot;: &quot;image/png&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;src&quot;: &quot;images/pwaicons/96.png&quot;,</span><br><span class="line">          &quot;sizes&quot;: &quot;96x96&quot;,</span><br><span class="line">          &quot;type&quot;: &quot;image/png&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;src&quot;: &quot;images/pwaicons/144.png&quot;,</span><br><span class="line">          &quot;sizes&quot;: &quot;144x144&quot;,</span><br><span class="line">          &quot;type&quot;: &quot;image/png&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;src&quot;: &quot;images/pwaicons/192.png&quot;,</span><br><span class="line">          &quot;sizes&quot;: &quot;192x192&quot;,</span><br><span class="line">          &quot;type&quot;: &quot;image/png&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;src&quot;: &quot;images/pwaicons/512.png&quot;,</span><br><span class="line">            &quot;sizes&quot;: &quot;512x512&quot;,</span><br><span class="line">            &quot;type&quot;: &quot;image/png&quot;</span><br><span class="line">          &#125;</span><br><span class="line">      ],</span><br><span class="line">      &quot;splash_pages&quot;: null //é…ç½®è‡ªå®šä¹‰å¯åŠ¨åŠ¨ç”»ã€‚</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h4 id="å®‰è£…æ’ä»¶ï¼š"><a href="#å®‰è£…æ’ä»¶ï¼š" class="headerlink" title="å®‰è£…æ’ä»¶ï¼š"></a>å®‰è£…æ’ä»¶ï¼š</h4><p>npm install workbox-build gulp â€“save-dev</p>
<h4 id="åˆ›å»ºgulpfile-jsæ–‡ä»¶ï¼ˆè§ä¸Šæ–‡ï¼‰"><a href="#åˆ›å»ºgulpfile-jsæ–‡ä»¶ï¼ˆè§ä¸Šæ–‡ï¼‰" class="headerlink" title="åˆ›å»ºgulpfile.jsæ–‡ä»¶ï¼ˆè§ä¸Šæ–‡ï¼‰"></a>åˆ›å»ºgulpfile.jsæ–‡ä»¶ï¼ˆè§ä¸Šæ–‡ï¼‰</h4><h4 id="åœ¨-Hexo-çš„æ ¹ç›®å½•ï¼Œåˆ›å»ºä¸€ä¸ª-sw-template-js-æ–‡ä»¶"><a href="#åœ¨-Hexo-çš„æ ¹ç›®å½•ï¼Œåˆ›å»ºä¸€ä¸ª-sw-template-js-æ–‡ä»¶" class="headerlink" title="åœ¨ Hexo çš„æ ¹ç›®å½•ï¼Œåˆ›å»ºä¸€ä¸ª sw-template.js æ–‡ä»¶"></a>åœ¨ Hexo çš„æ ¹ç›®å½•ï¼Œåˆ›å»ºä¸€ä¸ª sw-template.js æ–‡ä»¶</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const workboxVersion = &#x27;5.1.3&#x27;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">importScripts(`https://storage.googleapis.com/workbox-cdn/releases/$&#123;workboxVersion&#125;/workbox-sw.js`);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">workbox.core.setCacheNameDetails(&#123;</span><br><span class="line">    prefix: &quot;your name&quot;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">workbox.core.skipWaiting();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">workbox.core.clientsClaim();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">workbox.precaching.precacheAndRoute(self.__WB_MANIFEST,&#123;</span><br><span class="line">    directoryIndex: null</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">workbox.precaching.cleanupOutdatedCaches();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// Images</span><br><span class="line">workbox.routing.registerRoute(</span><br><span class="line">    /\.(?:png|jpg|jpeg|gif|bmp|webp|svg|ico)$/,</span><br><span class="line">    new workbox.strategies.CacheFirst(&#123;</span><br><span class="line">        cacheName: &quot;images&quot;,</span><br><span class="line">        plugins: [</span><br><span class="line">            new workbox.expiration.ExpirationPlugin(&#123;</span><br><span class="line">                maxEntries: 1000,</span><br><span class="line">                maxAgeSeconds: 60 * 60 * 24 * 30</span><br><span class="line">            &#125;),</span><br><span class="line">            new workbox.cacheableResponse.CacheableResponsePlugin(&#123;</span><br><span class="line">                statuses: [0, 200]</span><br><span class="line">            &#125;)</span><br><span class="line">        ]</span><br><span class="line">    &#125;)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// Fonts</span><br><span class="line">workbox.routing.registerRoute(</span><br><span class="line">    /\.(?:eot|ttf|woff|woff2)$/,</span><br><span class="line">    new workbox.strategies.CacheFirst(&#123;</span><br><span class="line">        cacheName: &quot;fonts&quot;,</span><br><span class="line">        plugins: [</span><br><span class="line">            new workbox.expiration.ExpirationPlugin(&#123;</span><br><span class="line">                maxEntries: 1000,</span><br><span class="line">                maxAgeSeconds: 60 * 60 * 24 * 30</span><br><span class="line">            &#125;),</span><br><span class="line">            new workbox.cacheableResponse.CacheableResponsePlugin(&#123;</span><br><span class="line">                statuses: [0, 200]</span><br><span class="line">            &#125;)</span><br><span class="line">        ]</span><br><span class="line">    &#125;)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// Google Fonts</span><br><span class="line">workbox.routing.registerRoute(</span><br><span class="line">    /^https:\/\/fonts\.googleapis\.com/,</span><br><span class="line">    new workbox.strategies.StaleWhileRevalidate(&#123;</span><br><span class="line">        cacheName: &quot;google-fonts-stylesheets&quot;</span><br><span class="line">    &#125;)</span><br><span class="line">);</span><br><span class="line">workbox.routing.registerRoute(</span><br><span class="line">    /^https:\/\/fonts\.gstatic\.com/,</span><br><span class="line">    new workbox.strategies.CacheFirst(&#123;</span><br><span class="line">        cacheName: &#x27;google-fonts-webfonts&#x27;,</span><br><span class="line">        plugins: [</span><br><span class="line">            new workbox.expiration.ExpirationPlugin(&#123;</span><br><span class="line">                maxEntries: 1000,</span><br><span class="line">                maxAgeSeconds: 60 * 60 * 24 * 30</span><br><span class="line">            &#125;),</span><br><span class="line">            new workbox.cacheableResponse.CacheableResponsePlugin(&#123;</span><br><span class="line">                statuses: [0, 200]</span><br><span class="line">            &#125;)</span><br><span class="line">        ]</span><br><span class="line">    &#125;)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// Static Libraries</span><br><span class="line">workbox.routing.registerRoute(</span><br><span class="line">    /^https:\/\/cdn\.jsdelivr\.net/,</span><br><span class="line">    new workbox.strategies.CacheFirst(&#123;</span><br><span class="line">        cacheName: &quot;static-libs&quot;,</span><br><span class="line">        plugins: [</span><br><span class="line">            new workbox.expiration.ExpirationPlugin(&#123;</span><br><span class="line">                maxEntries: 1000,</span><br><span class="line">                maxAgeSeconds: 60 * 60 * 24 * 30</span><br><span class="line">            &#125;),</span><br><span class="line">            new workbox.cacheableResponse.CacheableResponsePlugin(&#123;</span><br><span class="line">                statuses: [0, 200]</span><br><span class="line">            &#125;)</span><br><span class="line">        ]</span><br><span class="line">    &#125;)</span><br><span class="line">);</span><br><span class="line">workbox.googleAnalytics.initialize();</span><br></pre></td></tr></table></figure>
<h4 id="åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­ï¼Œæ·»åŠ éœ€è¦çš„-css-å’Œ-js"><a href="#åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­ï¼Œæ·»åŠ éœ€è¦çš„-css-å’Œ-js" class="headerlink" title="åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­ï¼Œæ·»åŠ éœ€è¦çš„ css å’Œ js"></a>åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­ï¼Œæ·»åŠ éœ€è¦çš„ css å’Œ js</h4><pre><code>inject:
  head:
    - &#39;&lt;style type=&quot;text/css&quot;&gt;.app-refresh&#123;position:fixed;top:-2.2rem;left:0;right:0;z-index:99999;padding:0 1rem;font-size:15px;height:2.2rem;transition:all .3s ease&#125;.app-refresh-wrap&#123;display:flex;color:#fff;height:100%;align-items:center;justify-content:center&#125;.app-refresh-wrap a&#123;color:#fff;text-decoration:underline;cursor:pointer&#125;&lt;/style&gt;&#39;
  bottom:
    - &#39;&lt;div class=&quot;app-refresh&quot; id=&quot;app-refresh&quot;&gt; &lt;div class=&quot;app-refresh-wrap&quot;&gt; &lt;label&gt;âœ¨ ç½‘ç«™å·²æ›´æ–°æœ€æ–°ç‰ˆæœ¬ ğŸ‘‰&lt;/label&gt; &lt;a href=&quot;javascript:void(0)&quot; onclick=&quot;location.reload()&quot;&gt;ç‚¹å‡»åˆ·æ–°&lt;/a&gt; &lt;/div&gt;&lt;/div&gt;&lt;script&gt;function showNotification()&#123;if(GLOBAL_CONFIG.Snackbar)&#123;var t=&quot;light&quot;===document.documentElement.getAttribute(&quot;data-theme&quot;)?GLOBAL_CONFIG.Snackbar.bgLight:GLOBAL_CONFIG.Snackbar.bgDark,e=GLOBAL_CONFIG.Snackbar.position;Snackbar.show(&#123;text:&quot;å·²æ›´æ–°æœ€æ–°ç‰ˆæœ¬&quot;,backgroundColor:t,duration:5e5,pos:e,actionText:&quot;ç‚¹å‡»åˆ·æ–°&quot;,actionTextColor:&quot;#fff&quot;,onActionClick:function(t)&#123;location.reload()&#125;&#125;)&#125;else&#123;var o=`top: 0; background: $&#123;&quot;light&quot;===document.documentElement.getAttribute(&quot;data-theme&quot;)?&quot;#49b1f5&quot;:&quot;#1f1f1f&quot;&#125;;`;document.getElementById(&quot;app-refresh&quot;).style.cssText=o&#125;&#125;&quot;serviceWorker&quot;in navigator&amp;&amp;(navigator.serviceWorker.controller&amp;&amp;navigator.serviceWorker.addEventListener(&quot;controllerchange&quot;,function()&#123;showNotification()&#125;),window.addEventListener(&quot;load&quot;,function()&#123;navigator.serviceWorker.register(&quot;/sw.js&quot;)&#125;));&lt;/script&gt;&#39;
</code></pre>
<p><strong>é‡ç‚¹ï¼šé…ç½®äº†è¿™äº›ï¼Œå¯èƒ½ä¼šå‡ºç°å¾ˆå¤šé—®é¢˜ï¼Œæœ¬äººå°è¯•åæœ‰å–æ¶ˆäº†è¿™äº›é…ç½®ï¼Œè°¨æ…å¯¹å¾…ï¼Œå­¦ä¹ å­¦ä¹ å°±å¥½</strong>                                                                                                                                               </p>
]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>ä¼˜åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title>JPA</title>
    <url>/2020/08/12/JPA/</url>
    <content><![CDATA[<h3 id="JPAæ˜¯ä»€ä¹ˆ"><a href="#JPAæ˜¯ä»€ä¹ˆ" class="headerlink" title="JPAæ˜¯ä»€ä¹ˆ"></a>JPAæ˜¯ä»€ä¹ˆ</h3><p>JPAï¼ˆJava Persistence APIï¼‰JavaæŒä¹…åŒ–APIã€‚æ˜¯ä¸€å¥—sunå…¬å¸Javaå®˜æ–¹åˆ¶å®šçš„ORMæ–¹æ¡ˆï¼Œæ˜¯è§„èŒƒï¼Œæ˜¯æ ‡å‡†ï¼Œsunå…¬å¸è‡ªå·±å¹¶æ²¡æœ‰å®ç°ã€‚</p>
<p><strong>å…³é”®ç‚¹ï¼šORMï¼Œæ ‡å‡† æ¦‚å¿µ(å…³é”®å­—)</strong></p>
<h3 id="ORMæ˜¯ä»€ä¹ˆ"><a href="#ORMæ˜¯ä»€ä¹ˆ" class="headerlink" title="ORMæ˜¯ä»€ä¹ˆ"></a>ORMæ˜¯ä»€ä¹ˆ</h3><p>ORMï¼ˆObject Relational Mappingï¼‰å¯¹è±¡å…³ç³»æ˜ å°„ã€‚é—®ï¼šORMæœ‰ä»€ä¹ˆç”¨ï¼Ÿåœ¨æ“ä½œæ•°æ®åº“ä¹‹å‰ï¼Œå…ˆæŠŠæ•°æ®è¡¨ä¸å®ä½“ç±»å…³è”èµ·æ¥ã€‚ç„¶åé€šè¿‡å®ä½“ç±»çš„å¯¹è±¡æ“ä½œï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰æ•°æ®åº“è¡¨ï¼Œè¿™ä¸ªå°±æ˜¯ORMçš„è¡Œä¸ºï¼æ‰€ä»¥ï¼šORMæ˜¯ä¸€ä¸ªå®ç°ä½¿ç”¨å¯¹è±¡æ“ä½œæ•°æ®åº“çš„è®¾è®¡æ€æƒ³ï¼é€šè¿‡è¿™å¥è¯ï¼Œæˆ‘ä»¬çŸ¥é“JPAçš„ä½œç”¨å°±æ˜¯é€šè¿‡å¯¹è±¡æ“ä½œæ•°æ®åº“çš„ï¼Œä¸ç”¨ç¼–å†™sqlè¯­å¥ã€‚</p>
<h3 id="JPAçš„å®ç°è€…"><a href="#JPAçš„å®ç°è€…" class="headerlink" title="JPAçš„å®ç°è€…"></a>JPAçš„å®ç°è€…</h3><p>æ—¢ç„¶æˆ‘ä»¬è¯´JPAæ˜¯ä¸€å¥—æ ‡å‡†ï¼Œæ„å‘³ç€ï¼Œå®ƒåªæ˜¯ä¸€å¥—å®ç°ORMç†è®ºçš„æ¥å£ã€‚æ²¡æœ‰å®ç°çš„ä»£ç ã€‚é‚£ä¹ˆæˆ‘ä»¬å¿…é¡»è¦æœ‰å…·ä½“å®ç°è€…æ‰å¯ä»¥å®ŒæˆORMæ“ä½œåŠŸèƒ½çš„å®ç°ï¼ </p>
<p>å¸‚åœºä¸Šä¸»æµçš„JPAæ¡†æ¶ï¼ˆå®ç°è€…ï¼‰æœ‰ï¼šHibernate(JBoss)ã€EclipseTop(Eclipseç¤¾åŒº)ã€OpenJPA(ApacheåŸºé‡‘ä¼š)å…¶ä¸­Hibernateæ˜¯ä¼—å¤šå®ç°è€…ä¹‹ä¸­ï¼Œæ€§èƒ½æœ€å¥½çš„ã€‚</p>
<h3 id="JPAçš„ä½œç”¨æ˜¯ä»€ä¹ˆ"><a href="#JPAçš„ä½œç”¨æ˜¯ä»€ä¹ˆ" class="headerlink" title="JPAçš„ä½œç”¨æ˜¯ä»€ä¹ˆ"></a>JPAçš„ä½œç”¨æ˜¯ä»€ä¹ˆ</h3><p>JPAæ˜¯ORMçš„ä¸€å¥—æ ‡å‡†ï¼Œæ—¢ç„¶JPAä¸ºORMè€Œç”Ÿï¼Œé‚£ä¹ˆJPAçš„ä½œç”¨å°±æ˜¯å®ç°ä½¿ç”¨å¯¹è±¡æ“ä½œæ•°æ®åº“ï¼Œä¸ç”¨å†™SQL</p>
<p>æ•°æ®åº“æ˜¯ç”¨sqlæ“ä½œçš„ï¼Œé‚£ç”¨å¯¹è±¡æ“ä½œï¼Œç”±è°æ¥äº§ç”ŸSQL?</p>
<p>ç­”ï¼šJPAå®ç°æ¡†æ¶</p>
<h3 id="æ ¸å¿ƒæ¦‚å¿µ"><a href="#æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="æ ¸å¿ƒæ¦‚å¿µ"></a>æ ¸å¿ƒæ¦‚å¿µ</h3><ul>
<li><p>å®ä½“ï¼ˆpojoï¼‰è¡¨ç¤ºå…³ç³»æ•°æ®åº“ä¸­çš„ä¸€ä¸ªè¡¨</p>
</li>
<li><p>æ¯ä¸ªå®ä½“å®ä¾‹å¯¹åº”ç€è¯¥è¡¨ä¸­çš„ä¸€è¡Œ</p>
</li>
<li><p>ç±»å¿…é¡»ç”¨javax.persistence.Entityæ³¨è§£</p>
</li>
<li><p>ç±»å¿…é¡»å«æœ‰ä¸€ä¸ªpublicæˆ–è€…protectedçš„æ— å‚æ„é€ å‡½æ•°</p>
</li>
<li><p>å½“å®ä½“å®ä¾‹è¢«å½“åšå€¼ä»¥åˆ†ç¦»å¯¹è±¡çš„æ–¹å¼è¿›è¡Œä¼ é€’ï¼ˆä¾‹å¦‚é€šè¿‡ä¼šè¯beançš„è¿œç¨‹ä¸šåŠ¡æ¥å£ï¼‰åˆ™è¯¥ç±»å¿…é¡»å®ç°Serializableï¼ˆåºåˆ—åŒ–ï¼‰æ¥å£</p>
</li>
<li><p>å”¯ä¸€çš„å¯¹è±¡æ ‡å¿—ç¬¦ï¼Œç®€å•ä¸»é”®ï¼ˆjavax.persistence.Idï¼‰ï¼Œå¤åˆä¸»é”®ï¼ˆjavax.persistence.EmbeddledIdå’Œjavax.persistence.IdClassï¼‰</p>
</li>
</ul>
<h3 id="å…³ç³»"><a href="#å…³ç³»" class="headerlink" title="å…³ç³»"></a>å…³ç³»</h3><ul>
<li><p>ä¸€å¯¹ä¸€ï¼š@OneToOne</p>
</li>
<li><p>ä¸€å¯¹å¤šï¼š@OneToMany</p>
</li>
<li><p>å¤šå¯¹ä¸€ï¼š@ManyToOne</p>
</li>
<li><p>å¤šå¯¹å¤šï¼š@ManyToMany</p>
</li>
</ul>
<h3 id="EntityManager"><a href="#EntityManager" class="headerlink" title="EntityManager"></a>EntityManager</h3><ul>
<li><p>ç®¡ç†å®ä½“çš„ä¸€ä¸ªç±»ï¼Œæ¥å£</p>
</li>
<li><p>å®šä¹‰ä¸æŒä¹…æ€§ä¸Šä¸‹æ–‡è¿›è¡Œäº¤äº’çš„æ–¹æ³•</p>
</li>
<li><p>åˆ›å»ºå’Œåˆ é™¤æŒä¹…å®ä½“ç±»ï¼Œé€šè¿‡å®ä½“çš„ä¸»é”®æŸ¥æ‰¾å®ä½“</p>
</li>
<li><p>å…è®¸åœ¨å®ä½“ç±»ä¸Šè¿›è¡ŒæŸ¥è¯¢</p>
</li>
</ul>
]]></content>
      <categories>
        <category>æ¡†æ¶</category>
      </categories>
      <tags>
        <tag>JPA</tag>
      </tags>
  </entry>
  <entry>
    <title>Markdownå°ç»“</title>
    <url>/2020/08/03/Markdown%E5%B0%8F%E7%BB%93/</url>
    <content><![CDATA[<h4 id="æ ‡é¢˜"><a href="#æ ‡é¢˜" class="headerlink" title="æ ‡é¢˜"></a>æ ‡é¢˜</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># ä¸€çº§æ ‡é¢˜</span><br><span class="line">## äºŒçº§æ ‡é¢˜</span><br><span class="line">### ä¸‰çº§æ ‡é¢˜</span><br><span class="line">#### å››çº§æ ‡é¢˜</span><br><span class="line">##### äº”çº§æ ‡é¢˜</span><br><span class="line">###### å…­çº§æ ‡é¢˜</span><br></pre></td></tr></table></figure>

<h4 id="åŠ ç²—"><a href="#åŠ ç²—" class="headerlink" title="åŠ ç²—"></a>åŠ ç²—</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">**è¿™æ˜¯åŠ ç²—å­—æ®µ**</span><br><span class="line">__è¿™ä¹Ÿæ˜¯åŠ ç²—å­—æ®µ__</span><br></pre></td></tr></table></figure>

<h4 id="æ–œä½“"><a href="#æ–œä½“" class="headerlink" title="æ–œä½“"></a>æ–œä½“</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">*è¿™æ˜¯å€¾æ–œå­—æ®µ*</span><br><span class="line">_è¿™ä¹Ÿæ˜¯å€¾æ–œå­—æ®µ_</span><br></pre></td></tr></table></figure>

<h4 id="åˆæ–œåˆç²—"><a href="#åˆæ–œåˆç²—" class="headerlink" title="åˆæ–œåˆç²—"></a>åˆæ–œåˆç²—</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">***æ–œç²—å­—æ®µ***</span><br></pre></td></tr></table></figure>

<h4 id="é«˜äº®"><a href="#é«˜äº®" class="headerlink" title="é«˜äº®"></a>é«˜äº®</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">==è¿™æ˜¯é«˜äº®å­—æ®µ==</span><br></pre></td></tr></table></figure>

<h4 id="ä¸Šæ ‡"><a href="#ä¸Šæ ‡" class="headerlink" title="ä¸Šæ ‡"></a>ä¸Šæ ‡</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">2^2^</span><br></pre></td></tr></table></figure>

<h4 id="ä¸‹æ ‡"><a href="#ä¸‹æ ‡" class="headerlink" title="ä¸‹æ ‡"></a>ä¸‹æ ‡</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">H~2~o</span><br></pre></td></tr></table></figure>

<h4 id="åˆ é™¤çº¿"><a href="#åˆ é™¤çº¿" class="headerlink" title="åˆ é™¤çº¿"></a>åˆ é™¤çº¿</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">~~åŠ åˆ é™¤çº¿çš„å­—æ®µ~~</span><br></pre></td></tr></table></figure>

<h4 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&gt;+ä¸€ä¸ªç©ºæ ¼+å­—æ®µ</span><br><span class="line">&gt;+äº”ä¸ªç©ºæ ¼+å­—æ®µï¼Œå¼•ç”¨ä»£ç å—</span><br><span class="line">å¯ä»¥åŠ è‹¥å¹²ä¸ª&gt;åµŒå¥—ã€‚å¤šçº§å¼•ç”¨</span><br></pre></td></tr></table></figure>

<h4 id="åˆ†å‰²çº¿"><a href="#åˆ†å‰²çº¿" class="headerlink" title="åˆ†å‰²çº¿"></a>åˆ†å‰²çº¿</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">----</span><br><span class="line">***</span><br><span class="line">****</span><br></pre></td></tr></table></figure>

<h4 id="å›¾ç‰‡"><a href="#å›¾ç‰‡" class="headerlink" title="å›¾ç‰‡"></a>å›¾ç‰‡</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">![å›¾ç‰‡alt](å›¾ç‰‡åœ°å€ &quot;å›¾ç‰‡title&quot;)</span><br><span class="line"></span><br><span class="line">å›¾ç‰‡altå°±æ˜¯æ˜¾ç¤ºåœ¨å›¾ç‰‡ä¸‹é¢çš„æ–‡å­—ï¼Œç›¸å½“äºå¯¹å›¾ç‰‡å†…å®¹çš„è§£é‡Šã€‚</span><br><span class="line">å›¾ç‰‡titleæ˜¯å›¾ç‰‡çš„æ ‡é¢˜ï¼Œå½“é¼ æ ‡ç§»åˆ°å›¾ç‰‡ä¸Šæ—¶æ˜¾ç¤ºçš„å†…å®¹ã€‚titleå¯åŠ å¯ä¸åŠ </span><br></pre></td></tr></table></figure>

<h4 id="è¶…é“¾æ¥"><a href="#è¶…é“¾æ¥" class="headerlink" title="è¶…é“¾æ¥"></a>è¶…é“¾æ¥</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[è¶…é“¾æ¥å](è¶…é“¾æ¥åœ°å€ &quot;è¶…é“¾æ¥title&quot;)</span><br><span class="line">titleå¯åŠ å¯ä¸åŠ </span><br><span class="line">å¦‚æœæƒ³è¦åœ¨æ–°é¡µé¢ä¸­æ‰“å¼€çš„è¯å¯ä»¥ç”¨htmlè¯­è¨€çš„aæ ‡ç­¾ä»£æ›¿ã€‚</span><br><span class="line">&lt;a href=&quot;è¶…é“¾æ¥åœ°å€&quot; target=&quot;_blank&quot;&gt;è¶…é“¾æ¥å&lt;/a&gt;</span><br></pre></td></tr></table></figure>

<h4 id="åˆ—è¡¨"><a href="#åˆ—è¡¨" class="headerlink" title="åˆ—è¡¨"></a>åˆ—è¡¨</h4><h5 id="æ— åºåˆ—è¡¨"><a href="#æ— åºåˆ—è¡¨" class="headerlink" title="æ— åºåˆ—è¡¨"></a>æ— åºåˆ—è¡¨</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">- åˆ—è¡¨å†…å®¹</span><br><span class="line">+ åˆ—è¡¨å†…å®¹</span><br><span class="line">* åˆ—è¡¨å†…å®¹</span><br><span class="line"></span><br><span class="line">æ³¨æ„ï¼š- + * è·Ÿå†…å®¹ä¹‹é—´éƒ½è¦æœ‰ä¸€ä¸ªç©ºæ ¼</span><br></pre></td></tr></table></figure>
<h5 id="æœ‰åºåˆ—è¡¨"><a href="#æœ‰åºåˆ—è¡¨" class="headerlink" title="æœ‰åºåˆ—è¡¨"></a>æœ‰åºåˆ—è¡¨</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. åˆ—è¡¨å†…å®¹</span><br><span class="line">2. åˆ—è¡¨å†…å®¹</span><br><span class="line">3. åˆ—è¡¨å†…å®¹</span><br><span class="line"></span><br><span class="line">æ³¨æ„ï¼šåºå·è·Ÿå†…å®¹ä¹‹é—´è¦æœ‰ç©ºæ ¼</span><br></pre></td></tr></table></figure>
<p>åˆ—è¡¨åµŒå¥—<br>ä¸Šä¸€çº§å’Œä¸‹ä¸€çº§ä¹‹é—´æ•²ä¸‰ä¸ªç©ºæ ¼å³å¯</p>
<h4 id="è¡¨å¤´"><a href="#è¡¨å¤´" class="headerlink" title="è¡¨å¤´"></a>è¡¨å¤´</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¡¨å¤´|è¡¨å¤´|è¡¨å¤´</span><br><span class="line">---|:--:|---:</span><br><span class="line">å†…å®¹|å†…å®¹|å†…å®¹</span><br><span class="line">å†…å®¹|å†…å®¹|å†…å®¹</span><br><span class="line"></span><br><span class="line">ç¬¬äºŒè¡Œåˆ†å‰²è¡¨å¤´å’Œå†…å®¹ã€‚</span><br><span class="line">- æœ‰ä¸€ä¸ªå°±è¡Œï¼Œä¸ºäº†å¯¹é½ï¼Œå¤šåŠ äº†å‡ ä¸ª</span><br><span class="line">æ–‡å­—é»˜è®¤å±…å·¦</span><br><span class="line">-ä¸¤è¾¹åŠ ï¼šè¡¨ç¤ºæ–‡å­—å±…ä¸­</span><br><span class="line">-å³è¾¹åŠ ï¼šè¡¨ç¤ºæ–‡å­—å±…å³</span><br></pre></td></tr></table></figure>

<h4 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h4><p>å•è¡Œä»£ç </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">\`ä»£ç å†…å®¹\`</span><br></pre></td></tr></table></figure>
<p>ä»£ç å—</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">\`\`\`</span><br><span class="line">  ä»£ç ...</span><br><span class="line">  ä»£ç ...</span><br><span class="line">  ä»£ç ...</span><br><span class="line">\`\`\`</span><br></pre></td></tr></table></figure>
<p>(ä½¿ç”¨æ—¶ åæ–œæ å»æ‰)</p>
<h4 id="æµç¨‹å›¾"><a href="#æµç¨‹å›¾" class="headerlink" title="æµç¨‹å›¾"></a>æµç¨‹å›¾</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">st=&gt;start: å¼€å§‹</span><br><span class="line">op=&gt;operation: My Operation</span><br><span class="line">cond=&gt;condition: Yes or No?</span><br><span class="line">e=&gt;end</span><br><span class="line">st-&gt;op-&gt;cond</span><br><span class="line">cond(yes)-&gt;e</span><br><span class="line">cond(no)-&gt;op</span><br></pre></td></tr></table></figure>

<h4 id="æ•°å­¦å…¬å¼"><a href="#æ•°å­¦å…¬å¼" class="headerlink" title="æ•°å­¦å…¬å¼"></a>æ•°å­¦å…¬å¼</h4><p>è¡Œå†…åµŒ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$\sum_&#123;i=1&#125;^&#123;10&#125;f(i)\,\,\text&#123;thanks&#125;$</span><br></pre></td></tr></table></figure>
<p>å—çŠ¶</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$$</span><br><span class="line">\sum_&#123;i=1&#125;^&#123;10&#125;f(i)\,\,\text&#123;thanks&#125;</span><br><span class="line">$$</span><br></pre></td></tr></table></figure>

<h4 id="è„šæ³¨"><a href="#è„šæ³¨" class="headerlink" title="è„šæ³¨"></a>è„šæ³¨</h4><p>è„šæ³¨å’Œæ³¨è„šä¸€æ ·å—ï¼Œå¥½åƒæ²¡åŒºåˆ«<br>ç¡®ä¿ [-] é‡Œé¢çš„å†…å®¹ä¸åº•éƒ¨çš„ä¸€è‡´å³å¯ï¼Œå¯ä»¥æ˜¯ä¸­æ–‡</p>
<h4 id="é”šç‚¹"><a href="#é”šç‚¹" class="headerlink" title="é”šç‚¹"></a>é”šç‚¹</h4><p>jump å¯ä»¥ç”¨å…¶ä»–å­—ç¬¦æˆ–å­—ç¬¦ä¸²ä»£æ›¿ï¼Œid ä¸€è‡´å³å¯<br>æ•ˆæœä¸è„šæ³¨ç±»ä¼¼ï¼Œå¯ä»¥è·³è½¬ä¹‹æ–‡ä¸­ä»»æ„ä½ç½®</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[è¯´æ˜æ–‡å­—](#jump)</span><br><span class="line">&lt;span id=&quot;jump&quot;&gt;</span><br></pre></td></tr></table></figure>

<h4 id="åæ–œæ "><a href="#åæ–œæ " class="headerlink" title="åæ–œæ "></a>åæ–œæ </h4><p>Markdown å¯ä»¥åˆ©ç”¨åæ–œæ æ¥æ’å…¥ä¸€äº›åœ¨è¯­æ³•ä¸­æœ‰å…¶å®ƒæ„ä¹‰çš„ç¬¦å·<br>ä¾‹å¦‚ï¼šä½ æƒ³è¦ç”¨æ˜Ÿå·åŠ åœ¨æ–‡å­—æ—è¾¹çš„æ–¹å¼æ¥åšå‡ºå¼ºè°ƒæ•ˆæœï¼ˆä¸ºäº†é¿å…å†²çªï¼‰<br>ä½ å¯ä»¥åœ¨æ˜Ÿå·çš„å‰é¢åŠ ä¸Šåæ–œæ ï¼Œå¦‚æœä¸åŠ  \ï¼Œ# åå°±ä¼šå˜ä¸ºä¸€çº§æ ‡é¢˜<br>Markdown æ”¯æŒä»¥ä¸‹è¿™äº›ç¬¦å·å‰é¢åŠ ä¸Šåæ–œæ æ¥å¸®åŠ©æ’å…¥æ™®é€šçš„ç¬¦å·</p>
<h4 id="è½¬ä¹‰ç®­å¤´"><a href="#è½¬ä¹‰ç®­å¤´" class="headerlink" title="è½¬ä¹‰ç®­å¤´"></a>è½¬ä¹‰ç®­å¤´</h4><p>\to æˆ– \rightarrow ä¸å‰é¢æ— ç©ºæ ¼<br>æ³¨æ„åé¢æœ‰ç©ºæ ¼ï¼<br>ä¹‹é—´è‹¥æƒ³ç©ºæ ¼ï¼Œç”¨ \ åŠ ç©ºæ ¼è¡¨ç¤º</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$A\to B$</span><br><span class="line">$C\rightarrow D$</span><br><span class="line">$C\Rightarrow D$</span><br><span class="line">$E\longrightarrow F$</span><br><span class="line">$A\Longleftrightarrow B$</span><br><span class="line">$A\xrightarrow&#123;\ \ \ \ 20km\quad&#125; B$</span><br><span class="line">$Beijin\xrightarrow&#123;10991km)\quad&#125; New York$</span><br></pre></td></tr></table></figure>

<h4 id="è¡¨æ ¼"><a href="#è¡¨æ ¼" class="headerlink" title="è¡¨æ ¼"></a>è¡¨æ ¼</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å±…å·¦ï¼š:----</span><br><span class="line">å±…ä¸­ï¼š:----:æˆ–-----</span><br><span class="line">å±…å³ï¼š----:</span><br><span class="line"></span><br><span class="line">|æ ‡é¢˜|æ ‡é¢˜|æ ‡é¢˜|</span><br><span class="line">|:---|:---:|---:|</span><br><span class="line">|å±…å·¦æµ‹è¯•|å±…ä¸­æµ‹è¯•|å±…å³æµ‹è¯•|</span><br><span class="line">|å±…å·¦æµ‹è¯•1|å±…ä¸­æµ‹è¯•1|å±…å³æµ‹è¯•1|</span><br><span class="line">|å±…å·¦æµ‹è¯•2|å±…ä¸­æµ‹è¯•2|å±…å³æµ‹è¯•2|</span><br><span class="line">|å±…å·¦æµ‹è¯•3|å±…ä¸­æµ‹è¯•3|å±…å³æµ‹è¯•3|</span><br><span class="line"></span><br><span class="line">ä¸ºäº†æ•ˆæœï¼Œæˆ‘åªèƒ½ç”¨HTMLå¼ºåˆ¶æ¸²æŸ“äº†</span><br><span class="line">|æ ‡é¢˜|æ ‡é¢˜|æ ‡é¢˜|</span><br><span class="line">|:---|:---:|---:|</span><br><span class="line">|å±…å·¦æµ‹è¯•|&lt;center&gt;å±…ä¸­æµ‹è¯•&lt;/center&gt;|&lt;p align=&quot;right&quot;&gt;å±…å³æµ‹è¯•&lt;/p&gt;|</span><br><span class="line">|å±…å·¦æµ‹è¯•1|&lt;center&gt;å±…ä¸­æµ‹è¯•1&lt;/center&gt;|&lt;p align=&quot;right&quot;&gt;å±…å³æµ‹è¯•1&lt;/p&gt;|</span><br><span class="line">|å±…å·¦æµ‹è¯•2|&lt;center&gt;å±…ä¸­æµ‹è¯•2&lt;/center&gt;|&lt;p align=&quot;right&quot;&gt;å±…å³æµ‹è¯•2&lt;/p&gt;|</span><br><span class="line">|å±…å·¦æµ‹è¯•3|&lt;center&gt;å±…ä¸­æµ‹è¯•3&lt;/center&gt;|&lt;p align=&quot;right&quot;&gt;å±…å³æµ‹è¯•3&lt;/p&gt;|</span><br></pre></td></tr></table></figure>

<h4 id="ä»»åŠ¡åˆ—è¡¨"><a href="#ä»»åŠ¡åˆ—è¡¨" class="headerlink" title="ä»»åŠ¡åˆ—è¡¨"></a>ä»»åŠ¡åˆ—è¡¨</h4><p>ä»»åŠ¡åˆ—è¡¨å³å¾…åŠäº‹é¡¹ï¼Œè¡¨ç°ä¸º æ–¹æ¡† ä¸ é’©</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">- [x] æ—©é¤ï¼ˆå·²å®Œæˆï¼‰</span><br><span class="line">- [ ] å–æ°´</span><br><span class="line">- [ ] å­¦ä¹ </span><br></pre></td></tr></table></figure>
<p>æ•ˆæœï¼š</p>
<ul>
<li><input checked disabled type="checkbox"> æ—©é¤ï¼ˆå·²å®Œæˆï¼‰</li>
<li><input disabled type="checkbox"> å–æ°´</li>
<li><input disabled type="checkbox"> å­¦ä¹ </li>
</ul>
<p>åŸºç¡€markdownè¯­æ³•å‚è€ƒï¼š<a href="https://www.appinn.com/markdown/">https://www.appinn.com/markdown/</a><br>æ’å…¥æ•°å­¦å…¬å¼markdownè¯­æ³•å‚è€ƒï¼š<a href="https://www.zybuluo.com/codeep/note/163962">https://www.zybuluo.com/codeep/note/163962</a></p>
]]></content>
      <categories>
        <category>å·¥å…·</category>
      </categories>
      <tags>
        <tag>Markdown</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringMVC</title>
    <url>/2020/11/30/SpringMVC/</url>
    <content><![CDATA[<h3 id="ä»€ä¹ˆæ˜¯Spring-MVCï¼Ÿç®€å•ä»‹ç»ä¸‹ä½ å¯¹Spring-MVCçš„ç†è§£ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯Spring-MVCï¼Ÿç®€å•ä»‹ç»ä¸‹ä½ å¯¹Spring-MVCçš„ç†è§£ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯Spring MVCï¼Ÿç®€å•ä»‹ç»ä¸‹ä½ å¯¹Spring MVCçš„ç†è§£ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯Spring MVCï¼Ÿç®€å•ä»‹ç»ä¸‹ä½ å¯¹Spring MVCçš„ç†è§£ï¼Ÿ</h3><p>Spring MVCæ˜¯ä¸€ä¸ªåŸºäºJavaçš„å®ç°äº†MVCè®¾è®¡æ¨¡å¼çš„è¯·æ±‚é©±åŠ¨ç±»å‹çš„è½»é‡çº§Webæ¡†æ¶ï¼Œé€šè¿‡æŠŠæ¨¡å‹-è§†å›¾-æ§åˆ¶å™¨åˆ†ç¦»ï¼Œå°†webå±‚è¿›è¡ŒèŒè´£è§£è€¦ï¼ŒæŠŠå¤æ‚çš„webåº”ç”¨åˆ†æˆé€»è¾‘æ¸…æ™°çš„å‡ éƒ¨åˆ†ï¼Œç®€åŒ–å¼€å‘ï¼Œå‡å°‘å‡ºé”™ï¼Œæ–¹ä¾¿ç»„å†…å¼€å‘äººå‘˜ä¹‹é—´çš„è€¦åˆã€‚</p>
<h3 id="Spring-MVCçš„ä¼˜ç‚¹"><a href="#Spring-MVCçš„ä¼˜ç‚¹" class="headerlink" title="Spring MVCçš„ä¼˜ç‚¹"></a>Spring MVCçš„ä¼˜ç‚¹</h3><ul>
<li>å¯ä»¥æ”¯æŒå„ç§è§†å›¾æŠ€æœ¯ï¼Œè€Œä¸ä»…ä»…å±€é™äºJSP</li>
<li>ä¸Springæ¡†æ¶é›†æˆï¼ˆå¦‚IoCå®¹å™¨ã€AOPç­‰ï¼‰</li>
<li>æ¸…æ™°çš„è§’è‰²åˆ†é…ï¼šå‰ç«¯æ§åˆ¶å™¨ï¼ˆdispatcherServletï¼‰ï¼Œè¯·æ±‚åˆ°å¤„ç†å™¨æ˜ å°„ï¼ˆhandleMappingï¼‰ï¼Œå¤„ç†å™¨é€‚é…å™¨ï¼ˆHandlerAdapterï¼‰ï¼Œè§†å›¾è§£æå™¨ï¼ˆViewResolverï¼‰ã€‚</li>
<li>æ”¯æŒå„ç§è¯·æ±‚èµ„æºçš„æ˜ å°„ç­–ç•¥</li>
</ul>
<h3 id="Spring-MVCçš„ä¸»è¦ç»„ä»¶ï¼Ÿ"><a href="#Spring-MVCçš„ä¸»è¦ç»„ä»¶ï¼Ÿ" class="headerlink" title="Spring MVCçš„ä¸»è¦ç»„ä»¶ï¼Ÿ"></a>Spring MVCçš„ä¸»è¦ç»„ä»¶ï¼Ÿ</h3><ol>
<li>å‰ç«¯æ§åˆ¶å™¨DispatcherServletï¼ˆä¸éœ€è¦ç¨‹åºå‘˜å¼€å‘ï¼‰<br>ä½œç”¨ï¼šæ¥æ”¶è¯·æ±‚ã€ç›¸åº”ç»“æœï¼Œç›¸å½“äºè½¬å‘å™¨ï¼Œæœ‰äº†DispatcherServletå°±å‡å°‘äº†å…¶å®ƒç»„ä»¶ä¹‹é—´çš„è€¦åˆåº¦</li>
<li>å¤„ç†å™¨æ˜ å°„å™¨HandlerMappingï¼ˆä¸éœ€è¦ç¨‹åºå‘˜å¼€å‘ï¼‰<br>ä½œç”¨ï¼šæ ¹æ®è¯·æ±‚çš„URLæ¥æŸ¥æ‰¾Handler</li>
<li>å¤„ç†å™¨é€‚é…å™¨HandlerAdapter<br>æ³¨æ„ï¼šåœ¨ç¼–å†™Handlerçš„æ—¶å€™è¦æŒ‰ç…§HandlerAdapterè¦æ±‚çš„è§„åˆ™å»ç¼–å†™ï¼Œè¿™æ ·é€‚é…å™¨HandlerAdapteræ‰å¯ä»¥æ­£ç¡®çš„å»æ‰§è¡ŒHandlerã€‚</li>
<li>å¤„ç†å™¨Handlerï¼ˆéœ€è¦ç¨‹åºå‘˜å¼€å‘ï¼‰</li>
<li>è§†å›¾è§£æå™¨ViewResolverï¼ˆä¸éœ€è¦ç¨‹åºå‘˜å¼€å‘ï¼‰<br>ä½œç”¨ï¼šè¿›è¡Œè§†å›¾çš„è§£æï¼Œæ ¹æ®è§†å›¾é€»è¾‘åè§£ææˆçœŸæ­£çš„è§†å›¾ï¼ˆviewï¼‰</li>
<li>è§†å›¾Viewï¼ˆéœ€è¦ç¨‹åºå‘˜å¼€å‘jspï¼‰<br>Viewæ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®ƒçš„å®ç°ç±»æ”¯æŒä¸åŒçš„è§†å›¾ç±»å‹ï¼ˆjsp, freemarker, pdfç­‰ç­‰ï¼‰</li>
</ol>
<h3 id="ä»€ä¹ˆæ˜¯DispatcherServlet"><a href="#ä»€ä¹ˆæ˜¯DispatcherServlet" class="headerlink" title="ä»€ä¹ˆæ˜¯DispatcherServlet"></a>ä»€ä¹ˆæ˜¯DispatcherServlet</h3><p>Springçš„MVCæ¡†æ¶æ˜¯å›´ç»•DispatcherServletæ¥è®¾è®¡çš„ï¼Œå®ƒç”¨æ¥å¤„ç†æ‰€æœ‰çš„HTTPè¯·æ±‚å’Œç›¸åº”ã€‚</p>
<h3 id="ä»€ä¹ˆæ˜¯Spring-MVCæ¡†æ¶çš„æ§åˆ¶å™¨ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯Spring-MVCæ¡†æ¶çš„æ§åˆ¶å™¨ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯Spring MVCæ¡†æ¶çš„æ§åˆ¶å™¨ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯Spring MVCæ¡†æ¶çš„æ§åˆ¶å™¨ï¼Ÿ</h3><p>æ§åˆ¶å™¨æä¾›ä¸€ä¸ªè®¿é—®åº”ç”¨ç¨‹åºçš„è¡Œä¸ºï¼Œæ­¤è¡Œä¸ºé€šå¸¸é€šè¿‡æœåŠ¡æ¥å£å®ç°ã€‚æ§åˆ¶å™¨è§£æç”¨æˆ·è¾“å…¥å¹¶å°†å…¶è½¬æ¢ä¸ºä¸€ä¸ªç”±è§†å›¾å‘ˆç°ç»™ç”¨æˆ·çš„æ¨¡å‹ã€‚Springç”¨ä¸€ä¸ªéå¸¸æŠ½è±¡çš„æ–¹å¼å®ç°äº†ä¸€ä¸ªæ§åˆ¶å±‚ï¼Œå…è®¸ç”¨æˆ·åˆ›å»ºå¤šç§ç”¨é€”çš„æ§åˆ¶å™¨ã€‚</p>
<h3 id="Spring-MVCçš„æ§åˆ¶å™¨æ˜¯ä¸æ˜¯å•ä¾‹æ¨¡å¼ï¼Œå¦‚æœæ˜¯-æœ‰ä»€ä¹ˆé—®é¢˜-æ€ä¹ˆè§£å†³ï¼Ÿ"><a href="#Spring-MVCçš„æ§åˆ¶å™¨æ˜¯ä¸æ˜¯å•ä¾‹æ¨¡å¼ï¼Œå¦‚æœæ˜¯-æœ‰ä»€ä¹ˆé—®é¢˜-æ€ä¹ˆè§£å†³ï¼Ÿ" class="headerlink" title="Spring MVCçš„æ§åˆ¶å™¨æ˜¯ä¸æ˜¯å•ä¾‹æ¨¡å¼ï¼Œå¦‚æœæ˜¯ æœ‰ä»€ä¹ˆé—®é¢˜ æ€ä¹ˆè§£å†³ï¼Ÿ"></a>Spring MVCçš„æ§åˆ¶å™¨æ˜¯ä¸æ˜¯å•ä¾‹æ¨¡å¼ï¼Œå¦‚æœæ˜¯ æœ‰ä»€ä¹ˆé—®é¢˜ æ€ä¹ˆè§£å†³ï¼Ÿ</h3><p>æ˜¯å•ä¾‹æ¨¡å¼ï¼Œæ‰€ä»¥åœ¨å¤šçº¿ç¨‹è®¿é—®çš„æ—¶å€™æœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œä¸è¦ç”¨åŒæ­¥ï¼Œä¼šå½±å“æ€§èƒ½çš„ï¼Œè§£å†³æ–¹æ¡ˆæ˜¯åœ¨æ§åˆ¶å™¨é‡Œé¢ä¸èƒ½å†™å­—æ®µã€‚</p>
<h3 id="è¯·æè¿°Spring-MVCçš„å·¥ä½œæµç¨‹ï¼Ÿæè¿°ä¸€ä¸‹DispatcherServletçš„å·¥ä½œæµç¨‹ï¼Ÿ"><a href="#è¯·æè¿°Spring-MVCçš„å·¥ä½œæµç¨‹ï¼Ÿæè¿°ä¸€ä¸‹DispatcherServletçš„å·¥ä½œæµç¨‹ï¼Ÿ" class="headerlink" title="è¯·æè¿°Spring MVCçš„å·¥ä½œæµç¨‹ï¼Ÿæè¿°ä¸€ä¸‹DispatcherServletçš„å·¥ä½œæµç¨‹ï¼Ÿ"></a>è¯·æè¿°Spring MVCçš„å·¥ä½œæµç¨‹ï¼Ÿæè¿°ä¸€ä¸‹DispatcherServletçš„å·¥ä½œæµç¨‹ï¼Ÿ</h3><ol>
<li>ç”¨æˆ·å‘é€è¯·æ±‚è‡³å‰ç«¯æ§åˆ¶å™¨DispatcherServletï¼›</li>
<li>DispatcherServletæ”¶åˆ°è¯·æ±‚åï¼Œè°ƒç”¨HandlerMappingå¤„ç†å™¨æ˜ å°„å™¨ï¼Œè¯·æ±‚è·å–Handleï¼›</li>
<li>å¤„ç†å™¨æ˜ å°„å™¨æ ¹æ®è¯·æ±‚urlæ‰¾åˆ°å…·ä½“çš„å¤„ç†å™¨ï¼Œç”Ÿæˆå¤„ç†å™¨å¯¹è±¡åŠå¤„ç†å™¨æ‹¦æˆªå™¨(å¦‚æœæœ‰åˆ™ç”Ÿæˆ)ä¸€å¹¶è¿”å›ç»™DispatcherServletï¼›</li>
<li>DispatcherServlet è°ƒç”¨ HandlerAdapterå¤„ç†å™¨é€‚é…å™¨ï¼›</li>
<li>HandlerAdapter ç»è¿‡é€‚é…è°ƒç”¨ å…·ä½“å¤„ç†å™¨(Handlerï¼Œä¹Ÿå«åç«¯æ§åˆ¶å™¨)ï¼›</li>
<li>Handleræ‰§è¡Œå®Œæˆè¿”å›ModelAndViewï¼›</li>
<li>HandlerAdapterå°†Handleræ‰§è¡Œç»“æœModelAndViewè¿”å›ç»™DispatcherServletï¼›</li>
<li>DispatcherServletå°†ModelAndViewä¼ ç»™ViewResolverè§†å›¾è§£æå™¨è¿›è¡Œè§£æï¼›</li>
<li>ViewResolverè§£æåè¿”å›å…·ä½“Viewï¼›</li>
<li>DispatcherServletå¯¹Viewè¿›è¡Œæ¸²æŸ“è§†å›¾ï¼ˆå³å°†æ¨¡å‹æ•°æ®å¡«å……è‡³è§†å›¾ä¸­ï¼‰</li>
<li>DispatcherServletå“åº”ç”¨æˆ·ã€‚ <img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/11/30/SpringMVC/content1.png" class title="content1"></li>
</ol>
<h3 id="MVCæ˜¯ä»€ä¹ˆï¼ŸMVCè®¾è®¡æ¨¡å¼çš„å¥½å¤„æœ‰å“ªäº›ï¼Ÿ"><a href="#MVCæ˜¯ä»€ä¹ˆï¼ŸMVCè®¾è®¡æ¨¡å¼çš„å¥½å¤„æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="MVCæ˜¯ä»€ä¹ˆï¼ŸMVCè®¾è®¡æ¨¡å¼çš„å¥½å¤„æœ‰å“ªäº›ï¼Ÿ"></a>MVCæ˜¯ä»€ä¹ˆï¼ŸMVCè®¾è®¡æ¨¡å¼çš„å¥½å¤„æœ‰å“ªäº›ï¼Ÿ</h3><p>mvcæ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼ˆè®¾è®¡æ¨¡å¼å°±æ˜¯æ—¥å¸¸å¼€å‘ä¸­ç¼–å†™ä»£ç çš„ä¸€ç§å¥½çš„æ–¹æ³•å’Œç»éªŒçš„æ€»ç»“ï¼‰ã€‚<br>æ¨¡å‹ï¼ˆmodelï¼‰- è§†å›¾ï¼ˆviewï¼‰- æ§åˆ¶å™¨ï¼ˆcontrollerï¼‰ï¼Œä¸‰å±‚æ¶æ„çš„è®¾è®¡æ¨¡å¼ã€‚ç”¨äºå®ç°å‰ç«¯é¡µé¢çš„å±•ç°ä¸åç«¯ä¸šåŠ¡æ•°æ®å¤„ç†çš„åˆ†ç¦»ã€‚<br>mvcè®¾è®¡æ¨¡å¼çš„å¥½å¤„ï¼š</p>
<ol>
<li>åˆ†å±‚è®¾è®¡ï¼Œå®ç°äº†ä¸šåŠ¡ç³»ç»Ÿå„ä¸ªç»„ä»¶ä¹‹é—´çš„è§£è€¦ï¼Œæœ‰åˆ©äºä¸šåŠ¡ç³»ç»Ÿçš„å¯æ‰©å±•æ€§ï¼Œå¯ç»´æŠ¤æ€§ã€‚</li>
<li>æœ‰åˆ©äºç³»ç»Ÿçš„å¹¶è¡Œå¼€å‘ï¼Œæå‡å¼€å‘æ•ˆç‡ã€‚</li>
</ol>
<h3 id="æ³¨è§£åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#æ³¨è§£åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="æ³¨è§£åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"></a>æ³¨è§£åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>æ³¨è§£æœ¬è´¨æ˜¯ä¸€ä¸ªç»§æ‰¿äº†Annotationçš„ç‰¹æ®Šæ¥å£ï¼Œå…¶å…·ä½“å®ç°ç±»æ˜¯Javaè¿è¡Œæ—¶ç”Ÿæˆçš„åŠ¨æ€ä»£ç†ç±»ã€‚æˆ‘ä»¬é€šè¿‡åå°„è·å–æ³¨è§£æ—¶ï¼Œè¿”å›çš„æ˜¯Javaè¿è¡Œæ—¶ç”Ÿæˆçš„åŠ¨æ€ä»£ç†å¯¹è±¡ã€‚é€šè¿‡ä»£ç†å¯¹è±¡è°ƒç”¨è‡ªå®šä¹‰æ³¨è§£çš„æ–¹æ³•ï¼Œä¼šæœ€ç»ˆè°ƒç”¨AnnotationInvocationHandlerçš„invokeæ–¹æ³•ã€‚è¯¥æ–¹æ³•ä¼šä»memberValuesè¿™ä¸ªMapä¸­ç´¢å¼•å‡ºå¯¹åº”çš„å€¼ã€‚è€ŒmemberValuesçš„æ¥æºæ˜¯Javaå¸¸é‡æ± ã€‚</p>
<h3 id="Spring-MVCå¸¸ç”¨çš„æ³¨è§£æœ‰å“ªäº›ï¼Ÿ"><a href="#Spring-MVCå¸¸ç”¨çš„æ³¨è§£æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="Spring MVCå¸¸ç”¨çš„æ³¨è§£æœ‰å“ªäº›ï¼Ÿ"></a>Spring MVCå¸¸ç”¨çš„æ³¨è§£æœ‰å“ªäº›ï¼Ÿ</h3><p>@RequestMappingï¼šç”¨äºå¤„ç†è¯·æ±‚ url æ˜ å°„çš„æ³¨è§£ï¼Œå¯ç”¨äºç±»æˆ–æ–¹æ³•ä¸Šã€‚ç”¨äºç±»ä¸Šï¼Œåˆ™è¡¨ç¤ºç±»ä¸­çš„æ‰€æœ‰å“åº”è¯·æ±‚çš„æ–¹æ³•éƒ½æ˜¯ä»¥è¯¥åœ°å€ä½œä¸ºçˆ¶è·¯å¾„ã€‚<br>@RequestBodyï¼šæ³¨è§£å®ç°æ¥æ”¶httpè¯·æ±‚çš„jsonæ•°æ®ï¼Œå°†jsonè½¬æ¢ä¸ºjavaå¯¹è±¡ã€‚<br>@ResponseBodyï¼šæ³¨è§£å®ç°å°†conreolleræ–¹æ³•è¿”å›å¯¹è±¡è½¬åŒ–ä¸ºjsonå¯¹è±¡å“åº”ç»™å®¢æˆ·ã€‚</p>
<h3 id="Spring-MVCä¸­çš„æ§åˆ¶å™¨çš„æ³¨è§£ä¸€èˆ¬ç”¨å“ªä¸ªï¼Œæœ‰æ²¡æœ‰åˆ«çš„æ³¨è§£å¯ä»¥æ›¿ä»£ï¼Ÿ"><a href="#Spring-MVCä¸­çš„æ§åˆ¶å™¨çš„æ³¨è§£ä¸€èˆ¬ç”¨å“ªä¸ªï¼Œæœ‰æ²¡æœ‰åˆ«çš„æ³¨è§£å¯ä»¥æ›¿ä»£ï¼Ÿ" class="headerlink" title="Spring MVCä¸­çš„æ§åˆ¶å™¨çš„æ³¨è§£ä¸€èˆ¬ç”¨å“ªä¸ªï¼Œæœ‰æ²¡æœ‰åˆ«çš„æ³¨è§£å¯ä»¥æ›¿ä»£ï¼Ÿ"></a>Spring MVCä¸­çš„æ§åˆ¶å™¨çš„æ³¨è§£ä¸€èˆ¬ç”¨å“ªä¸ªï¼Œæœ‰æ²¡æœ‰åˆ«çš„æ³¨è§£å¯ä»¥æ›¿ä»£ï¼Ÿ</h3><p>ä¸€èˆ¬ç”¨@Controlleræ³¨è§£ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨@RestControllerï¼Œ@RestControlleræ³¨è§£ç›¸å½“äº@ResponseBody + @Controllerï¼Œè¡¨ç¤ºæ˜¯è¡¨ç°å±‚ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œä¸€èˆ¬ä¸ç”¨åˆ«çš„æ³¨è§£ä»£æ›¿ã€‚</p>
<h3 id="Controlleræ³¨è§£çš„ä½œç”¨"><a href="#Controlleræ³¨è§£çš„ä½œç”¨" class="headerlink" title="@Controlleræ³¨è§£çš„ä½œç”¨"></a>@Controlleræ³¨è§£çš„ä½œç”¨</h3><p>åœ¨Spring MVC ä¸­ï¼Œæ§åˆ¶å™¨Controller è´Ÿè´£å¤„ç†ç”±DispatcherServlet åˆ†å‘çš„è¯·æ±‚ï¼Œå®ƒæŠŠç”¨æˆ·è¯·æ±‚çš„æ•°æ®ç»è¿‡ä¸šåŠ¡å¤„ç†å±‚å¤„ç†ä¹‹åå°è£…æˆä¸€ä¸ªModel ï¼Œç„¶åå†æŠŠè¯¥Model è¿”å›ç»™å¯¹åº”çš„View è¿›è¡Œå±•ç¤ºã€‚åœ¨Spring MVC ä¸­æä¾›äº†ä¸€ä¸ªéå¸¸ç®€ä¾¿çš„å®šä¹‰Controller çš„æ–¹æ³•ï¼Œä½ æ— éœ€ç»§æ‰¿ç‰¹å®šçš„ç±»æˆ–å®ç°ç‰¹å®šçš„æ¥å£ï¼Œåªéœ€ä½¿ç”¨@Controller æ ‡è®°ä¸€ä¸ªç±»æ˜¯Controller ï¼Œç„¶åä½¿ç”¨@RequestMapping å’Œ@RequestParam ç­‰ä¸€äº›æ³¨è§£ç”¨ä»¥å®šä¹‰URL è¯·æ±‚å’ŒController æ–¹æ³•ä¹‹é—´çš„æ˜ å°„ï¼Œè¿™æ ·çš„Controller å°±èƒ½è¢«å¤–ç•Œè®¿é—®åˆ°ã€‚æ­¤å¤–Controller ä¸ä¼šç›´æ¥ä¾èµ–äºHttpServletRequest å’ŒHttpServletResponse ç­‰HttpServlet å¯¹è±¡ï¼Œå®ƒä»¬å¯ä»¥é€šè¿‡Controller çš„æ–¹æ³•å‚æ•°çµæ´»çš„è·å–åˆ°ã€‚</p>
<p>@Controller ç”¨äºæ ‡è®°åœ¨ä¸€ä¸ªç±»ä¸Šï¼Œä½¿ç”¨å®ƒæ ‡è®°çš„ç±»å°±æ˜¯ä¸€ä¸ªSpring MVC Controller å¯¹è±¡ã€‚åˆ†å‘å¤„ç†å™¨å°†ä¼šæ‰«æä½¿ç”¨äº†è¯¥æ³¨è§£çš„ç±»çš„æ–¹æ³•ï¼Œå¹¶æ£€æµ‹è¯¥æ–¹æ³•æ˜¯å¦ä½¿ç”¨äº†@RequestMapping æ³¨è§£ã€‚@Controller åªæ˜¯å®šä¹‰äº†ä¸€ä¸ªæ§åˆ¶å™¨ç±»ï¼Œè€Œä½¿ç”¨@RequestMapping æ³¨è§£çš„æ–¹æ³•æ‰æ˜¯çœŸæ­£å¤„ç†è¯·æ±‚çš„å¤„ç†å™¨ã€‚å•å•ä½¿ç”¨@Controller æ ‡è®°åœ¨ä¸€ä¸ªç±»ä¸Šè¿˜ä¸èƒ½çœŸæ­£æ„ä¹‰ä¸Šçš„è¯´å®ƒå°±æ˜¯Spring MVC çš„ä¸€ä¸ªæ§åˆ¶å™¨ç±»ï¼Œå› ä¸ºè¿™ä¸ªæ—¶å€™Spring è¿˜ä¸è®¤è¯†å®ƒã€‚é‚£ä¹ˆè¦å¦‚ä½•åšSpring æ‰èƒ½è®¤è¯†å®ƒå‘¢ï¼Ÿè¿™ä¸ªæ—¶å€™å°±éœ€è¦æˆ‘ä»¬æŠŠè¿™ä¸ªæ§åˆ¶å™¨ç±»äº¤ç»™Spring æ¥ç®¡ç†ã€‚æœ‰ä¸¤ç§æ–¹å¼ï¼š</p>
<ul>
<li>åœ¨Spring MVC çš„é…ç½®æ–‡ä»¶ä¸­å®šä¹‰MyController çš„bean å¯¹è±¡ã€‚</li>
<li>åœ¨Spring MVC çš„é…ç½®æ–‡ä»¶ä¸­å‘Šè¯‰Spring è¯¥åˆ°å“ªé‡Œå»æ‰¾æ ‡è®°ä¸º@Controller çš„Controller æ§åˆ¶å™¨ã€‚</li>
</ul>
<h3 id="RequestMappingæ³¨è§£çš„ä½œç”¨"><a href="#RequestMappingæ³¨è§£çš„ä½œç”¨" class="headerlink" title="@RequestMappingæ³¨è§£çš„ä½œç”¨"></a>@RequestMappingæ³¨è§£çš„ä½œç”¨</h3><p>RequestMappingæ˜¯ä¸€ä¸ªç”¨æ¥å¤„ç†è¯·æ±‚åœ°å€æ˜ å°„çš„æ³¨è§£ï¼Œå¯ç”¨äºç±»æˆ–æ–¹æ³•ä¸Šã€‚ç”¨äºç±»ä¸Šï¼Œè¡¨ç¤ºç±»ä¸­çš„æ‰€æœ‰å“åº”è¯·æ±‚çš„æ–¹æ³•éƒ½æ˜¯ä»¥è¯¥åœ°å€ä½œä¸ºçˆ¶è·¯å¾„ã€‚<br>RequestMappingæ³¨è§£æœ‰å…­ä¸ªå±æ€§ï¼Œä¸‹é¢æˆ‘ä»¬æŠŠå¥¹åˆ†æˆä¸‰ç±»è¿›è¡Œè¯´æ˜ï¼ˆä¸‹é¢æœ‰ç›¸åº”ç¤ºä¾‹ï¼‰ã€‚<br><strong>value</strong>ï¼Œ <strong>method</strong><br>valueï¼š æŒ‡å®šè¯·æ±‚çš„å®é™…åœ°å€ï¼ŒæŒ‡å®šçš„åœ°å€å¯ä»¥æ˜¯URI Template æ¨¡å¼ï¼ˆåé¢å°†ä¼šè¯´æ˜ï¼‰ï¼›<br>methodï¼š æŒ‡å®šè¯·æ±‚çš„methodç±»å‹ï¼Œ GETã€POSTã€PUTã€DELETEç­‰ï¼›<br><strong>consumes</strong>ï¼Œ<strong>produces</strong><br>consumesï¼š æŒ‡å®šå¤„ç†è¯·æ±‚çš„æäº¤å†…å®¹ç±»å‹ï¼ˆContent-Typeï¼‰ï¼Œä¾‹å¦‚application/json, text/html;<br>produces: æŒ‡å®šè¿”å›çš„å†…å®¹ç±»å‹ï¼Œä»…å½“requestè¯·æ±‚å¤´ä¸­çš„(Accept)ç±»å‹ä¸­åŒ…å«è¯¥æŒ‡å®šç±»å‹æ‰è¿”å›ï¼›<br><strong>params</strong>ï¼Œ<strong>headers</strong><br>paramsï¼š æŒ‡å®šrequestä¸­å¿…é¡»åŒ…å«æŸäº›å‚æ•°å€¼æ˜¯ï¼Œæ‰è®©è¯¥æ–¹æ³•å¤„ç†ã€‚<br>headersï¼š æŒ‡å®šrequestä¸­å¿…é¡»åŒ…å«æŸäº›æŒ‡å®šçš„headerå€¼ï¼Œæ‰èƒ½è®©è¯¥æ–¹æ³•å¤„ç†è¯·æ±‚ã€‚</p>
<h3 id="ResponseBodyæ³¨è§£çš„ä½œç”¨"><a href="#ResponseBodyæ³¨è§£çš„ä½œç”¨" class="headerlink" title="@ResponseBodyæ³¨è§£çš„ä½œç”¨"></a>@ResponseBodyæ³¨è§£çš„ä½œç”¨</h3><p>ä½œç”¨ï¼š è¯¥æ³¨è§£ç”¨äºå°†Controllerçš„æ–¹æ³•è¿”å›çš„å¯¹è±¡ï¼Œé€šè¿‡é€‚å½“çš„HttpMessageConverterè½¬æ¢ä¸ºæŒ‡å®šæ ¼å¼åï¼Œå†™å…¥åˆ°Responseå¯¹è±¡çš„bodyæ•°æ®åŒºã€‚<br>ä½¿ç”¨æ—¶æœºï¼šè¿”å›çš„æ•°æ®ä¸æ˜¯htmlæ ‡ç­¾çš„é¡µé¢ï¼Œè€Œæ˜¯å…¶ä»–æŸç§æ ¼å¼çš„æ•°æ®æ—¶ï¼ˆå¦‚jsonã€xmlç­‰ï¼‰ä½¿ç”¨ï¼›</p>
<h3 id="PathVariableå’Œ-RequestParamçš„åŒºåˆ«"><a href="#PathVariableå’Œ-RequestParamçš„åŒºåˆ«" class="headerlink" title="@PathVariableå’Œ@RequestParamçš„åŒºåˆ«"></a>@PathVariableå’Œ@RequestParamçš„åŒºåˆ«</h3><p>è¯·æ±‚è·¯å¾„ä¸Šæœ‰ä¸ªidçš„å˜é‡å€¼ï¼Œå¯ä»¥é€šè¿‡@PathVariableæ¥è·å– @RequestMapping(value = â€œ/page/{id}â€, method = RequestMethod.GET)<br>@RequestParamç”¨æ¥è·å¾—é™æ€çš„URLè¯·æ±‚å…¥å‚ springæ³¨è§£æ—¶actioné‡Œç”¨åˆ°ã€‚</p>
<h3 id="Spring-MVCä¸Struts2åŒºåˆ«"><a href="#Spring-MVCä¸Struts2åŒºåˆ«" class="headerlink" title="Spring MVCä¸Struts2åŒºåˆ«"></a>Spring MVCä¸Struts2åŒºåˆ«</h3><p>ç›¸åŒç‚¹<br>éƒ½æ˜¯åŸºäºmvcçš„è¡¨ç°å±‚æ¡†æ¶ï¼Œéƒ½ç”¨äºwebé¡¹ç›®çš„å¼€å‘ã€‚<br>ä¸åŒç‚¹</p>
<ol>
<li>å‰ç«¯æ§åˆ¶å™¨ä¸ä¸€æ ·ã€‚Spring MVCçš„å‰ç«¯æ§åˆ¶å™¨æ˜¯servletï¼šDispatcherServletã€‚struts2çš„å‰ç«¯æ§åˆ¶å™¨æ˜¯filterï¼šStrutsPreparedAndExcutorFilterã€‚</li>
<li>è¯·æ±‚å‚æ•°çš„æ¥æ”¶æ–¹å¼ä¸ä¸€æ ·ã€‚Spring MVCæ˜¯ä½¿ç”¨æ–¹æ³•çš„å½¢å‚æ¥æ”¶è¯·æ±‚çš„å‚æ•°ï¼ŒåŸºäºæ–¹æ³•çš„å¼€å‘ï¼Œçº¿ç¨‹å®‰å…¨ï¼Œå¯ä»¥è®¾è®¡ä¸ºå•ä¾‹æˆ–è€…å¤šä¾‹çš„å¼€å‘ï¼Œæ¨èä½¿ç”¨å•ä¾‹æ¨¡å¼çš„å¼€å‘ï¼ˆæ‰§è¡Œæ•ˆç‡æ›´é«˜ï¼‰ï¼Œé»˜è®¤å°±æ˜¯å•ä¾‹å¼€å‘æ¨¡å¼ã€‚struts2æ˜¯é€šè¿‡ç±»çš„æˆå‘˜å˜é‡æ¥æ”¶è¯·æ±‚çš„å‚æ•°ï¼Œæ˜¯åŸºäºç±»çš„å¼€å‘ï¼Œçº¿ç¨‹ä¸å®‰å…¨ï¼Œåªèƒ½è®¾è®¡ä¸ºå¤šä¾‹çš„å¼€å‘ã€‚</li>
<li>Strutsé‡‡ç”¨å€¼æ ˆå­˜å‚¨è¯·æ±‚å’Œå“åº”çš„æ•°æ®ï¼Œé€šè¿‡OGNLå­˜å–æ•°æ®ï¼ŒSpring MVCé€šè¿‡å‚æ•°è§£æå™¨æ˜¯å°†requestè¯·æ±‚å†…å®¹è§£æï¼Œå¹¶ç»™æ–¹æ³•å½¢å‚èµ‹å€¼ï¼Œå°†æ•°æ®å’Œè§†å›¾å°è£…æˆModelAndViewå¯¹è±¡ï¼Œæœ€ååˆå°†ModelAndViewä¸­çš„æ¨¡å‹æ•°æ®é€šè¿‡requesåŸŸä¼ è¾“åˆ°é¡µé¢ã€‚Jspè§†å›¾è§£æå™¨é»˜è®¤ä½¿ç”¨jstlã€‚</li>
<li>ä¸springæ•´åˆä¸ä¸€æ ·ã€‚Spring MVCæ˜¯springæ¡†æ¶çš„ä¸€éƒ¨åˆ†ï¼Œä¸éœ€è¦æ•´åˆã€‚åœ¨ä¼ä¸šé¡¹ç›®ä¸­ï¼ŒSpring MVCä½¿ç”¨æ›´å¤šä¸€äº›ã€‚</li>
</ol>
<h3 id="Spring-MVCæ€ä¹ˆæ ·è®¾å®šé‡å®šå‘å’Œè½¬å‘çš„ï¼Ÿ"><a href="#Spring-MVCæ€ä¹ˆæ ·è®¾å®šé‡å®šå‘å’Œè½¬å‘çš„ï¼Ÿ" class="headerlink" title="Spring MVCæ€ä¹ˆæ ·è®¾å®šé‡å®šå‘å’Œè½¬å‘çš„ï¼Ÿ"></a>Spring MVCæ€ä¹ˆæ ·è®¾å®šé‡å®šå‘å’Œè½¬å‘çš„ï¼Ÿ</h3><ol>
<li>è½¬å‘ï¼šåœ¨è¿”å›å€¼å‰é¢åŠ â€forward:â€ï¼Œè­¬å¦‚â€forward:user.do?name=method4â€</li>
<li>é‡å®šå‘ï¼šåœ¨è¿”å›å€¼å‰é¢åŠ â€redirect:â€ï¼Œè­¬å¦‚â€redirect:<a href="http://www.baidu.com&quot;/">http://www.baidu.com&quot;</a></li>
</ol>
<h3 id="Spring-MVCæ€ä¹ˆå’ŒAJAXç›¸äº’è°ƒç”¨çš„ï¼Ÿ"><a href="#Spring-MVCæ€ä¹ˆå’ŒAJAXç›¸äº’è°ƒç”¨çš„ï¼Ÿ" class="headerlink" title="Spring MVCæ€ä¹ˆå’ŒAJAXç›¸äº’è°ƒç”¨çš„ï¼Ÿ"></a>Spring MVCæ€ä¹ˆå’ŒAJAXç›¸äº’è°ƒç”¨çš„ï¼Ÿ</h3><p>é€šè¿‡Jacksonæ¡†æ¶å°±å¯ä»¥æŠŠJavaé‡Œé¢çš„å¯¹è±¡ç›´æ¥è½¬åŒ–æˆJså¯ä»¥è¯†åˆ«çš„Jsonå¯¹è±¡ã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹ ï¼š</p>
<ol>
<li>åŠ å…¥Jackson.jar</li>
<li>åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®jsonçš„æ˜ å°„</li>
<li>åœ¨æ¥å—Ajaxæ–¹æ³•é‡Œé¢å¯ä»¥ç›´æ¥è¿”å›Object,Listç­‰,ä½†æ–¹æ³•å‰é¢è¦åŠ ä¸Š@ResponseBodyæ³¨è§£ã€‚</li>
</ol>
<h3 id="å¦‚ä½•è§£å†³POSTè¯·æ±‚ä¸­æ–‡ä¹±ç é—®é¢˜ï¼ŒGETçš„åˆå¦‚ä½•å¤„ç†å‘¢ï¼Ÿ"><a href="#å¦‚ä½•è§£å†³POSTè¯·æ±‚ä¸­æ–‡ä¹±ç é—®é¢˜ï¼ŒGETçš„åˆå¦‚ä½•å¤„ç†å‘¢ï¼Ÿ" class="headerlink" title="å¦‚ä½•è§£å†³POSTè¯·æ±‚ä¸­æ–‡ä¹±ç é—®é¢˜ï¼ŒGETçš„åˆå¦‚ä½•å¤„ç†å‘¢ï¼Ÿ"></a>å¦‚ä½•è§£å†³POSTè¯·æ±‚ä¸­æ–‡ä¹±ç é—®é¢˜ï¼ŒGETçš„åˆå¦‚ä½•å¤„ç†å‘¢ï¼Ÿ</h3><ol>
<li>è§£å†³postè¯·æ±‚ä¹±ç é—®é¢˜ï¼š<br>åœ¨web.xmlä¸­é…ç½®ä¸€ä¸ªCharacterEncodingFilterè¿‡æ»¤å™¨ï¼Œè®¾ç½®æˆutf-8ï¼›<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/11/30/SpringMVC/content2.png" class title="content2">
</li>
<li>getè¯·æ±‚ä¸­æ–‡å‚æ•°å‡ºç°ä¹±ç è§£å†³æ–¹æ³•æœ‰ä¸¤ä¸ªï¼š<br>ä¿®æ”¹tomcaté…ç½®æ–‡ä»¶æ·»åŠ ç¼–ç ä¸å·¥ç¨‹ç¼–ç ä¸€è‡´ï¼Œå¦‚ä¸‹ï¼š<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/11/30/SpringMVC/content3.png" class title="content3">    </li>
</ol>
<p>å¦å¤–ä¸€ç§æ–¹æ³•å¯¹å‚æ•°è¿›è¡Œé‡æ–°ç¼–ç ï¼š<br>String userName = new String(request.getParamter(â€œuserNameâ€).getBytes(â€œISO8859-1â€),â€œutf-8â€)<br>ISO8859-1æ˜¯tomcaté»˜è®¤ç¼–ç ï¼Œéœ€è¦å°†tomcatç¼–ç åçš„å†…å®¹æŒ‰utf-8ç¼–ç ã€‚        </p>
<h3 id="Spring-MVCçš„å¼‚å¸¸å¤„ç†ï¼Ÿ"><a href="#Spring-MVCçš„å¼‚å¸¸å¤„ç†ï¼Ÿ" class="headerlink" title="Spring MVCçš„å¼‚å¸¸å¤„ç†ï¼Ÿ"></a>Spring MVCçš„å¼‚å¸¸å¤„ç†ï¼Ÿ</h3><p>å¯ä»¥å°†å¼‚å¸¸æŠ›ç»™Springæ¡†æ¶ï¼Œç”±Springæ¡†æ¶æ¥å¤„ç†ï¼›æˆ‘ä»¬åªéœ€è¦é…ç½®ç®€å•çš„å¼‚å¸¸å¤„ç†å™¨ï¼Œåœ¨å¼‚å¸¸å¤„ç†å™¨ä¸­æ·»è§†å›¾é¡µé¢å³å¯ã€‚</p>
<h3 id="å¦‚æœåœ¨æ‹¦æˆªè¯·æ±‚ä¸­ï¼Œæˆ‘æƒ³æ‹¦æˆªgetæ–¹å¼æäº¤çš„æ–¹æ³•-æ€ä¹ˆé…ç½®"><a href="#å¦‚æœåœ¨æ‹¦æˆªè¯·æ±‚ä¸­ï¼Œæˆ‘æƒ³æ‹¦æˆªgetæ–¹å¼æäº¤çš„æ–¹æ³•-æ€ä¹ˆé…ç½®" class="headerlink" title="å¦‚æœåœ¨æ‹¦æˆªè¯·æ±‚ä¸­ï¼Œæˆ‘æƒ³æ‹¦æˆªgetæ–¹å¼æäº¤çš„æ–¹æ³•,æ€ä¹ˆé…ç½®"></a>å¦‚æœåœ¨æ‹¦æˆªè¯·æ±‚ä¸­ï¼Œæˆ‘æƒ³æ‹¦æˆªgetæ–¹å¼æäº¤çš„æ–¹æ³•,æ€ä¹ˆé…ç½®</h3><p>å¯ä»¥åœ¨@RequestMappingæ³¨è§£é‡Œé¢åŠ ä¸Šmethod=RequestMethod.GETã€‚</p>
<h3 id="æ€æ ·åœ¨æ–¹æ³•é‡Œé¢å¾—åˆ°Request-æˆ–è€…Sessionï¼Ÿ"><a href="#æ€æ ·åœ¨æ–¹æ³•é‡Œé¢å¾—åˆ°Request-æˆ–è€…Sessionï¼Ÿ" class="headerlink" title="æ€æ ·åœ¨æ–¹æ³•é‡Œé¢å¾—åˆ°Request,æˆ–è€…Sessionï¼Ÿ"></a>æ€æ ·åœ¨æ–¹æ³•é‡Œé¢å¾—åˆ°Request,æˆ–è€…Sessionï¼Ÿ</h3><p>ç›´æ¥åœ¨æ–¹æ³•çš„å½¢å‚ä¸­å£°æ˜request,Spring MVCå°±è‡ªåŠ¨æŠŠrequestå¯¹è±¡ä¼ å…¥ã€‚</p>
<h3 id="å¦‚æœæƒ³åœ¨æ‹¦æˆªçš„æ–¹æ³•é‡Œé¢å¾—åˆ°ä»å‰å°ä¼ å…¥çš„å‚æ•°-æ€ä¹ˆå¾—åˆ°ï¼Ÿ"><a href="#å¦‚æœæƒ³åœ¨æ‹¦æˆªçš„æ–¹æ³•é‡Œé¢å¾—åˆ°ä»å‰å°ä¼ å…¥çš„å‚æ•°-æ€ä¹ˆå¾—åˆ°ï¼Ÿ" class="headerlink" title="å¦‚æœæƒ³åœ¨æ‹¦æˆªçš„æ–¹æ³•é‡Œé¢å¾—åˆ°ä»å‰å°ä¼ å…¥çš„å‚æ•°,æ€ä¹ˆå¾—åˆ°ï¼Ÿ"></a>å¦‚æœæƒ³åœ¨æ‹¦æˆªçš„æ–¹æ³•é‡Œé¢å¾—åˆ°ä»å‰å°ä¼ å…¥çš„å‚æ•°,æ€ä¹ˆå¾—åˆ°ï¼Ÿ</h3><p>ç›´æ¥åœ¨å½¢å‚é‡Œé¢å£°æ˜è¿™ä¸ªå‚æ•°å°±å¯ä»¥,ä½†å¿…é¡»åå­—å’Œä¼ è¿‡æ¥çš„å‚æ•°ä¸€æ ·ã€‚</p>
<h3 id="å¦‚æœå‰å°æœ‰å¾ˆå¤šä¸ªå‚æ•°ä¼ å…¥-å¹¶ä¸”è¿™äº›å‚æ•°éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡çš„-é‚£ä¹ˆæ€ä¹ˆæ ·å¿«é€Ÿå¾—åˆ°è¿™ä¸ªå¯¹è±¡ï¼Ÿ"><a href="#å¦‚æœå‰å°æœ‰å¾ˆå¤šä¸ªå‚æ•°ä¼ å…¥-å¹¶ä¸”è¿™äº›å‚æ•°éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡çš„-é‚£ä¹ˆæ€ä¹ˆæ ·å¿«é€Ÿå¾—åˆ°è¿™ä¸ªå¯¹è±¡ï¼Ÿ" class="headerlink" title="å¦‚æœå‰å°æœ‰å¾ˆå¤šä¸ªå‚æ•°ä¼ å…¥,å¹¶ä¸”è¿™äº›å‚æ•°éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡çš„,é‚£ä¹ˆæ€ä¹ˆæ ·å¿«é€Ÿå¾—åˆ°è¿™ä¸ªå¯¹è±¡ï¼Ÿ"></a>å¦‚æœå‰å°æœ‰å¾ˆå¤šä¸ªå‚æ•°ä¼ å…¥,å¹¶ä¸”è¿™äº›å‚æ•°éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡çš„,é‚£ä¹ˆæ€ä¹ˆæ ·å¿«é€Ÿå¾—åˆ°è¿™ä¸ªå¯¹è±¡ï¼Ÿ</h3><p>ç›´æ¥åœ¨æ–¹æ³•ä¸­å£°æ˜è¿™ä¸ªå¯¹è±¡,Spring MVCå°±è‡ªåŠ¨ä¼šæŠŠå±æ€§èµ‹å€¼åˆ°è¿™ä¸ªå¯¹è±¡é‡Œé¢ã€‚</p>
<h3 id="Spring-MVCä¸­å‡½æ•°çš„è¿”å›å€¼æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Spring-MVCä¸­å‡½æ•°çš„è¿”å›å€¼æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Spring MVCä¸­å‡½æ•°çš„è¿”å›å€¼æ˜¯ä»€ä¹ˆï¼Ÿ"></a>Spring MVCä¸­å‡½æ•°çš„è¿”å›å€¼æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>è¿”å›å€¼å¯ä»¥æœ‰å¾ˆå¤šç±»å‹,æœ‰String, ModelAndViewã€‚ModelAndViewç±»æŠŠè§†å›¾å’Œæ•°æ®éƒ½åˆå¹¶çš„ä¸€èµ·çš„ï¼Œä½†ä¸€èˆ¬ç”¨Stringæ¯”è¾ƒå¥½ã€‚</p>
<h3 id="Spring-MVCç”¨ä»€ä¹ˆå¯¹è±¡ä»åå°å‘å‰å°ä¼ é€’æ•°æ®çš„ï¼Ÿ"><a href="#Spring-MVCç”¨ä»€ä¹ˆå¯¹è±¡ä»åå°å‘å‰å°ä¼ é€’æ•°æ®çš„ï¼Ÿ" class="headerlink" title="Spring MVCç”¨ä»€ä¹ˆå¯¹è±¡ä»åå°å‘å‰å°ä¼ é€’æ•°æ®çš„ï¼Ÿ"></a>Spring MVCç”¨ä»€ä¹ˆå¯¹è±¡ä»åå°å‘å‰å°ä¼ é€’æ•°æ®çš„ï¼Ÿ</h3><p>é€šè¿‡ModelMapå¯¹è±¡,å¯ä»¥åœ¨è¿™ä¸ªå¯¹è±¡é‡Œé¢è°ƒç”¨putæ–¹æ³•,æŠŠå¯¹è±¡åŠ åˆ°é‡Œé¢,å‰å°å°±å¯ä»¥é€šè¿‡elè¡¨è¾¾å¼æ‹¿åˆ°ã€‚</p>
<h3 id="æ€ä¹ˆæ ·æŠŠModelMapé‡Œé¢çš„æ•°æ®æ”¾å…¥Sessioné‡Œé¢ï¼Ÿ"><a href="#æ€ä¹ˆæ ·æŠŠModelMapé‡Œé¢çš„æ•°æ®æ”¾å…¥Sessioné‡Œé¢ï¼Ÿ" class="headerlink" title="æ€ä¹ˆæ ·æŠŠModelMapé‡Œé¢çš„æ•°æ®æ”¾å…¥Sessioné‡Œé¢ï¼Ÿ"></a>æ€ä¹ˆæ ·æŠŠModelMapé‡Œé¢çš„æ•°æ®æ”¾å…¥Sessioné‡Œé¢ï¼Ÿ</h3><p>å¯ä»¥åœ¨ç±»ä¸Šé¢åŠ ä¸Š@SessionAttributesæ³¨è§£,é‡Œé¢åŒ…å«çš„å­—ç¬¦ä¸²å°±æ˜¯è¦æ”¾å…¥sessioné‡Œé¢çš„keyã€‚</p>
<h3 id="Spring-MVCé‡Œé¢æ‹¦æˆªå™¨æ˜¯æ€ä¹ˆå†™çš„"><a href="#Spring-MVCé‡Œé¢æ‹¦æˆªå™¨æ˜¯æ€ä¹ˆå†™çš„" class="headerlink" title="Spring MVCé‡Œé¢æ‹¦æˆªå™¨æ˜¯æ€ä¹ˆå†™çš„"></a>Spring MVCé‡Œé¢æ‹¦æˆªå™¨æ˜¯æ€ä¹ˆå†™çš„</h3><p>æœ‰ä¸¤ç§å†™æ³•,ä¸€ç§æ˜¯å®ç°HandlerInterceptoræ¥å£ï¼Œå¦å¤–ä¸€ç§æ˜¯ç»§æ‰¿é€‚é…å™¨ç±»ï¼Œæ¥ç€åœ¨æ¥å£æ–¹æ³•å½“ä¸­ï¼Œå®ç°å¤„ç†é€»è¾‘ï¼›ç„¶ååœ¨Spring MVCçš„é…ç½®æ–‡ä»¶ä¸­é…ç½®æ‹¦æˆªå™¨å³å¯ï¼š   </p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/11/30/SpringMVC/content4.png" class title="content4">  

<h3 id="ä»‹ç»ä¸€ä¸‹-WebApplicationContext"><a href="#ä»‹ç»ä¸€ä¸‹-WebApplicationContext" class="headerlink" title="ä»‹ç»ä¸€ä¸‹ WebApplicationContext"></a>ä»‹ç»ä¸€ä¸‹ WebApplicationContext</h3><p>WebApplicationContext ç»§æ‰¿äº†ApplicationContext å¹¶å¢åŠ äº†ä¸€äº›WEBåº”ç”¨å¿…å¤‡çš„ç‰¹æœ‰åŠŸèƒ½ï¼Œå®ƒä¸åŒäºä¸€èˆ¬çš„ApplicationContext ï¼Œå› ä¸ºå®ƒèƒ½å¤„ç†ä¸»é¢˜ï¼Œå¹¶æ‰¾åˆ°è¢«å…³è”çš„servletã€‚                                                                                                                          </p>
]]></content>
      <categories>
        <category>SpringMVC</category>
      </categories>
      <tags>
        <tag>é¢è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title>xss &amp; sqlæ¼æ´è§£å†³</title>
    <url>/2021/04/15/xss%20&amp;%20sql%E6%BC%8F%E6%B4%9E%E8%A7%A3%E5%86%B3/</url>
    <content><![CDATA[<h3 id="web-xmlæ–‡ä»¶é…ç½®"><a href="#web-xmlæ–‡ä»¶é…ç½®" class="headerlink" title="web.xmlæ–‡ä»¶é…ç½®"></a>web.xmlæ–‡ä»¶é…ç½®</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- è§£å†³xss &amp; sqlæ¼æ´ --&gt;</span><br><span class="line">&lt;filter&gt;</span><br><span class="line">    &lt;filter-name&gt;xssAndSqlFilter&lt;/filter-name&gt;</span><br><span class="line">    &lt;filter-class&gt;com.guochuang.common.filter.XssAndSqlFilter&lt;/filter-class&gt;</span><br><span class="line">&lt;/filter&gt;</span><br><span class="line">&lt;!-- è§£å†³xss &amp; sqlæ¼æ´ --&gt;</span><br><span class="line">&lt;filter-mapping&gt;</span><br><span class="line">    &lt;filter-name&gt;xssAndSqlFilter&lt;/filter-name&gt;</span><br><span class="line">    &lt;url-pattern&gt;*&lt;/url-pattern&gt;</span><br><span class="line">&lt;/filter-mapping&gt;</span><br></pre></td></tr></table></figure>

<h3 id="ç¼–å†™è¿‡æ»¤å™¨"><a href="#ç¼–å†™è¿‡æ»¤å™¨" class="headerlink" title="ç¼–å†™è¿‡æ»¤å™¨"></a>ç¼–å†™è¿‡æ»¤å™¨</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import java.io.IOException;</span><br><span class="line"></span><br><span class="line">import javax.servlet.Filter;</span><br><span class="line">import javax.servlet.FilterChain;</span><br><span class="line">import javax.servlet.FilterConfig;</span><br><span class="line">import javax.servlet.ServletException;</span><br><span class="line">import javax.servlet.ServletRequest;</span><br><span class="line">import javax.servlet.ServletResponse;</span><br><span class="line">import javax.servlet.http.HttpServletRequest;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * </span><br><span class="line"> * @author BridgeBai</span><br><span class="line"> * extends OncePerRequestFilter</span><br><span class="line"> */</span><br><span class="line">public class XssAndSqlFilter implements Filter  &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void destroy() &#123;</span><br><span class="line">        // TODO Auto-generated method stub</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException &#123;</span><br><span class="line">        XssAndSqlHttpServletRequestWrapper xssRequest = new XssAndSqlHttpServletRequestWrapper((HttpServletRequest) request);</span><br><span class="line">        chain.doFilter(xssRequest, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void init(FilterConfig arg0) throws ServletException &#123;</span><br><span class="line">        // TODO Auto-generated method stub</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">//   ä¸‹é¢æ˜¯springboot filteré…ç½®</span><br><span class="line">//	 //TODO ä»é…ç½®æ–‡ä»¶è¯»å–</span><br><span class="line">//    private String exclusions = &quot;*.js,*.gif,*.jpg,*.png,*.css,*.ico&quot;;</span><br><span class="line">//    private Set&lt;String&gt; excludesPattern;</span><br><span class="line">//    private PatternMatcher pathMatcher = new ServletPathMatcher();</span><br><span class="line">//</span><br><span class="line">//    public XssAndSqlFilter()&#123;</span><br><span class="line">//            excludesPattern = new HashSet&lt;&gt;(Arrays.asList(exclusions.split(&quot;\\s*,\\s*&quot;)));</span><br><span class="line">//    &#125;</span><br><span class="line">//</span><br><span class="line">//    @Override</span><br><span class="line">//    protected boolean shouldNotFilter(HttpServletRequest request) throws ServletException &#123;</span><br><span class="line">//        String requestURI = request.getRequestURI();</span><br><span class="line">//        String contextPath = request.getContextPath();</span><br><span class="line">//        return isExclusion(requestURI,contextPath);</span><br><span class="line">//    &#125;</span><br><span class="line">//</span><br><span class="line">//    @Override</span><br><span class="line">//    public void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain chain) throws ServletException, IOException &#123;</span><br><span class="line">//        XssAndSqlHttpServletRequestWrapper xssRequest = new XssAndSqlHttpServletRequestWrapper(request);</span><br><span class="line">//        chain.doFilter(xssRequest, response);</span><br><span class="line">//    &#125;</span><br><span class="line">//</span><br><span class="line">//    private boolean isExclusion(String requestURI,String contextPath) &#123;</span><br><span class="line">//        if (requestURI == null) &#123;</span><br><span class="line">//            return false;</span><br><span class="line">//        &#125;</span><br><span class="line">//</span><br><span class="line">//        if (contextPath != null &amp;&amp; requestURI.startsWith(contextPath)) &#123;</span><br><span class="line">//            requestURI = requestURI.substring(contextPath.length());</span><br><span class="line">//        &#125;</span><br><span class="line">//</span><br><span class="line">//        for (String pattern : excludesPattern) &#123;</span><br><span class="line">//            if (pathMatcher.matches(pattern, requestURI)) &#123;</span><br><span class="line">//                return true;</span><br><span class="line">//            &#125;</span><br><span class="line">//        &#125;</span><br><span class="line">//        return false;</span><br><span class="line">//    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="åŒ…è£…å™¨"><a href="#åŒ…è£…å™¨" class="headerlink" title="åŒ…è£…å™¨"></a>åŒ…è£…å™¨</h3><p>XssAndSqlHttpServletRequestWrapper.java</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/**</span><br><span class="line"> *</span><br><span class="line"> */</span><br><span class="line">import javax.servlet.http.HttpServletRequest;</span><br><span class="line">import javax.servlet.http.HttpServletRequestWrapper;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * </span><br><span class="line"> * @author BridgeBai</span><br><span class="line"> *</span><br><span class="line"> */</span><br><span class="line">public class XssAndSqlHttpServletRequestWrapper extends HttpServletRequestWrapper &#123;</span><br><span class="line"></span><br><span class="line">    public XssAndSqlHttpServletRequestWrapper(HttpServletRequest request) &#123;</span><br><span class="line">        super(request);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * è¦†ç›–getParameteræ–¹æ³•ï¼Œå°†å‚æ•°åå’Œå‚æ•°å€¼éƒ½åšxss &amp; sqlè¿‡æ»¤ã€‚&lt;br/&gt;</span><br><span class="line">     * å¦‚æœéœ€è¦è·å¾—åŸå§‹çš„å€¼ï¼Œåˆ™é€šè¿‡super.getParameterValues(name)æ¥è·å–&lt;br/&gt;</span><br><span class="line">     * getParameterNames,getParameterValueså’ŒgetParameterMapä¹Ÿå¯èƒ½éœ€è¦è¦†ç›–</span><br><span class="line">     */</span><br><span class="line">    @Override</span><br><span class="line">    public String getParameter(String name) &#123;</span><br><span class="line">        String value = super.getParameter(HtmlHelper.xssEncode(name));</span><br><span class="line">        if (value != null) &#123;</span><br><span class="line">            value = HtmlHelper.cleanSQLInject(HtmlHelper.xssEncode(value));</span><br><span class="line">        &#125;</span><br><span class="line">        return value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String[] getParameterValues(String s) &#123;</span><br><span class="line">        String str[] = super.getParameterValues(s);</span><br><span class="line">        if (str == null) &#123;</span><br><span class="line">            return null;</span><br><span class="line">        &#125;</span><br><span class="line">        int i = str.length;</span><br><span class="line">        String as1[] = new String[i];</span><br><span class="line">        for (int j = 0; j &lt; i; j++) &#123;</span><br><span class="line">            as1[j] = HtmlHelper.cleanSQLInject(HtmlHelper.xssEncode(str[j]));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return as1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * è¦†ç›–getHeaderæ–¹æ³•ï¼Œå°†å‚æ•°åå’Œå‚æ•°å€¼éƒ½åšxss &amp; sqlè¿‡æ»¤ã€‚&lt;br/&gt;</span><br><span class="line">     * å¦‚æœéœ€è¦è·å¾—åŸå§‹çš„å€¼ï¼Œåˆ™é€šè¿‡super.getHeaders(name)æ¥è·å–&lt;br/&gt;</span><br><span class="line">     * getHeaderNames ä¹Ÿå¯èƒ½éœ€è¦è¦†ç›–</span><br><span class="line">     */</span><br><span class="line">    @Override</span><br><span class="line">    public String getHeader(String name) &#123;</span><br><span class="line"></span><br><span class="line">        String value = super.getHeader(HtmlHelper.xssEncode(name));</span><br><span class="line">        if (value != null) &#123;</span><br><span class="line">            value = HtmlHelper.cleanSQLInject(HtmlHelper.xssEncode(value));</span><br><span class="line">        &#125;</span><br><span class="line">        return value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>HtmlHelper.java</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import java.util.regex.Pattern;</span><br><span class="line"></span><br><span class="line">public class HtmlHelper &#123;</span><br><span class="line">	</span><br><span class="line">	/**</span><br><span class="line">	 * å°†å®¹æ˜“å¼•èµ·xss &amp; sqlæ¼æ´çš„åŠè§’å­—ç¬¦ç›´æ¥æ›¿æ¢æˆå…¨è§’å­—ç¬¦</span><br><span class="line">	 * </span><br><span class="line">	 * @param s</span><br><span class="line">	 * @return</span><br><span class="line">	 */</span><br><span class="line">	public static String xssEncode(String s) &#123;</span><br><span class="line">		if (s == null || s.isEmpty()) &#123;</span><br><span class="line">			return s;</span><br><span class="line">		&#125; else &#123;</span><br><span class="line">			s = stripXSSAndSql(s);</span><br><span class="line">		&#125;</span><br><span class="line">		/*StringBuilder sb = new StringBuilder(s.length() + 16);</span><br><span class="line">		for (int i = 0; i &lt; s.length(); i++) &#123;</span><br><span class="line">			char c = s.charAt(i);</span><br><span class="line">			switch (c) &#123;</span><br><span class="line">			case &#x27;&gt;&#x27;:</span><br><span class="line">				sb.append(&quot;ï¼&quot;);// è½¬ä¹‰å¤§äºå·</span><br><span class="line">				break;</span><br><span class="line">			case &#x27;&lt;&#x27;:</span><br><span class="line">				sb.append(&quot;ï¼œ&quot;);// è½¬ä¹‰å°äºå·</span><br><span class="line">				break;</span><br><span class="line">			case &#x27;\&#x27;&#x27;:</span><br><span class="line">				sb.append(&quot;ï¼‡&quot;);// è½¬ä¹‰å•å¼•å·</span><br><span class="line">				break;</span><br><span class="line">			case &#x27;\&quot;&#x27;:</span><br><span class="line">				sb.append(&quot;ï¼‚&quot;);// è½¬ä¹‰åŒå¼•å·</span><br><span class="line">				break;</span><br><span class="line">			case &#x27;&amp;&#x27;:</span><br><span class="line">				sb.append(&quot;ï¼†&quot;);// è½¬ä¹‰&amp;</span><br><span class="line">				break;</span><br><span class="line">			case &#x27;#&#x27;:</span><br><span class="line">				sb.append(&quot;ï¼ƒ&quot;);// è½¬ä¹‰#</span><br><span class="line">				break;</span><br><span class="line">			default:</span><br><span class="line">				sb.append(c);</span><br><span class="line">				break;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		return sb.toString();*/</span><br><span class="line">		return s;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	</span><br><span class="line">	 /**</span><br><span class="line">     * é˜²æ­¢xssè·¨è„šæœ¬æ”»å‡»ï¼ˆæ›¿æ¢ï¼Œæ ¹æ®å®é™…æƒ…å†µè°ƒæ•´ï¼‰</span><br><span class="line">     */</span><br><span class="line"></span><br><span class="line">    public static String stripXSSAndSql(String value) &#123;</span><br><span class="line">    	if (value != null) &#123;</span><br><span class="line">            // NOTE: It&#x27;s highly recommended to use the ESAPI library and</span><br><span class="line">            // uncomment the following line to</span><br><span class="line">            // avoid encoded attacks.</span><br><span class="line">            // value = ESAPI.encoder().canonicalize(value);</span><br><span class="line">            // Avoid null characters</span><br><span class="line">            /** value = value.replaceAll(&quot;&quot;, &quot;&quot;); ***/</span><br><span class="line">            // Avoid anything between script tags</span><br><span class="line">            Pattern scriptPattern = Pattern.compile(</span><br><span class="line">                    &quot;&lt;[\r\n| | ]*script[\r\n| | ]*&gt;(.*?)&lt;/[\r\n| | ]*script[\r\n| | ]*&gt;&quot;, Pattern.CASE_INSENSITIVE);</span><br><span class="line">            value = scriptPattern.matcher(value).replaceAll(&quot;&quot;);</span><br><span class="line">            // Avoid anything in a</span><br><span class="line">            // src=&quot;http://www.yihaomen.com/article/java/...&quot; type of</span><br><span class="line">            // e-xpression</span><br><span class="line">            scriptPattern = Pattern.compile(&quot;src[\r\n| | ]*=[\r\n| | ]*[\\\&quot;|\\\&#x27;](.*?)[\\\&quot;|\\\&#x27;]&quot;,</span><br><span class="line">                    Pattern.CASE_INSENSITIVE | Pattern.MULTILINE | Pattern.DOTALL);</span><br><span class="line">            value = scriptPattern.matcher(value).replaceAll(&quot;&quot;);</span><br><span class="line">            // Remove any lonesome &lt;/script&gt; tag</span><br><span class="line">            scriptPattern = Pattern.compile(&quot;&lt;/[\r\n| | ]*script[\r\n| | ]*&gt;&quot;, Pattern.CASE_INSENSITIVE);</span><br><span class="line">            value = scriptPattern.matcher(value).replaceAll(&quot;&quot;);</span><br><span class="line">            // Remove any lonesome &lt;script ...&gt; tag</span><br><span class="line">            scriptPattern = Pattern.compile(&quot;&lt;[\r\n| | ]*script(.*?)&gt;&quot;,</span><br><span class="line">                    Pattern.CASE_INSENSITIVE | Pattern.MULTILINE | Pattern.DOTALL);</span><br><span class="line">            value = scriptPattern.matcher(value).replaceAll(&quot;&quot;);</span><br><span class="line">            // Avoid eval(...) expressions</span><br><span class="line">            scriptPattern = Pattern.compile(&quot;eval\\((.*?)\\)&quot;,</span><br><span class="line">                    Pattern.CASE_INSENSITIVE | Pattern.MULTILINE | Pattern.DOTALL);</span><br><span class="line">            value = scriptPattern.matcher(value).replaceAll(&quot;&quot;);</span><br><span class="line">            // Avoid e-xpression(...) expressions</span><br><span class="line">            scriptPattern = Pattern.compile(&quot;e-xpression\\((.*?)\\)&quot;,</span><br><span class="line">                    Pattern.CASE_INSENSITIVE | Pattern.MULTILINE | Pattern.DOTALL);</span><br><span class="line">            value = scriptPattern.matcher(value).replaceAll(&quot;&quot;);</span><br><span class="line">            // Avoid javascript:... expressions</span><br><span class="line">            scriptPattern = Pattern.compile(&quot;javascript[\r\n| | ]*:[\r\n| | ]*&quot;, Pattern.CASE_INSENSITIVE);</span><br><span class="line">            value = scriptPattern.matcher(value).replaceAll(&quot;&quot;);</span><br><span class="line">            // Avoid vbscript:... expressions</span><br><span class="line">            scriptPattern = Pattern.compile(&quot;vbscript[\r\n| | ]*:[\r\n| | ]*&quot;, Pattern.CASE_INSENSITIVE);</span><br><span class="line">            value = scriptPattern.matcher(value).replaceAll(&quot;&quot;);</span><br><span class="line">            // Avoid onload= expressions</span><br><span class="line">            scriptPattern = Pattern.compile(&quot;onload(.*?)=&quot;,</span><br><span class="line">                    Pattern.CASE_INSENSITIVE | Pattern.MULTILINE | Pattern.DOTALL);</span><br><span class="line">            value = scriptPattern.matcher(value).replaceAll(&quot;&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        return value;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public static String cleanSQLInject(String src) &#123;</span><br><span class="line">        String temp = src;</span><br><span class="line">        src = src.replaceAll(&quot; (?i)insert &quot;, &quot; forbidI &quot;)</span><br><span class="line">                .replaceAll(&quot; (?i)select &quot;, &quot; forbidS &quot;)</span><br><span class="line">                .replaceAll(&quot; (?i)update &quot;, &quot; forbidU &quot;)</span><br><span class="line">                .replaceAll(&quot; (?i)delete &quot;, &quot; forbidD &quot;)</span><br><span class="line">                .replaceAll(&quot; (?i)and &quot;, &quot; forbidA &quot;)</span><br><span class="line">                .replaceAll(&quot; (?i)or &quot;, &quot; forbidO &quot;);</span><br><span class="line">        if (!temp.equals(src)) &#123;</span><br><span class="line">            System.out.println(&quot;è¾“å…¥ä¿¡æ¯å­˜åœ¨SQLæ”»å‡»ï¼&quot;);</span><br><span class="line">            System.out.println(&quot;åŸå§‹è¾“å…¥ä¿¡æ¯--&gt;&quot; + temp);</span><br><span class="line">            System.out.println(&quot;å¤„ç†åä¿¡æ¯--&gt;&quot; + src);</span><br><span class="line">        &#125;</span><br><span class="line">        return src;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>xss</tag>
      </tags>
  </entry>
  <entry>
    <title>å†…å¤–éƒ¨ç±»äº’è®¿</title>
    <url>/2020/07/21/%E5%86%85%E5%A4%96%E9%83%A8%E7%B1%BB%E4%BA%92%E8%AE%BF/</url>
    <content><![CDATA[<h3 id="å†…éƒ¨ç±»è®¿é—®å¤–éƒ¨ç±»"><a href="#å†…éƒ¨ç±»è®¿é—®å¤–éƒ¨ç±»" class="headerlink" title="å†…éƒ¨ç±»è®¿é—®å¤–éƒ¨ç±»"></a>å†…éƒ¨ç±»è®¿é—®å¤–éƒ¨ç±»</h3><p>é‡Œé¢çš„å¯ä»¥è‡ªç”±è®¿é—®å¤–é¢çš„ï¼Œè§„åˆ™å’Œstaticä¸€æ ·ã€‚ï¼ˆè®¿é—®éé™æ€æ—¶å¿…é¡»å…ˆåˆ›å»ºå¯¹è±¡ï¼‰å…·ä½“å¦‚ä¸‹ï¼š</p>
<ul>
<li><p>éé™æ€å†…éƒ¨ç±»çš„éé™æ€æ–¹æ³• ç›´æ¥è®¿é—®</p>
<p>ç›´æ¥è®¿é—®</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/07/21/%E5%86%85%E5%A4%96%E9%83%A8%E7%B1%BB%E4%BA%92%E8%AE%BF/content1.png" class title="content1"></li>
<li><p>é™æ€å†…éƒ¨ç±»çš„éé™æ€æ–¹æ³•</p>
<p>å› ä¸ºé™æ€æ–¹æ³•è®¿é—®éé™æ€å¤–éƒ¨æˆå‘˜éœ€å…ˆåˆ›å»ºå®ä¾‹ï¼Œæ‰€ä»¥è®¿é—®iæ—¶å¿…é¡»å…ˆnewå¤–éƒ¨ç±»ã€‚</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/07/21/%E5%86%85%E5%A4%96%E9%83%A8%E7%B1%BB%E4%BA%92%E8%AE%BF/content2.png" class title="content2"></li>
<li><p>é™æ€å†…éƒ¨ç±»çš„é™æ€æ–¹æ³•</p>
<p>è§„åˆ™å¦‚ä¸Š</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/07/21/%E5%86%85%E5%A4%96%E9%83%A8%E7%B1%BB%E4%BA%92%E8%AE%BF/content3.png" class title="content3"></li>
</ul>
<h3 id="å¤–éƒ¨ç±»è®¿é—®å†…éƒ¨ç±»"><a href="#å¤–éƒ¨ç±»è®¿é—®å†…éƒ¨ç±»" class="headerlink" title="å¤–éƒ¨ç±»è®¿é—®å†…éƒ¨ç±»"></a>å¤–éƒ¨ç±»è®¿é—®å†…éƒ¨ç±»</h3><p>å¤§æ–¹å‘ï¼šå› ä¸ºå°†å†…éƒ¨ç±»ç†è§£ä¸ºå¤–éƒ¨ç±»çš„ä¸€ä¸ªæ™®é€šæˆå‘˜ï¼Œæ‰€ä»¥å¤–é¢çš„è®¿é—®é‡Œé¢çš„éœ€å…ˆnewä¸€ä¸ªå¯¹è±¡ã€‚</p>
<ul>
<li><p>éé™æ€æ–¹æ³•è®¿é—®éé™æ€å†…éƒ¨ç±»çš„æˆå‘˜ï¼š</p>
<p>new å†…éƒ¨ç±»å¯¹è±¡</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/07/21/%E5%86%85%E5%A4%96%E9%83%A8%E7%B1%BB%E4%BA%92%E8%AE%BF/content4.png" class title="content4"></li>
<li><p>é™æ€æ–¹æ³•è®¿é—®éé™æ€å†…éƒ¨ç±»çš„æˆå‘˜</p>
<p>é™æ€æ–¹æ³•Test2è®¿é—®éé™æ€Inner1éœ€å…ˆnewå¤–éƒ¨ç±»ï¼›</p>
<p>ç»§ç»­è®¿é—®éé™æ€æˆå‘˜iéœ€å…ˆnew å†…éƒ¨ç±»</p>
<p>æ‰€ä»¥è®¿é—®è§„åˆ™ä¸ºï¼šnew Outter().new Inner1().iã€‚</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/07/21/%E5%86%85%E5%A4%96%E9%83%A8%E7%B1%BB%E4%BA%92%E8%AE%BF/content5.png" class title="content5"></li>
<li><p>éé™æ€æ–¹æ³•è®¿é—®é™æ€å†…éƒ¨ç±»çš„æˆå‘˜</p>
<p>å…ˆâ€œå¤–éƒ¨ç±».å†…éƒ¨ç±»â€è®¿é—®è‡³å†…éƒ¨ç±»ã€‚</p>
<p>è‹¥è®¿é—®é™æ€æˆå‘˜ï¼Œåˆ™éœ€å…ˆnewå†è®¿é—®ï¼›è‹¥è®¿é—®éé™æ€æˆå‘˜ï¼Œåˆ™å¯ç›´æ¥è®¿é—®ã€‚</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/07/21/%E5%86%85%E5%A4%96%E9%83%A8%E7%B1%BB%E4%BA%92%E8%AE%BF/content6.png" class title="content6"></li>
<li><p>éé™æ€æ–¹æ³•è®¿é—®éé™æ€å†…éƒ¨ç±»çš„æˆå‘˜</p>
<p>å…ˆâ€œå¤–éƒ¨ç±».å†…éƒ¨ç±»â€è®¿é—®è‡³å†…éƒ¨ç±»ï¼Œå†newå³å¯è®¿é—®é™æ€æˆå‘˜ã€‚</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/07/21/%E5%86%85%E5%A4%96%E9%83%A8%E7%B1%BB%E4%BA%92%E8%AE%BF/content7.png" class title="content7"></li>
</ul>
<h3 id="åŒ¿åå†…éƒ¨ç±»"><a href="#åŒ¿åå†…éƒ¨ç±»" class="headerlink" title="åŒ¿åå†…éƒ¨ç±»"></a>åŒ¿åå†…éƒ¨ç±»</h3><p>åŒ¿åå†…éƒ¨ç±»è®¿é—®å¤–éƒ¨æˆå‘˜å˜é‡æ—¶ï¼Œæˆå‘˜å˜é‡å‰åº”åŠ finalå…³é”®å­—ã€‚</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/07/21/%E5%86%85%E5%A4%96%E9%83%A8%E7%B1%BB%E4%BA%92%E8%AE%BF/content8.png" class title="content8">















]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>å†…å¤–éƒ¨ç±»</tag>
      </tags>
  </entry>
  <entry>
    <title>å”¯ä¸€ç´¢å¼•å’Œéå”¯ä¸€ç´¢å¼•</title>
    <url>/2020/08/12/%E5%94%AF%E4%B8%80%E7%B4%A2%E5%BC%95%E5%92%8C%E9%9D%9E%E5%94%AF%E4%B8%80%E7%B4%A2%E5%BC%95/</url>
    <content><![CDATA[<p>éå”¯ä¸€ç´¢å¼•ä¹Ÿå«æ™®é€šç´¢å¼•</p>
<p>å¦‚æœåœ¨ä¸€ä¸ªåˆ—ä¸ŠåŒæ—¶å»ºå”¯ä¸€ç´¢å¼•å’Œæ™®é€šç´¢å¼•çš„è¯ï¼Œmysql ä¼šè‡ªåŠ¨é€‰æ‹©å”¯ä¸€ç´¢å¼• å”¯ä¸€ç´¢å¼•å’Œæ™®é€šç´¢å¼•ä½¿ç”¨çš„ç»“æ„éƒ½æ˜¯ B-treeï¼Œæ‰§è¡Œæ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ O(log n)</p>
<h3 id="æ™®é€šç´¢å¼•ï¼ˆéå”¯ä¸€ç´¢å¼•ï¼‰"><a href="#æ™®é€šç´¢å¼•ï¼ˆéå”¯ä¸€ç´¢å¼•ï¼‰" class="headerlink" title="æ™®é€šç´¢å¼•ï¼ˆéå”¯ä¸€ç´¢å¼•ï¼‰"></a>æ™®é€šç´¢å¼•ï¼ˆéå”¯ä¸€ç´¢å¼•ï¼‰</h3><p>æ™®é€šç´¢å¼•ï¼ˆç”±å…³é”®å­— KEY æˆ– INDEX å®šä¹‰çš„ç´¢å¼•ï¼‰çš„å”¯ä¸€ä»»åŠ¡æ˜¯åŠ å¿«å¯¹æ•°æ®çš„è®¿é—®é€Ÿåº¦ã€‚å› æ­¤ï¼Œåº”è¯¥åªä¸ºé‚£äº›æœ€ç»å¸¸å‡ºç°åœ¨æŸ¥è¯¢æ¡ä»¶ï¼ˆWHERE column =ï¼‰æˆ–æ’åºæ¡ä»¶ï¼ˆORDER BY columnï¼‰ä¸­çš„æ•°æ®åˆ—åˆ›å»ºç´¢å¼•ã€‚åªè¦æœ‰å¯èƒ½ï¼Œå°±åº”è¯¥é€‰æ‹©ä¸€ä¸ªæ•°æ®æœ€æ•´é½ã€æœ€ç´§å‡‘çš„æ•°æ®åˆ—ï¼ˆå¦‚ä¸€ä¸ªæ•´æ•°ç±»å‹çš„æ•°æ®åˆ—ï¼‰æ¥åˆ›å»ºç´¢å¼•ã€‚</p>
<h3 id="å”¯ä¸€ç´¢å¼•"><a href="#å”¯ä¸€ç´¢å¼•" class="headerlink" title="å”¯ä¸€ç´¢å¼•"></a>å”¯ä¸€ç´¢å¼•</h3><p>æ™®é€šç´¢å¼•å…è®¸è¢«ç´¢å¼•çš„æ•°æ®åˆ—åŒ…å«é‡å¤çš„å€¼</p>
<p>å¦‚æœèƒ½ç¡®å®šæŸä¸ªæ•°æ®åˆ—å°†åªåŒ…å«å½¼æ­¤å„ä¸ç›¸åŒçš„å€¼ï¼Œåœ¨ä¸ºè¿™ä¸ªæ•°æ®åˆ—åˆ›å»ºç´¢å¼•çš„æ—¶å€™å°±åº”è¯¥ç”¨å…³é”®å­— UNIQUE æŠŠå®ƒå®šä¹‰ä¸ºä¸€ä¸ªå”¯ä¸€ç´¢å¼•ã€‚è¿™ä¹ˆåšçš„å¥½å¤„ï¼šä¸€æ˜¯ç®€åŒ–äº† MySQL å¯¹è¿™ä¸ªç´¢å¼•çš„ç®¡ç†å·¥ä½œï¼Œè¿™ä¸ªç´¢å¼•ä¹Ÿå› æ­¤è€Œå˜å¾—æ›´æœ‰æ•ˆç‡ï¼ˆåŒºåˆ†åº¦ï¼šdistinct * / count (*) é«˜ï¼‰ï¼›äºŒæ˜¯ MySQL ä¼šåœ¨æœ‰æ–°è®°å½•æ’å…¥æ•°æ®è¡¨æ—¶ï¼Œè‡ªåŠ¨æ£€æŸ¥æ–°è®°å½•çš„è¿™ä¸ªå­—æ®µçš„å€¼æ˜¯å¦å·²ç»åœ¨æŸä¸ªè®°å½•çš„è¿™ä¸ªå­—æ®µé‡Œå‡ºç°è¿‡äº†ï¼›å¦‚æœæ˜¯ï¼ŒMySQL å°†æ‹’ç»æ’å…¥é‚£æ¡æ–°è®°å½•ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå”¯ä¸€ç´¢å¼•å¯ä»¥ä¿è¯æ•°æ®è®°å½•çš„å”¯ä¸€æ€§ã€‚äº‹å®ä¸Šï¼Œåœ¨è®¸å¤šåœºåˆï¼Œäººä»¬åˆ›å»ºå”¯ä¸€ç´¢å¼•çš„ç›®çš„å¾€å¾€ä¸æ˜¯ä¸ºäº†æé«˜è®¿é—®é€Ÿåº¦ï¼Œè€Œåªæ˜¯ä¸ºäº†é¿å…æ•°æ®å‡ºç°é‡å¤ã€‚</p>
<h3 id="ä¸»é”®ç´¢å¼•"><a href="#ä¸»é”®ç´¢å¼•" class="headerlink" title="ä¸»é”®ç´¢å¼•"></a>ä¸»é”®ç´¢å¼•</h3><p>ä¸»é”®ç´¢å¼•æ˜¯å”¯ä¸€ç´¢å¼•çš„ç‰¹æ®Šç±»å‹</p>
<p>æ•°æ®åº“è¡¨é€šå¸¸æœ‰ä¸€åˆ—æˆ–åˆ—ç»„åˆï¼Œå…¶å€¼ç”¨æ¥å”¯ä¸€æ ‡è¯†è¡¨ä¸­çš„æ¯ä¸€è¡Œã€‚è¯¥åˆ—ç§°ä¸ºè¡¨çš„ä¸»é”® åœ¨æ•°æ®åº“å…³ç³»å›¾ä¸­ä¸ºè¡¨å®šä¹‰ä¸€ä¸ªä¸»é”®å°†è‡ªåŠ¨åˆ›å»ºä¸»é”®ç´¢å¼•ï¼Œä¸»é”®ç´¢å¼•æ˜¯å”¯ä¸€ç´¢å¼•çš„ç‰¹æ®Šç±»å‹ã€‚ä¸»é”®ç´¢å¼•è¦æ±‚ä¸»é”®ä¸­çš„æ¯ä¸ªå€¼æ˜¯å”¯ä¸€çš„ã€‚å½“åœ¨æŸ¥è¯¢ä¸­ä½¿ç”¨ä¸»é”®ç´¢å¼•æ—¶ï¼Œå®ƒè¿˜å…è®¸å¿«é€Ÿè®¿é—®æ•°æ® </p>
<p>å®ƒä»¬çš„ä¸€äº›æ¯”è¾ƒï¼š </p>
<ol>
<li><p>å¯¹äºä¸»é”® MySQL ä¼šè‡ªåŠ¨å»ºç«‹å”¯ä¸€ç´¢å¼•ï¼›</p>
</li>
<li><p>ä¸»é”®ä¸ä¸€å®šåªåŒ…å«ä¸€ä¸ªå­—æ®µï¼Œæ‰€ä»¥å¯ä»¥åœ¨ä¸»é”®çš„å…¶ä¸­ä¸€ä¸ªå­—æ®µå»ºå”¯ä¸€ç´¢å¼•ï¼› </p>
</li>
<li><p>ä¸»é”®å¯ä½œå¤–é”®ï¼Œå”¯ä¸€ç´¢å¼•ä¸å¯ï¼›</p>
</li>
<li><p>ä¸»é”®ä¸å¯ä¸ºç©ºï¼Œå”¯ä¸€ç´¢å¼•å¯ï¼› </p>
</li>
<li><p>ä¸»é”®ä¹Ÿå¯æ˜¯å¤šä¸ªå­—æ®µçš„ç»„åˆï¼› </p>
</li>
</ol>
<p>ä¸»é”®ä¸å”¯ä¸€ç´¢å¼•ä¸åŒçš„æ˜¯ï¼š </p>
<ol>
<li><p>æœ‰not nullå±æ€§ï¼› </p>
</li>
<li><p>æ¯ä¸ªè¡¨åªèƒ½æœ‰ä¸€ä¸ªã€‚</p>
</li>
</ol>
]]></content>
      <categories>
        <category>æ•°æ®åº“</category>
      </categories>
      <tags>
        <tag>æ•°æ®åº“</tag>
      </tags>
  </entry>
  <entry>
    <title>æ¶ˆæ¯é˜Ÿåˆ—</title>
    <url>/2020/08/04/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/</url>
    <content><![CDATA[<h3 id="ä»€ä¹ˆæ˜¯æ¶ˆæ¯é˜Ÿåˆ—"><a href="#ä»€ä¹ˆæ˜¯æ¶ˆæ¯é˜Ÿåˆ—" class="headerlink" title="ä»€ä¹ˆæ˜¯æ¶ˆæ¯é˜Ÿåˆ—"></a>ä»€ä¹ˆæ˜¯æ¶ˆæ¯é˜Ÿåˆ—</h3><p>å¯ä»¥æŠŠæ¶ˆæ¯é˜Ÿåˆ—æ¯”ä½œæ˜¯ä¸€ä¸ªå­˜æ”¾æ¶ˆæ¯çš„å®¹å™¨ã€‚æ¶ˆæ¯é˜Ÿåˆ—æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿä¸­é‡è¦çš„ç»„ä»¶ï¼Œä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ä¸»è¦æ˜¯ä¸ºäº†é€šè¿‡å¼‚æ­¥å¤„ç†æé«˜ç³»ç»Ÿæ€§èƒ½å’Œå‰Šå³°ã€é™ä½ç³»ç»Ÿè€¦åˆæ€§ã€‚ç›®å‰ä½¿ç”¨è¾ƒå¤šçš„æ¶ˆæ¯é˜Ÿåˆ—æœ‰ActiveMQï¼ŒRabbitMQï¼ŒKafkaï¼ŒRocketMQã€‚</p>
<p>å¦å¤–ï¼Œé˜Ÿåˆ—Queueæ˜¯ä¸€ç§å…ˆè¿›å…ˆå‡ºçš„æ•°æ®ç»“æ„ï¼Œæ‰€ä»¥æ¶ˆè´¹æ¶ˆæ¯æ—¶ä¹Ÿæ˜¯æŒ‰ç…§é¡ºåºæ¥æ¶ˆè´¹çš„ã€‚æ¯”å¦‚ç”Ÿäº§è€…å‘é€æ¶ˆæ¯1,2,3â€¦å¯¹äºæ¶ˆè´¹è€…å°±ä¼šæŒ‰ç…§1,2,3â€¦çš„é¡ºåºæ¥æ¶ˆè´¹ã€‚ä½†æ˜¯å¶å°”ä¹Ÿä¼šå‡ºç°æ¶ˆæ¯è¢«æ¶ˆè´¹çš„é¡ºåºä¸å¯¹çš„æƒ…å†µï¼Œæ¯”å¦‚æŸä¸ªæ¶ˆæ¯æ¶ˆè´¹å¤±è´¥åˆæˆ–è€…ä¸€ä¸ªqueueå¤šä¸ªconsumerä¹Ÿä¼šå¯¼è‡´æ¶ˆæ¯è¢«æ¶ˆè´¹çš„é¡ºåºä¸å¯¹ï¼Œæˆ‘ä»¬ä¸€å®šè¦ä¿è¯æ¶ˆæ¯è¢«æ¶ˆè´¹çš„é¡ºåºæ­£ç¡®ã€‚</p>
<p>é™¤äº†ä¸Šé¢è¯´çš„æ¶ˆæ¯æ¶ˆè´¹é¡ºåºçš„é—®é¢˜ï¼Œä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ï¼Œè¿˜è¦è€ƒè™‘å¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸è¢«é‡å¤æ¶ˆè´¹ï¼Ÿå¦‚ä½•ä¿è¯æ¶ˆæ¯çš„å¯é æ€§ä¼ è¾“ï¼ˆå¦‚ä½•å¤„ç†æ¶ˆæ¯ä¸¢å¤±çš„é—®é¢˜ï¼‰ï¼Ÿâ€¦â€¦ç­‰ç­‰é—®é¢˜ã€‚æ‰€ä»¥è¯´ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ä¹Ÿä¸æ˜¯åå…¨åç¾çš„ï¼Œä½¿ç”¨å®ƒä¹Ÿä¼šè®©ç³»ç»Ÿå¯ç”¨æ€§é™ä½ã€å¤æ‚åº¦æé«˜ï¼Œå¦å¤–éœ€è¦æˆ‘ä»¬ä¿éšœä¸€è‡´æ€§ç­‰é—®é¢˜ã€‚</p>
<h3 id="ä¸ºä»€ä¹ˆè¦ç”¨æ¶ˆæ¯é˜Ÿåˆ—"><a href="#ä¸ºä»€ä¹ˆè¦ç”¨æ¶ˆæ¯é˜Ÿåˆ—" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ç”¨æ¶ˆæ¯é˜Ÿåˆ—"></a>ä¸ºä»€ä¹ˆè¦ç”¨æ¶ˆæ¯é˜Ÿåˆ—</h3><p>ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ä¸»è¦æœ‰ä¸¤ç‚¹å¥½å¤„ï¼š</p>
<ol>
<li>é€šè¿‡å¼‚æ­¥å¤„ç†æé«˜ç³»ç»Ÿæ€§èƒ½ï¼ˆå‰Šå³°ã€å‡å°‘å“åº”æ‰€éœ€æ—¶é—´ï¼‰ï¼›</li>
<li>é™ä½ç³»ç»Ÿè€¦åˆæ€§ã€‚</li>
</ol>
<p><strong>ï¼ˆ1ï¼‰é€šè¿‡å¼‚æ­¥å¤„ç†æé«˜ç³»ç»Ÿæ€§èƒ½ï¼ˆå‰Šå³°ã€å‡å°‘å“åº”æ‰€éœ€æ—¶é—´)</strong></p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/04/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/content1.png" class title="æ¶ˆæ¯é˜Ÿåˆ—1">
<p>å¦‚ä¸Šå›¾ï¼Œ<strong>åœ¨ä¸ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡å™¨çš„æ—¶å€™ï¼Œç”¨æˆ·çš„è¯·æ±‚æ•°æ®ç›´æ¥å†™å…¥æ•°æ®åº“ï¼Œåœ¨é«˜å¹¶å‘çš„æƒ…å†µä¸‹æ•°æ®åº“å‹åŠ›å‰§å¢ï¼Œä½¿å¾—å“åº”é€Ÿåº¦å˜æ…¢ã€‚ä½†æ˜¯åœ¨ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ä¹‹åï¼Œç”¨æˆ·çš„è¯·æ±‚å‘é€ç»™æ¶ˆæ¯é˜Ÿåˆ—ä¹‹åç«‹å³è¿”å›ï¼Œå†ç”±æ¶ˆæ¯é˜Ÿåˆ—çš„æ¶ˆè´¹è€…è¿›ç¨‹ä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­è·å–æ•°æ®ï¼Œå¼‚æ­¥å†™å…¥æ•°æ®åº“ã€‚ç”±äºæ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡å™¨å¤„ç†é€Ÿåº¦å¿«äºæ•°æ®åº“ï¼ˆæ¶ˆæ¯é˜Ÿåˆ—ä¹Ÿæ¯”æ•°æ®åº“æœ‰æ›´å¥½çš„ä¼¸ç¼©æ€§ï¼‰ï¼Œå› æ­¤å“åº”é€Ÿåº¦å¾—åˆ°å¤§å¹…æ”¹å–„</strong>ã€‚</p>
<p>é€šè¿‡ä»¥ä¸Šåˆ†æå¯ä»¥å¾—å‡º<strong>æ¶ˆæ¯é˜Ÿåˆ—å…·æœ‰å¾ˆå¥½çš„å‰Šå³°ä½œç”¨çš„åŠŸèƒ½â€”â€”å³é€šè¿‡å¼‚æ­¥å¤„ç†ï¼Œå°†çŸ­æ—¶é—´é«˜å¹¶å‘äº§ç”Ÿçš„äº‹åŠ¡æ¶ˆæ¯å­˜å‚¨åœ¨æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œä»è€Œå‰Šå¹³é«˜å³°æœŸçš„å¹¶å‘äº‹åŠ¡</strong>ã€‚ä¸¾ä¾‹ï¼šåœ¨ç”µå­å•†åŠ¡ä¸€äº›ç§’æ€ã€ä¿ƒé”€æ´»åŠ¨ä¸­ï¼Œåˆç†ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—å¯ä»¥æœ‰æ•ˆæŠµå¾¡ä¿ƒé”€æ´»åŠ¨åˆšå¼€å§‹å¤§é‡è®¢å•æ¶Œå…¥å¯¹ç³»ç»Ÿçš„å†²å‡»ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/04/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/content2.png" class title="content2">
<p>å› ä¸º<strong>ç”¨æˆ·è¯·æ±‚æ•°æ®å†™å…¥æ¶ˆæ¯é˜Ÿåˆ—ä¹‹åå°±ç«‹å³è¿”å›ç»™ç”¨æˆ·äº†ï¼Œä½†æ˜¯è¯·æ±‚æ•°æ®åœ¨åç»­çš„ä¸šåŠ¡æ ¡éªŒã€å†™æ•°æ®åº“ç­‰æ“ä½œä¸­å¯èƒ½å¤±è´¥</strong>ã€‚å› æ­¤ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—è¿›è¡Œå¼‚æ­¥å¤„ç†ä¹‹åï¼Œéœ€è¦<strong>é€‚å½“ä¿®æ”¹ä¸šåŠ¡æµç¨‹è¿›è¡Œé…åˆ</strong>ï¼Œæ¯”å¦‚<strong>ç”¨æˆ·åœ¨æäº¤è®¢å•ä¹‹åï¼Œè®¢å•æ•°æ®å†™å…¥æ¶ˆæ¯é˜Ÿåˆ—ï¼Œä¸èƒ½ç«‹å³è¿”å›ç”¨æˆ·è®¢å•æäº¤æˆåŠŸï¼Œéœ€è¦åœ¨æ¶ˆæ¯é˜Ÿåˆ—çš„è®¢å•æ¶ˆè´¹è€…è¿›ç¨‹çœŸæ­£å¤„ç†å®Œè¯¥è®¢å•ä¹‹åï¼Œç”šè‡³å‡ºåº“åï¼Œå†é€šè¿‡ç”µå­é‚®ä»¶æˆ–çŸ­ä¿¡é€šçŸ¥ç”¨æˆ·è®¢å•æˆåŠŸ</strong>ï¼Œä»¥å…äº¤æ˜“çº çº·ã€‚è¿™å°±ç±»ä¼¼æˆ‘ä»¬å¹³æ—¶æ‰‹æœºè®¢ç«è½¦ç¥¨å’Œç”µå½±ç¥¨ã€‚</p>
<p><strong>ï¼ˆ2ï¼‰é™ä½ç³»ç»Ÿè€¦åˆæ€§</strong><br>å¦‚æœæ¨¡å—ä¹‹é—´ä¸å­˜åœ¨ç›´æ¥è°ƒç”¨ï¼Œé‚£ä¹ˆæ–°å¢æ¨¡å—æˆ–è€…ä¿®æ”¹æ¨¡å—å°±å¯¹å…¶ä»–æ¨¡å—å½±å“è¾ƒå°ï¼Œè¿™æ ·ç³»ç»Ÿçš„å¯æ‰©å±•æ€§æ— ç–‘æ›´å¥½ä¸€äº›ã€‚<br>æœ€å¸¸è§çš„<strong>äº‹ä»¶é©±åŠ¨æ¶æ„</strong>ç±»ä¼¼ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼ï¼Œåœ¨å¤§å‹ç½‘ç«™ä¸­é€šå¸¸ç”¨åˆ©ç”¨æ¶ˆæ¯é˜Ÿåˆ—å®ç°äº‹ä»¶é©±åŠ¨ç»“æ„ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/04/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/content3.png" class title="content3">
<p><strong>æ¶ˆæ¯é˜Ÿåˆ—ä½¿åˆ©ç”¨å‘å¸ƒ-è®¢é˜…æ¨¡å¼å·¥ä½œï¼Œæ¶ˆæ¯å‘é€è€…ï¼ˆç”Ÿäº§è€…ï¼‰å‘å¸ƒæ¶ˆæ¯ï¼Œä¸€ä¸ªæˆ–å¤šä¸ªæ¶ˆæ¯æ¥æ”¶è€…ï¼ˆæ¶ˆè´¹è€…ï¼‰è®¢é˜…æ¶ˆæ¯</strong>ã€‚ä»ä¸Šå›¾å¯ä»¥çœ‹åˆ°<strong>æ¶ˆæ¯å‘é€è€…ï¼ˆç”Ÿäº§è€…ï¼‰å’Œæ¶ˆæ¯æ¥æ”¶è€…ï¼ˆæ¶ˆè´¹è€…ï¼‰ä¹‹é—´æ²¡æœ‰ç›´æ¥è€¦åˆ</strong>ï¼Œæ¶ˆæ¯å‘é€è€…å°†æ¶ˆæ¯å‘é€è‡³åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—å³ç»“æŸå¯¹æ¶ˆæ¯çš„å¤„ç†ï¼Œæ¶ˆæ¯æ¥æ”¶è€…ä»åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—è·å–è¯¥æ¶ˆæ¯åè¿›è¡Œåç»­å¤„ç†ï¼Œå¹¶ä¸éœ€è¦çŸ¥é“è¯¥æ¶ˆæ¯ä»ä½•è€Œæ¥ã€‚<strong>å¯¹æ–°å¢ä¸šåŠ¡ï¼Œåªè¦å¯¹è¯¥ç±»æ¶ˆæ¯æ„Ÿå…´è¶£ï¼Œå³å¯è®¢é˜…è¯¥æ¶ˆæ¯ï¼Œå¯¹åŸæœ‰ç³»ç»Ÿå’Œä¸šåŠ¡æ²¡æœ‰ä»»ä½•å½±å“ï¼Œä»è€Œå®ç°ç½‘ç«™ä¸šåŠ¡çš„å¯æ‰©å±•æ€§è®¾è®¡</strong>ã€‚<br>æ¶ˆæ¯æ¥æ”¶è€…å¯¹æ¶ˆæ¯è¿›è¡Œè¿‡æ»¤ã€å¤„ç†ã€åŒ…è£…åï¼Œæ„é€ æˆä¸€ä¸ªæ–°çš„æ¶ˆæ¯ç±»å‹ï¼Œå°†æ¶ˆæ¯ç»§ç»­å‘é€å‡ºå»ï¼Œç­‰å¾…å…¶ä»–æ¶ˆæ¯æ¥å—è€…è®¢é˜…è¯¥æ¶ˆæ¯ã€‚å› æ­¤åŸºäºäº‹ä»¶ï¼ˆæ¶ˆæ¯å¯¹è±¡ï¼‰é©±åŠ¨çš„ä¸šåŠ¡æ¶æ„å¯ä»¥æ˜¯ä¸€ç³»åˆ—æµç¨‹ã€‚</p>
<p><strong>å¦å¤–ä¸ºäº†é¿å…æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡å™¨å®•æœºé€ æˆæ¶ˆæ¯ä¸¢å¤±ï¼Œä¼šå°†æˆåŠŸå‘é€åˆ°æ¶ˆæ¯é˜Ÿåˆ—çš„æ¶ˆæ¯å­˜å‚¨åœ¨æ¶ˆæ¯ç”Ÿäº§è€…æœåŠ¡å™¨ä¸Šï¼Œç­‰æ¶ˆæ¯çœŸæ­£è¢«æ¶ˆè´¹è€…æœåŠ¡å™¨å¤„ç†åæ‰åˆ é™¤æ¶ˆæ¯ã€‚åœ¨æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡å™¨å®•æœºåï¼Œç”Ÿäº§è€…æœåŠ¡å™¨ä¼šé€‰æ‹©åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡å™¨é›†ç¾¤ä¸­çš„å…¶ä»–æœåŠ¡å™¨å‘å¸ƒæ¶ˆæ¯</strong>ã€‚</p>
<p><strong>å¤‡æ³¨</strong>ï¼šä¸è¦è®¤ä¸ºæ¶ˆæ¯é˜Ÿåˆ—åªèƒ½åˆ©ç”¨å‘å¸ƒ-è®¢é˜…æ¨¡å¼å·¥ä½œï¼Œåªä¸è¿‡åœ¨è§£è€¦è¿™ä¸ªç‰¹å®šä¸šåŠ¡ç¯å¢ƒä¸‹æ˜¯ä½¿ç”¨å‘å¸ƒ-è®¢é˜…æ¨¡å¼çš„ã€‚<strong>é™¤äº†å‘å¸ƒ-è®¢é˜…æ¨¡å¼ï¼Œè¿˜æœ‰ç‚¹å¯¹ç‚¹è®¢é˜…æ¨¡å¼ï¼ˆä¸€ä¸ªæ¶ˆæ¯åªæœ‰ä¸€ä¸ªæ¶ˆè´¹è€…ï¼‰ï¼Œæˆ‘ä»¬æ¯”è¾ƒå¸¸ç”¨çš„æ˜¯å‘å¸ƒ-è®¢é˜…æ¨¡å¼</strong>ã€‚å¦å¤–ï¼Œè¿™ä¸¤è€…æ¶ˆæ¯æ¨¡å‹æ˜¯JMSæä¾›çš„ï¼ŒAMQPåè®®è¿˜æä¾›äº†5ç§æ¶ˆæ¯æ¨¡å‹ã€‚</p>
<h3 id="ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—å¸¦æ¥çš„ä¸€äº›é—®é¢˜"><a href="#ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—å¸¦æ¥çš„ä¸€äº›é—®é¢˜" class="headerlink" title="ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—å¸¦æ¥çš„ä¸€äº›é—®é¢˜"></a>ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—å¸¦æ¥çš„ä¸€äº›é—®é¢˜</h3><ul>
<li>ç³»ç»Ÿå¯ç”¨æ€§é™ä½ï¼šç³»ç»Ÿå¯ç”¨æ€§åœ¨æŸç§ç¨‹åº¦ä¸Šé™ä½ï¼Œåœ¨åŠ å…¥MQä¹‹å‰ï¼Œä¸ç”¨è€ƒè™‘æ¶ˆæ¯ä¸¢å¤±æˆ–è€…è¯´MQæŒ‚æ‰ç­‰ç­‰çš„æƒ…å†µï¼Œä½†æ˜¯ï¼Œå¼•å…¥MQä¹‹åå°±éœ€è¦å»è€ƒè™‘äº†ï¼</li>
<li>ç³»ç»Ÿå¤æ‚æ€§æé«˜ï¼šåŠ å…¥MQä¹‹åï¼Œä½ éœ€è¦ä¿è¯æ¶ˆæ¯æ²¡æœ‰è¢«é‡å¤æ¶ˆè´¹ã€å¤„ç†æ¶ˆæ¯ä¸¢å¤±çš„æƒ…å†µã€ä¿è¯æ¶ˆæ¯ä¼ é€’çš„é¡ºåºæ€§ç­‰ç­‰é—®é¢˜ï¼</li>
<li>ä¸€è‡´æ€§é—®é¢˜ï¼šä¸Šé¢è®²äº†æ¶ˆæ¯é˜Ÿåˆ—å¯ä»¥å®ç°å¼‚æ­¥ï¼Œæ¶ˆæ¯é˜Ÿåˆ—å¸¦æ¥çš„å¼‚æ­¥ç¡®å®å¯ä»¥æé«˜ç³»ç»Ÿå“åº”é€Ÿåº¦ã€‚ä½†æ˜¯ï¼Œä¸‡ä¸€æ¶ˆæ¯çš„çœŸæ­£æ¶ˆè´¹è€…å¹¶æ²¡æœ‰æ­£ç¡®æ¶ˆè´¹æ¶ˆæ¯æ€ä¹ˆåŠï¼Ÿè¿™æ ·å°±ä¼šå¯¼è‡´æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µäº†ï¼</li>
</ul>
<h3 id="JMS-VS-AMQP"><a href="#JMS-VS-AMQP" class="headerlink" title="JMS VS AMQP"></a>JMS VS AMQP</h3><h4 id="JMSç®€ä»‹"><a href="#JMSç®€ä»‹" class="headerlink" title="JMSç®€ä»‹"></a>JMSç®€ä»‹</h4><p>JMSï¼ˆJAVA Message Serviceï¼Œjavaæ¶ˆæ¯æœåŠ¡ï¼‰æ˜¯Javaçš„æ¶ˆæ¯æœåŠ¡ï¼ŒJMSçš„å®¢æˆ·ç«¯ä¹‹é—´å¯ä»¥é€šè¿‡JMSæœåŠ¡è¿›è¡Œå¼‚æ­¥çš„æ¶ˆæ¯ä¼ è¾“ã€‚<strong>JMS APIæ˜¯ä¸€ä¸ªæ¶ˆæ¯æœåŠ¡çš„æ ‡å‡†æˆ–è€…è¯´æ˜¯è§„èŒƒ</strong>ï¼Œå…è®¸åº”ç”¨ç¨‹åºç»„ä»¶åŸºäºJavaEEå¹³å°åˆ›å»ºã€å‘é€ã€æ¥æ”¶å’Œè¯»å–æ¶ˆæ¯ã€‚å®ƒä½¿åˆ†å¸ƒå¼é€šä¿¡è€¦åˆåº¦æ›´ä½ï¼Œæ¶ˆæ¯æœåŠ¡æ›´åŠ å¯é ä»¥åŠå¼‚æ­¥æ€§ã€‚<br><strong>ActiveMQå°±æ˜¯åŸºäºJMSè§„èŒƒå®ç°çš„</strong>ã€‚</p>
<h4 id="JMSä¸¤ç§æ¶ˆæ¯æ¨¡å‹"><a href="#JMSä¸¤ç§æ¶ˆæ¯æ¨¡å‹" class="headerlink" title="JMSä¸¤ç§æ¶ˆæ¯æ¨¡å‹"></a>JMSä¸¤ç§æ¶ˆæ¯æ¨¡å‹</h4><ol>
<li><p>ç‚¹åˆ°ç‚¹ï¼ˆP2Pï¼‰æ¨¡å‹</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/04/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/content4.png" class title="content4">
<p>ä½¿ç”¨<strong>é˜Ÿåˆ—ï¼ˆQueueï¼‰</strong>ä½œä¸ºæ¶ˆæ¯é€šä¿¡è½½ä½“ï¼›æ»¡è¶³<strong>ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…æ¨¡å¼</strong>ï¼Œä¸€æ¡æ¶ˆæ¯åªèƒ½è¢«ä¸€ä¸ªæ¶ˆè´¹è€…ä½¿ç”¨ï¼Œæœªè¢«æ¶ˆè´¹çš„æ¶ˆæ¯åœ¨é˜Ÿåˆ—ä¸­ä¿ç•™ç›´åˆ°è¢«æ¶ˆè´¹æˆ–è¶…æ—¶ã€‚æ¯”å¦‚ï¼šç”Ÿäº§è€…å‘é€100æ¡æ¶ˆæ¯çš„è¯ï¼Œä¸¤ä¸ªæ¶ˆè´¹è€…æ¥æ¶ˆè´¹ä¸€èˆ¬æƒ…å†µä¸‹ä¸¤ä¸ªæ¶ˆè´¹è€…ä¼šæŒ‰ç…§æ¶ˆæ¯å‘é€çš„é¡ºåºå„è‡ªæ¶ˆè´¹ä¸€åŠï¼ˆä¹Ÿå°±æ˜¯ä½ ä¸€ä¸ªæˆ‘ä¸€ä¸ªçš„æ¶ˆè´¹ï¼‰</p>
</li>
<li><p>å‘å¸ƒ/è®¢é˜…ï¼ˆPub/Subï¼‰æ¨¡å‹</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/04/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/content5.png" class title="content5">
<p>å‘å¸ƒè®¢é˜…æ¨¡å‹ï¼ˆPub/Subï¼‰ä½¿ç”¨<strong>ä¸»é¢˜ï¼ˆTopicï¼‰</strong>ä½œä¸ºæ¶ˆæ¯é€šä¿¡è½½ä½“ï¼Œç±»ä¼¼äºå¹¿æ’­æ¨¡å¼ï¼›å‘å¸ƒè€…å‘å¸ƒä¸€æ¡æ¶ˆæ¯ï¼Œè¯¥æ¶ˆæ¯é€šè¿‡ä¸»é¢˜ä¼ é€’ç»™æ‰€æœ‰çš„è®¢é˜…è€…ï¼Œ<strong>åœ¨ä¸€æ¡æ¶ˆæ¯å¹¿æ’­ä¹‹åæ‰è®¢é˜…çš„ç”¨æˆ·åˆ™æ˜¯æ”¶ä¸åˆ°è¯¥æ¡æ¶ˆæ¯çš„</strong>ã€‚</p>
</li>
</ol>
<h4 id="JMSäº”ç§ä¸åŒçš„æ¶ˆæ¯æ­£æ–‡æ ¼å¼"><a href="#JMSäº”ç§ä¸åŒçš„æ¶ˆæ¯æ­£æ–‡æ ¼å¼" class="headerlink" title="JMSäº”ç§ä¸åŒçš„æ¶ˆæ¯æ­£æ–‡æ ¼å¼"></a>JMSäº”ç§ä¸åŒçš„æ¶ˆæ¯æ­£æ–‡æ ¼å¼</h4><p>JMSå®šä¹‰äº†äº”ç§ä¸åŒçš„æ¶ˆæ¯æ­£æ–‡æ ¼å¼ï¼Œä»¥åŠè°ƒç”¨çš„æ¶ˆæ¯ç±»å‹ï¼Œå…è®¸ä½ å‘é€å¹¶æ¥æ”¶ä»¥ä¸€äº›ä¸åŒå½¢å¼çš„æ•°æ®ï¼Œæä¾›ç°æœ‰çš„æ¶ˆæ¯æ ¼å¼çš„ä¸€äº›çº§åˆ«çš„å…¼å®¹æ€§ã€‚</p>
<ul>
<li>StreamMessage â€“ JavaåŸå§‹å€¼çš„æ•°æ®æµ</li>
<li>MapMessage â€“ ä¸€å¥—åç§°-å€¼å¯¹</li>
<li>TextMessage â€“ ä¸€å¥—å­—ç¬¦ä¸²å¯¹è±¡</li>
<li>ObjectMessage â€“ ä¸€ä¸ªåºåˆ—åŒ–çš„Javaå¯¹è±¡</li>
<li>BytesMessage â€“ ä¸€ä¸ªå­—èŠ‚çš„æ•°æ®æµ</li>
</ul>
<h4 id="AMQP"><a href="#AMQP" class="headerlink" title="AMQP"></a>AMQP</h4><p>AMQPï¼Œå³Advanced Message Queuing Protocolï¼Œä¸€ä¸ªæä¾›ç»Ÿä¸€æ¶ˆæ¯æœåŠ¡çš„åº”ç”¨å±‚æ ‡å‡†<strong>é«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®®</strong>ï¼ˆäºŒè¿›åˆ¶åº”ç”¨å±‚åè®®ï¼‰ï¼Œæ˜¯åº”ç”¨å±‚åè®®çš„ä¸€ä¸ªå¼€æ”¾æ ‡å‡†ï¼Œä¸ºé¢å‘æ¶ˆæ¯çš„ä¸­é—´ä»¶è®¾è®¡ï¼Œå…¼å®¹JMSã€‚åŸºäºæ­¤åè®®çš„å®¢æˆ·ç«¯ä¸æ¶ˆæ¯ä¸­é—´ä»¶å¯ä¼ é€’æ¶ˆæ¯ï¼Œå¹¶ä¸å—å®¢æˆ·ç«¯/ä¸­é—´ä»¶åŒäº§å“ï¼Œä¸åŒçš„å¼€å‘è¯­è¨€ç­‰æ¡ä»¶çš„é™åˆ¶ã€‚<br><strong>RabbitMQå°±æ˜¯åŸºäºAMQPåè®®å®ç°çš„ã€‚</strong></p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/04/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/content6.png" class title="content6">
<p><strong>æ€»ç»“ï¼š</strong></p>
<ul>
<li>AMQPä¸ºæ¶ˆæ¯å®šä¹‰äº†çº¿è·¯å±‚ï¼ˆwire-level protocolï¼‰çš„åè®®ï¼Œè€ŒJMSæ‰€å®šä¹‰çš„æ˜¯APIè§„èŒƒã€‚åœ¨Javaä½“ç³»ä¸­ï¼Œå¤šä¸ªclientå‡å¯ä»¥é€šè¿‡JMSè¿›è¡Œäº¤äº’ï¼Œä¸éœ€è¦åº”ç”¨ä¿®æ”¹ä»£ç ï¼Œä½†æ˜¯å…¶å¯¹è·¨å¹³å°çš„æ”¯æŒè¾ƒå·®ã€‚è€ŒAMQPå¤©ç„¶å…·æœ‰è·¨å¹³å°ã€è·¨è¯­è¨€ç‰¹æ€§</li>
<li>JMS æ”¯æŒTextMessageã€MapMessage ç­‰å¤æ‚çš„æ¶ˆæ¯ç±»å‹ï¼›è€Œ AMQP ä»…æ”¯æŒ byte[] æ¶ˆæ¯ç±»å‹ï¼ˆå¤æ‚çš„ç±»å‹å¯åºåˆ—åŒ–åå‘é€ï¼‰</li>
<li>ç”±äºExchange æä¾›çš„è·¯ç”±ç®—æ³•ï¼ŒAMQPå¯ä»¥æä¾›å¤šæ ·åŒ–çš„è·¯ç”±æ–¹å¼æ¥ä¼ é€’æ¶ˆæ¯åˆ°æ¶ˆæ¯é˜Ÿåˆ—ï¼Œè€Œ JMS ä»…æ”¯æŒé˜Ÿåˆ—å’Œä¸»é¢˜/è®¢é˜…æ–¹å¼ä¸¤ç§</li>
</ul>
<h3 id="å¸¸è§çš„æ¶ˆæ¯é˜Ÿåˆ—å¯¹æ¯”"><a href="#å¸¸è§çš„æ¶ˆæ¯é˜Ÿåˆ—å¯¹æ¯”" class="headerlink" title="å¸¸è§çš„æ¶ˆæ¯é˜Ÿåˆ—å¯¹æ¯”"></a>å¸¸è§çš„æ¶ˆæ¯é˜Ÿåˆ—å¯¹æ¯”</h3><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/04/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/content7.png" class title="content7">
<p>æ€»ç»“ï¼š</p>
<ul>
<li>ActiveMQ çš„ç¤¾åŒºç®—æ˜¯æ¯”è¾ƒæˆç†Ÿï¼Œä½†æ˜¯è¾ƒç›®å‰æ¥è¯´ï¼ŒActiveMQ çš„æ€§èƒ½æ¯”è¾ƒå·®ï¼Œè€Œä¸”ç‰ˆæœ¬è¿­ä»£å¾ˆæ…¢ï¼Œä¸æ¨èä½¿ç”¨</li>
<li>RabbitMQ åœ¨ååé‡æ–¹é¢è™½ç„¶ç¨é€Šäº Kafka å’Œ RocketMQ ï¼Œä½†æ˜¯ç”±äºå®ƒåŸºäº erlang å¼€å‘ï¼Œæ‰€ä»¥å¹¶å‘èƒ½åŠ›å¾ˆå¼ºï¼Œæ€§èƒ½æå…¶å¥½ï¼Œå»¶æ—¶å¾ˆä½ï¼Œè¾¾åˆ°å¾®ç§’çº§ã€‚</li>
<li>RocketMQ é˜¿é‡Œå‡ºå“ï¼ŒJava ç³»å¼€æºé¡¹ç›®ï¼Œæºä»£ç æˆ‘ä»¬å¯ä»¥ç›´æ¥é˜…è¯»ï¼Œç„¶åå¯ä»¥å®šåˆ¶è‡ªå·±å…¬å¸çš„MQï¼Œå¹¶ä¸” RocketMQ æœ‰é˜¿é‡Œå·´å·´çš„å®é™…ä¸šåŠ¡åœºæ™¯çš„å®æˆ˜è€ƒéªŒã€‚RocketMQ ç¤¾åŒºæ´»è·ƒåº¦ç›¸å¯¹è¾ƒä¸ºä¸€èˆ¬ï¼Œä¸è¿‡ä¹Ÿè¿˜å¯ä»¥ï¼Œæ–‡æ¡£ç›¸å¯¹æ¥è¯´ç®€å•ä¸€äº›ï¼Œç„¶åæ¥å£è¿™å—ä¸æ˜¯æŒ‰ç…§æ ‡å‡† JMS è§„èŒƒèµ°çš„æœ‰äº›ç³»ç»Ÿè¦è¿ç§»éœ€è¦ä¿®æ”¹å¤§é‡ä»£ç ã€‚è¿˜æœ‰å°±æ˜¯é˜¿é‡Œå‡ºå°çš„æŠ€æœ¯ï¼Œä½ å¾—åšå¥½è¿™ä¸ªæŠ€æœ¯ä¸‡ä¸€è¢«æŠ›å¼ƒï¼Œç¤¾åŒºé»„æ‰çš„é£é™©ï¼Œé‚£å¦‚æœä½ ä»¬å…¬å¸æœ‰æŠ€æœ¯å®åŠ›æˆ‘è§‰å¾—ç”¨RocketMQ æŒºå¥½çš„</li>
<li>kafka çš„ç‰¹ç‚¹å…¶å®å¾ˆæ˜æ˜¾ï¼Œå°±æ˜¯ä»…ä»…æä¾›è¾ƒå°‘çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œä½†æ˜¯æä¾›è¶…é«˜çš„ååé‡ï¼Œms çº§çš„å»¶è¿Ÿï¼Œæé«˜çš„å¯ç”¨æ€§ä»¥åŠå¯é æ€§ï¼Œè€Œä¸”åˆ†å¸ƒå¼å¯ä»¥ä»»æ„æ‰©å±•ã€‚åŒæ—¶ kafka æœ€å¥½æ˜¯æ”¯æ’‘è¾ƒå°‘çš„ topic æ•°é‡å³å¯ï¼Œä¿è¯å…¶è¶…é«˜ååé‡ã€‚kafka å”¯ä¸€çš„ä¸€ç‚¹åŠ£åŠ¿æ˜¯æœ‰å¯èƒ½æ¶ˆæ¯é‡å¤æ¶ˆè´¹ï¼Œé‚£ä¹ˆå¯¹æ•°æ®å‡†ç¡®æ€§ä¼šé€ æˆæå…¶è½»å¾®çš„å½±å“ï¼Œåœ¨å¤§æ•°æ®é¢†åŸŸä¸­ä»¥åŠæ—¥å¿—é‡‡é›†ä¸­ï¼Œè¿™ç‚¹è½»å¾®å½±å“å¯ä»¥å¿½ç•¥è¿™ä¸ªç‰¹æ€§å¤©ç„¶é€‚åˆå¤§æ•°æ®å®æ—¶è®¡ç®—ä»¥åŠæ—¥å¿—æ”¶é›†ã€‚</li>
</ul>
]]></content>
      <categories>
        <category>Javaè¿›é˜¶</category>
      </categories>
      <tags>
        <tag>æ¶ˆæ¯é˜Ÿåˆ—</tag>
      </tags>
  </entry>
  <entry>
    <title>æ·±å…¥ç†è§£JVM--1.èµ°è¿‘Java</title>
    <url>/2020/09/27/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3JVM--1.%E8%B5%B0%E8%BF%91Java/</url>
    <content><![CDATA[<h3 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p>Javaä¸ä»…ä»…æ˜¯ä¸€é—¨ç¼–ç¨‹è¯­è¨€ï¼Œå®ƒè¿˜æ˜¯ä¸€ä¸ªç”±ä¸€ç³»åˆ—è®¡ç®—æœºè½¯ä»¶å’Œè§„èŒƒç»„æˆçš„æŠ€æœ¯ä½“ç³»ï¼Œè¿™ä¸ªæŠ€æœ¯ä½“ç³»æä¾›äº†å®Œæ•´çš„ç”¨äºè½¯ä»¶å¼€å‘å’Œè·¨å¹³å°éƒ¨ç½²çš„æ”¯æŒç¯å¢ƒï¼Œå¹¶å¹¿æ³›åº”ç”¨äºåµŒå…¥å¼ç³»ç»Ÿã€ç§»åŠ¨ç»ˆç«¯ã€ä¼ä¸šæœåŠ¡å™¨ã€å¤§å‹æœºç­‰å¤šç§åœºåˆã€‚<br>Javaä¼˜åŠ¿ï¼š</p>
<ul>
<li>ç»“æ„ä¸¥è°¨ã€é¢å‘å¯¹è±¡</li>
<li>æ‘†è„±ç¡¬ä»¶å¹³å°çš„æŸç¼šï¼Œå®ç°â€œä¸€æ¬¡ç¼–å†™ã€åˆ°å¤„è¿è¡Œâ€œ</li>
<li>æä¾›ç›¸å¯¹å®‰å…¨çš„å†…å­˜ç®¡ç†å’Œè®¿é—®æœºåˆ¶ï¼Œé¿å…ç»å¤§éƒ¨åˆ†å†…å­˜æ³„æ¼å’ŒæŒ‡é’ˆè¶Šç•Œé—®é¢˜</li>
<li>å®ç°äº†çƒ­ç‚¹ä»£ç æ£€æµ‹å’Œè¿è¡Œæ—¶ç¼–è¯‘åŠä¼˜åŒ–ï¼Œä½¿å¾—Javaåº”ç”¨èƒ½éšç€è¿è¡Œæ—¶é—´çš„å¢é•¿è€Œè·å¾—æ›´é«˜çš„æ€§èƒ½</li>
<li>æœ‰ä¸€å¥—å®Œå–„çš„åº”ç”¨ç¨‹åºæ¥å£ï¼Œè¿˜æœ‰æ— æ•°æ¥è‡ªå•†ä¸šæœºæ„å’Œå¼€æºç¤¾åŒºçš„ç¬¬ä¸‰æ–¹ç±»åº“æ¥å¸®åŠ©ç”¨æˆ·å®ç°å„ç§å„æ ·çš„åŠŸèƒ½</li>
</ul>
<h3 id="JavaæŠ€æœ¯ä½“ç³»"><a href="#JavaæŠ€æœ¯ä½“ç³»" class="headerlink" title="JavaæŠ€æœ¯ä½“ç³»"></a>JavaæŠ€æœ¯ä½“ç³»</h3><p>ç»„æˆéƒ¨åˆ†ï¼š</p>
<ol>
<li>Javaç¨‹åºè®¾è®¡è¯­è¨€</li>
<li>å„ç§ç¡¬ä»¶å¹³å°ä¸Šçš„Javaè™šæ‹Ÿæœºå®ç°</li>
<li>Classæ–‡ä»¶æ ¼å¼</li>
<li>Javaç±»åº“API</li>
<li>æ¥è‡ªå•†ä¸šæœºæ„å’Œå¼€æºç¤¾åŒºçš„ç¬¬ä¸‰æ–¹Javaç±»åº“<br>Javaç¨‹åºè®¾è®¡è¯­è¨€ã€Javaè™šæ‹Ÿæœºã€Javaç±»åº“è¿™ä¸‰éƒ¨åˆ†ç»Ÿç§°ä¸º<strong>JDKï¼ˆJava Development Kitï¼‰ï¼ŒJDKæ˜¯ç”¨äºæ”¯æŒJavaç¨‹åºå¼€å‘çš„æœ€å°ç¯å¢ƒ</strong>ã€‚<br>Javaç±»åº“APIä¸­çš„Java SE APIå­é›†å’ŒJavaè™šæ‹Ÿæœºè¿™ä¸¤éƒ¨åˆ†ç»Ÿç§°ä¸º<strong>JREï¼ˆJava Runtime Environmentï¼‰ï¼ŒJREæ˜¯æ”¯æŒJavaç¨‹åºè¿è¡Œçš„æ ‡å‡†ç¯å¢ƒ</strong>ã€‚</li>
</ol>
<p>äº§å“çº¿ï¼š</p>
<ol>
<li>Java Cardï¼šæ”¯æŒJavaå°ç¨‹åºï¼ˆAppletsï¼‰è¿è¡Œåœ¨å°å†…å­˜è®¾å¤‡ï¼ˆå¦‚æ™ºèƒ½å¡ï¼‰ä¸Šçš„å¹³å°ã€‚</li>
<li>Java ME(Micro Edition)ï¼šæ”¯æŒJavaç¨‹åºè¿è¡Œåœ¨ç§»åŠ¨ç»ˆç«¯ï¼ˆæ‰‹æœºã€PDAï¼‰ä¸Šçš„å¹³å°ã€‚JDK 6ä»¥å‰è¢«ç§°ä¸ºJ2MEã€‚å¤‡æ³¨ï¼šæ™ºèƒ½æ‰‹æœºä¸ŠJavaå¼€å‘çš„Androidåº”ç”¨ä¸å±äºJava MEã€‚</li>
<li>Java SE(Standard Edition)ï¼šæ”¯æŒé¢å‘æ¡Œé¢çº§åº”ç”¨ï¼ˆå¦‚Windowsä¸‹çš„åº”ç”¨ç¨‹åºï¼‰çš„Javaå¹³å°ã€‚JDK 6ä»¥å‰è¢«ç§°ä¸ºJ2SEã€‚</li>
<li>Java EE(Enterprise Edition)ï¼šæ”¯æŒä½¿ç”¨å¤šå±‚æ¶æ„çš„ä¼ä¸šåº”ç”¨ï¼ˆå¦‚ERPã€MISã€CRMåº”ç”¨ï¼‰çš„Javaå¹³å°ã€‚JDK 6ä»¥å‰è¢«ç§°ä¸ºJ2EEï¼Œåœ¨JDK 10ä»¥åè¢«Oracleæ”¾å¼ƒï¼ŒæçŒ®ç»™EclipseåŸºé‡‘ä¼šç®¡ç†ï¼Œæ­¤åè¢«ç§°ä¸ºJakarta EEã€‚</li>
</ol>
]]></content>
      <categories>
        <category>æ·±å…¥ç†è§£JVM</category>
      </categories>
      <tags>
        <tag>JVM</tag>
      </tags>
  </entry>
  <entry>
    <title>æ·±å…¥ç†è§£JVM--2.å†…å­˜åŒºåŸŸä¸å†…å­˜æº¢å‡º</title>
    <url>/2020/09/28/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3JVM--2.%E5%86%85%E5%AD%98%E5%8C%BA%E5%9F%9F%E4%B8%8E%E5%86%85%E5%AD%98%E6%BA%A2%E5%87%BA/</url>
    <content><![CDATA[<h3 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p>Cä¸C++ç¨‹åºå¼€å‘ä¸­ï¼Œåœ¨å†…å­˜ç®¡ç†é¢†åŸŸä¸­ï¼Œå¼€å‘äººå‘˜å³æ‹¥æœ‰æ¯ä¸€ä¸ªå¯¹è±¡çš„â€œæ‰€æœ‰æƒâ€ï¼Œåˆæ‹…è´Ÿç€æ¯ä¸€ä¸ªå¯¹è±¡ç”Ÿå‘½ä»å¼€å§‹åˆ°ç»ˆç»“çš„ç»´æŠ¤è´£ä»»ã€‚<br>Javaç¨‹åºå¼€å‘ä¸­ï¼Œåœ¨è™šæ‹Ÿæœºè‡ªåŠ¨å†…å­˜ç®¡ç†æœºåˆ¶çš„å¸®åŠ©ä¸‹ï¼Œä¸å†éœ€è¦ä¸ºæ¯ä¸€ä¸ªnewæ“ä½œå»å†™é…å¯¹çš„delete/freeä»£ç ï¼Œä¸å®¹æ˜“å‡ºç°å†…å­˜æ³„æ¼å’Œå†…å­˜æº¢å‡ºé—®é¢˜ã€‚ä½†æ˜¯ï¼Œä¸€å‡ºç°å†…å­˜æ³„æ¼å’Œæº¢å‡ºæ–¹é¢çš„é—®é¢˜ï¼Œå¦‚æœä¸äº†è§£è™šæ‹Ÿæœºæ˜¯æ€æ ·ä½¿ç”¨å†…å­˜çš„ï¼Œé‚£æ’æŸ¥é”™è¯¯ã€ä¿®æ­£é—®é¢˜å°†æˆä¸ºä¸€é¡¹å¼‚å¸¸è‰°éš¾çš„å·¥ä½œã€‚<br>Javaä¼˜åŠ¿ï¼š<strong>å†…å­˜åŠ¨æ€åˆ†é…ï¼›åƒåœ¾æ”¶é›†æŠ€æœ¯</strong>ã€‚</p>
<h3 id="è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ"><a href="#è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ" class="headerlink" title="è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ"></a>è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ</h3><p>Javaè™šæ‹Ÿæœºåœ¨æ‰§è¡ŒJavaç¨‹åºçš„è¿‡ç¨‹ä¸­ä¼šæŠŠå®ƒæ‰€ç®¡ç†çš„å†…å­˜åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªä¸åŒçš„æ•°æ®åŒºåŸŸã€‚è¿™äº›åŒºåŸŸæœ‰å„è‡ªçš„ç”¨é€”ï¼Œä»¥åŠåˆ›å»ºå’Œé”€æ¯çš„æ—¶é—´ï¼Œæœ‰çš„åŒºåŸŸéšç€è™šæ‹Ÿæœºè¿›ç¨‹çš„å¯åŠ¨ä¸€ç›´å­˜åœ¨ï¼Œæœ‰äº›åŒºåŸŸåˆ™æ˜¯ä¾èµ–ç”¨æˆ·çº¿ç¨‹çš„å¯åŠ¨å’Œç»“æŸè€Œå»ºç«‹å’Œé”€æ¯ã€‚</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/09/28/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3JVM--2.%E5%86%85%E5%AD%98%E5%8C%BA%E5%9F%9F%E4%B8%8E%E5%86%85%E5%AD%98%E6%BA%A2%E5%87%BA/content1.png" class title="content1">

<h4 id="ç¨‹åºè®¡æ•°å™¨"><a href="#ç¨‹åºè®¡æ•°å™¨" class="headerlink" title="ç¨‹åºè®¡æ•°å™¨"></a>ç¨‹åºè®¡æ•°å™¨</h4><p>ç¨‹åºè®¡æ•°å™¨(Program Counter Register)æ˜¯ä¸€å—è¾ƒå°çš„å†…å­˜ç©ºé—´ï¼Œå®ƒå¯ä»¥çœ‹ä½œæ˜¯å½“å‰çº¿ç¨‹æ‰€æ‰§è¡Œçš„å­—èŠ‚ç çš„è¡Œå·æŒ‡ç¤ºå™¨ã€‚åœ¨Javaè™šæ‹Ÿæœºçš„æ¦‚å¿µæ¨¡å‹é‡Œï¼Œå­—èŠ‚ç è§£é‡Šå™¨å·¥ä½œæ—¶å°±æ˜¯é€šè¿‡æ”¹å˜è¿™ä¸ªè®¡æ•°å™¨çš„å€¼æ¥é€‰å–ä¸‹ä¸€æ¡éœ€è¦æ‰§è¡Œçš„å­—èŠ‚ç æŒ‡ä»¤ï¼Œå®ƒæ˜¯ç¨‹åºæ§åˆ¶æµçš„æŒ‡ç¤ºå™¨ï¼Œåˆ†æ”¯ã€å¾ªç¯ã€è·³è½¬ã€å¼‚å¸¸å¤„ç†ã€çº¿ç¨‹æ¢å¤ç­‰åŸºç¡€åŠŸèƒ½éƒ½éœ€è¦ä¾èµ–è¿™ä¸ªè®¡æ•°å™¨æ¥å®Œæˆã€‚<br>ç”±äº<strong>Javaè™šæ‹Ÿæœºçš„å¤šçº¿ç¨‹æ˜¯é€šè¿‡çº¿ç¨‹è½®æµåˆ‡æ¢ã€åˆ†é…å¤„ç†å™¨æ‰§è¡Œæ—¶é—´çš„æ–¹å¼æ¥å®ç°çš„</strong>ï¼Œåœ¨ä»»ä½•ä¸€ä¸ªç¡®å®šçš„æ—¶åˆ»ï¼Œä¸€ä¸ªå¤„ç†å™¨(å¯¹äºå¤šæ ¸å¤„ç†å™¨æ¥è¯´æ˜¯ä¸€ä¸ªå†…æ ¸)éƒ½åªä¼šæ‰§è¡Œä¸€æ¡çº¿ç¨‹ä¸­çš„æŒ‡ä»¤ã€‚å› æ­¤ï¼Œä¸ºäº†çº¿ç¨‹åˆ‡æ¢åèƒ½æ¢å¤åˆ°æ­£ç¡®çš„æ‰§è¡Œä½ç½®ï¼Œæ¯æ¡çº¿ç¨‹éƒ½éœ€è¦æœ‰ä¸€ä¸ªç‹¬ç«‹çš„ç¨‹åºè®¡æ•°å™¨ï¼Œå„æ¡çº¿ç¨‹ä¹‹é—´è®¡æ•°å™¨äº’ä¸å½±å“ï¼Œç‹¬ç«‹å­˜å‚¨ï¼Œæˆ‘ä»¬ç§°è¿™ç±»å†…å­˜åŒºåŸŸä¸ºâ€œ<strong>çº¿ç¨‹ç§æœ‰</strong>â€çš„å†…å­˜ã€‚<br>å¦‚æœçº¿ç¨‹æ­£åœ¨æ‰§è¡Œçš„æ˜¯ä¸€ä¸ªJavaæ–¹æ³•ï¼Œè¿™ä¸ªè®¡æ•°å™¨è®°å½•çš„æ˜¯æ­£åœ¨æ‰§è¡Œçš„è™šæ‹Ÿæœºå­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€;å¦‚æœæ­£åœ¨æ‰§è¡Œçš„æ˜¯æœ¬åœ°(Native)æ–¹æ³•ï¼Œè¿™ä¸ªè®¡æ•°å™¨å€¼åˆ™åº”ä¸ºç©º(Undefined)ã€‚æ­¤å†…å­˜åŒºåŸŸæ˜¯å”¯ä¸€ä¸€ä¸ªåœ¨ã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹ä¸­æ²¡æœ‰è§„å®šä»»ä½•OutOfMemoryErroræƒ…å†µçš„åŒºåŸŸã€‚      </p>
<h4 id="Javaè™šæ‹Ÿæœºæ ˆ"><a href="#Javaè™šæ‹Ÿæœºæ ˆ" class="headerlink" title="Javaè™šæ‹Ÿæœºæ ˆ"></a>Javaè™šæ‹Ÿæœºæ ˆ</h4><p>ä¸ç¨‹åºè®¡æ•°å™¨ä¸€æ ·ï¼ŒJavaè™šæ‹Ÿæœºæ ˆ(Java Virtual Machine Stack)ä¹Ÿæ˜¯<strong>çº¿ç¨‹ç§æœ‰</strong>çš„ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸä¸çº¿ç¨‹ç›¸åŒã€‚è™šæ‹Ÿæœºæ ˆæè¿°çš„æ˜¯Javaæ–¹æ³•æ‰§è¡Œçš„çº¿ç¨‹å†…å­˜æ¨¡å‹:æ¯ä¸ªæ–¹æ³•è¢«æ‰§è¡Œçš„æ—¶å€™ï¼ŒJavaè™šæ‹Ÿæœºéƒ½ä¼šåŒæ­¥åˆ›å»ºä¸€ä¸ªæ ˆå¸§(Stack Frame)ç”¨äºå­˜å‚¨å±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆã€åŠ¨æ€è¿æ¥ã€æ–¹æ³•å‡ºå£ç­‰ä¿¡æ¯ã€‚æ¯ä¸€ä¸ªæ–¹æ³•è¢«è°ƒç”¨ç›´è‡³æ‰§è¡Œå®Œæ¯•çš„è¿‡ç¨‹ï¼Œå°±å¯¹åº”ç€ä¸€ä¸ªæ ˆå¸§åœ¨è™šæ‹Ÿæœºæ ˆä¸­ä»å…¥æ ˆåˆ°å‡ºæ ˆçš„è¿‡ç¨‹ã€‚<br><strong>å±€éƒ¨å˜é‡è¡¨</strong>å­˜æ”¾äº†ç¼–è¯‘æœŸå¯çŸ¥çš„å„ç§Javaè™šæ‹ŸæœºåŸºæœ¬æ•°æ®ç±»å‹(booleanã€byteã€charã€shortã€intã€ floatã€longã€double)ã€å¯¹è±¡å¼•ç”¨(referenceç±»å‹ï¼Œå®ƒå¹¶ä¸ç­‰åŒäºå¯¹è±¡æœ¬èº«ï¼Œå¯èƒ½æ˜¯ä¸€ä¸ªæŒ‡å‘å¯¹è±¡èµ·å§‹åœ°å€çš„å¼•ç”¨æŒ‡é’ˆï¼Œä¹Ÿå¯èƒ½æ˜¯æŒ‡å‘ä¸€ä¸ªä»£è¡¨å¯¹è±¡çš„å¥æŸ„æˆ–è€…å…¶ä»–ä¸æ­¤å¯¹è±¡ç›¸å…³çš„ä½ç½®)å’ŒreturnAddressç±»å‹(æŒ‡å‘äº†ä¸€æ¡å­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€)ã€‚<br>è¿™äº›æ•°æ®ç±»å‹åœ¨å±€éƒ¨å˜é‡è¡¨ä¸­çš„å­˜å‚¨ç©ºé—´ä»¥<strong>å±€éƒ¨å˜é‡æ§½</strong>(Slot)æ¥è¡¨ç¤ºï¼Œå…¶ä¸­64ä½é•¿åº¦çš„longå’Œ doubleç±»å‹çš„æ•°æ®ä¼šå ç”¨ä¸¤ä¸ªå˜é‡æ§½ï¼Œå…¶ä½™çš„æ•°æ®ç±»å‹åªå ç”¨ä¸€ä¸ªã€‚å±€éƒ¨å˜é‡è¡¨æ‰€éœ€çš„å†…å­˜ç©ºé—´åœ¨ç¼–è¯‘æœŸé—´å®Œæˆåˆ†é…ï¼Œå½“è¿›å…¥ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•éœ€è¦åœ¨æ ˆå¸§ä¸­åˆ†é…å¤šå¤§çš„å±€éƒ¨å˜é‡ç©ºé—´æ˜¯å®Œå…¨ç¡®å®šçš„ï¼Œåœ¨æ–¹æ³•è¿è¡ŒæœŸé—´ä¸ä¼šæ”¹å˜å±€éƒ¨å˜é‡è¡¨çš„å¤§å°ã€‚è¯·è¯»è€…æ³¨æ„ï¼Œè¿™é‡Œè¯´çš„â€œå¤§å°â€æ˜¯æŒ‡å˜é‡æ§½çš„æ•°é‡ï¼Œè™šæ‹ŸæœºçœŸæ­£ä½¿ç”¨å¤šå¤§çš„å†…å­˜ç©ºé—´(è­¬å¦‚æŒ‰ç…§1ä¸ªå˜é‡æ§½å ç”¨32ä¸ªæ¯”ç‰¹ã€64ä¸ªæ¯”ç‰¹ï¼Œæˆ–è€…æ›´å¤š)æ¥å®ç°ä¸€ä¸ªå˜é‡æ§½ï¼Œè¿™æ˜¯å®Œå…¨ç”±å…·ä½“çš„è™šæ‹Ÿæœºå®ç°è‡ªè¡Œå†³å®šçš„äº‹æƒ…ã€‚<br>åœ¨ã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹ä¸­ï¼Œå¯¹è¿™ä¸ªå†…å­˜åŒºåŸŸè§„å®šäº†ä¸¤ç±»å¼‚å¸¸çŠ¶å†µ:<strong>å¦‚æœçº¿ç¨‹è¯·æ±‚çš„æ ˆæ·±åº¦å¤§äºè™šæ‹Ÿæœºæ‰€å…è®¸çš„æ·±åº¦ï¼Œå°†æŠ›å‡ºStackOverflowErrorå¼‚å¸¸;å¦‚æœJavaè™šæ‹Ÿæœºæ ˆå®¹é‡å¯ä»¥åŠ¨æ€æ‰©å±•ï¼Œå½“æ ˆæ‰©å±•æ—¶æ— æ³•ç”³è¯·åˆ°è¶³å¤Ÿçš„å†…å­˜ä¼šæŠ›å‡ºOutOfMemoryErrorå¼‚å¸¸</strong>ã€‚      </p>
<h4 id="æœ¬åœ°æ–¹æ³•æ ˆ"><a href="#æœ¬åœ°æ–¹æ³•æ ˆ" class="headerlink" title="æœ¬åœ°æ–¹æ³•æ ˆ"></a>æœ¬åœ°æ–¹æ³•æ ˆ</h4><p>æœ¬åœ°æ–¹æ³•æ ˆ(Native Method Stacks)ä¸è™šæ‹Ÿæœºæ ˆæ‰€å‘æŒ¥çš„ä½œç”¨æ˜¯éå¸¸ç›¸ä¼¼çš„ï¼Œ<strong>å…¶åŒºåˆ«åªæ˜¯è™šæ‹Ÿæœºæ ˆä¸ºè™šæ‹Ÿæœºæ‰§è¡ŒJavaæ–¹æ³•(ä¹Ÿå°±æ˜¯å­—èŠ‚ç )æœåŠ¡ï¼Œè€Œæœ¬åœ°æ–¹æ³•æ ˆåˆ™æ˜¯ä¸ºè™šæ‹Ÿæœºä½¿ç”¨åˆ°çš„æœ¬åœ°(Native)æ–¹æ³•æœåŠ¡</strong>ã€‚<br>ã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹å¯¹æœ¬åœ°æ–¹æ³•æ ˆä¸­æ–¹æ³•ä½¿ç”¨çš„è¯­è¨€ã€ä½¿ç”¨æ–¹å¼ä¸æ•°æ®ç»“æ„å¹¶æ²¡æœ‰ä»»ä½•å¼ºåˆ¶è§„å®šï¼Œå› æ­¤å…·ä½“çš„è™šæ‹Ÿæœºå¯ä»¥æ ¹æ®éœ€è¦è‡ªç”±å®ç°å®ƒï¼Œç”šè‡³æœ‰çš„Javaè™šæ‹Ÿæœº(è­¬å¦‚Hot-Spotè™šæ‹Ÿæœº)ç›´æ¥å°±æŠŠæœ¬åœ°æ–¹æ³•æ ˆå’Œè™šæ‹Ÿæœºæ ˆåˆäºŒä¸ºä¸€ã€‚ä¸è™šæ‹Ÿæœºæ ˆä¸€æ ·ï¼Œæœ¬åœ°æ–¹æ³•æ ˆä¹Ÿä¼šåœ¨æ ˆæ·±åº¦æº¢å‡ºæˆ–è€…æ ˆæ‰©å±•å¤±è´¥æ—¶åˆ†åˆ«æŠ›å‡ºStackOverflowErrorå’ŒOutOfMemoryErrorå¼‚å¸¸ã€‚      </p>
<h4 id="Javaå †"><a href="#Javaå †" class="headerlink" title="Javaå †"></a>Javaå †</h4><p>å¯¹äºJavaåº”ç”¨ç¨‹åºæ¥è¯´ï¼ŒJavaå †(Java Heap)æ˜¯<strong>è™šæ‹Ÿæœºæ‰€ç®¡ç†çš„å†…å­˜ä¸­æœ€å¤§çš„ä¸€å—</strong>ã€‚Javaå †æ˜¯è¢«æ‰€æœ‰<strong>çº¿ç¨‹å…±äº«</strong>çš„ä¸€å—å†…å­˜åŒºåŸŸï¼Œåœ¨è™šæ‹Ÿæœºå¯åŠ¨æ—¶åˆ›å»ºã€‚æ­¤å†…å­˜åŒºåŸŸçš„<strong>å”¯ä¸€ç›®çš„å°±æ˜¯å­˜æ”¾å¯¹è±¡å®ä¾‹</strong>ï¼ŒJavaä¸–ç•Œé‡Œâ€œå‡ ä¹â€æ‰€æœ‰çš„å¯¹è±¡å®ä¾‹éƒ½åœ¨è¿™é‡Œåˆ†é…å†…å­˜ã€‚<br>Javaå †æ˜¯<strong>åƒåœ¾æ”¶é›†å™¨ç®¡ç†çš„å†…å­˜åŒºåŸŸ</strong>ï¼Œå› æ­¤ä¸€äº›èµ„æ–™ä¸­å®ƒä¹Ÿè¢«ç§°ä½œâ€œGCå †â€(Garbage Collected Heap)ã€‚ä»å›æ”¶å†…å­˜çš„è§’åº¦çœ‹ï¼Œç”±äºç°ä»£åƒåœ¾æ”¶é›†å™¨å¤§éƒ¨åˆ†éƒ½æ˜¯åŸºäº<strong>åˆ†ä»£æ”¶é›†ç†è®º</strong>è®¾è®¡çš„ï¼Œæ‰€ä»¥Javaå †ä¸­ç»å¸¸ä¼šå‡ºç°â€œæ–°ç”Ÿä»£â€â€œè€å¹´ä»£â€â€œæ°¸ä¹…ä»£â€â€œEdenç©ºé—´â€â€œFrom Survivorç©ºé—´â€â€œTo Survivorç©ºé—´â€ç­‰åè¯ã€‚<br>å¦‚æœä»åˆ†é…å†…å­˜çš„è§’åº¦çœ‹ï¼Œæ‰€æœ‰çº¿ç¨‹å…±äº«çš„Javaå †ä¸­å¯ä»¥åˆ’åˆ†å‡ºå¤šä¸ªçº¿ç¨‹ç§æœ‰çš„åˆ†é…ç¼“å†²åŒº (Thread Local Allocation Bufferï¼ŒTLAB)ï¼Œä»¥æå‡å¯¹è±¡åˆ†é…æ—¶çš„æ•ˆç‡ã€‚ä¸è¿‡æ— è®ºä»ä»€ä¹ˆè§’åº¦ï¼Œæ— è®ºå¦‚ä½•åˆ’åˆ†ï¼Œéƒ½ä¸ä¼šæ”¹å˜Javaå †ä¸­å­˜å‚¨å†…å®¹çš„å…±æ€§ï¼Œæ— è®ºæ˜¯å“ªä¸ªåŒºåŸŸï¼Œå­˜å‚¨çš„éƒ½åªèƒ½æ˜¯å¯¹è±¡çš„å®ä¾‹ï¼Œå°†Javaå †ç»†åˆ†çš„ç›®çš„åªæ˜¯ä¸ºäº†æ›´å¥½åœ°å›æ”¶å†…å­˜ï¼Œæˆ–è€…æ›´å¿«åœ°åˆ†é…å†…å­˜ã€‚<br>æ ¹æ®ã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹çš„è§„å®šï¼ŒJavaå †å¯ä»¥<strong>å¤„äºç‰©ç†ä¸Šä¸è¿ç»­çš„å†…å­˜ç©ºé—´ä¸­ï¼Œä½†åœ¨é€»è¾‘ä¸Šå®ƒåº”è¯¥è¢«è§†ä¸ºè¿ç»­çš„</strong>ï¼Œè¿™ç‚¹å°±åƒæˆ‘ä»¬ç”¨ç£ç›˜ç©ºé—´å»å­˜å‚¨æ–‡ä»¶ä¸€æ ·ï¼Œå¹¶ä¸è¦æ±‚æ¯ä¸ªæ–‡ä»¶éƒ½è¿ç»­å­˜æ”¾ã€‚ä½†å¯¹äºå¤§å¯¹è±¡(å…¸å‹çš„å¦‚æ•°ç»„å¯¹è±¡)ï¼Œå¤šæ•°è™šæ‹Ÿæœºå®ç°å‡ºäºå®ç°ç®€å•ã€å­˜å‚¨é«˜æ•ˆçš„è€ƒè™‘ï¼Œå¾ˆå¯èƒ½ä¼šè¦æ±‚è¿ç»­çš„å†…å­˜ç©ºé—´ã€‚<br>Javaå †æ—¢<strong>å¯ä»¥è¢«å®ç°æˆå›ºå®šå¤§å°çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯å¯æ‰©å±•çš„</strong>ï¼Œä¸è¿‡å½“å‰ä¸»æµçš„Javaè™šæ‹Ÿæœºéƒ½æ˜¯æŒ‰ç…§å¯æ‰©å±•æ¥å®ç°çš„(é€šè¿‡å‚æ•°-Xmxå’Œ-Xmsè®¾å®š)ã€‚å¦‚æœåœ¨Javaå †ä¸­æ²¡æœ‰å†…å­˜å®Œæˆå®ä¾‹åˆ†é…ï¼Œå¹¶ä¸”å †ä¹Ÿæ— æ³•å†æ‰©å±•æ—¶ï¼ŒJavaè™šæ‹Ÿæœºå°†ä¼šæŠ›å‡ºOutOfMemoryErrorå¼‚å¸¸ã€‚   </p>
<h4 id="æ–¹æ³•åŒº"><a href="#æ–¹æ³•åŒº" class="headerlink" title="æ–¹æ³•åŒº"></a>æ–¹æ³•åŒº</h4><p>æ–¹æ³•åŒº(Method Area)ä¸Javaå †ä¸€æ ·ï¼Œæ˜¯å„ä¸ª<strong>çº¿ç¨‹å…±äº«</strong>çš„å†…å­˜åŒºåŸŸï¼Œå®ƒç”¨äºå­˜å‚¨å·²è¢«è™šæ‹ŸæœºåŠ è½½çš„ç±»å‹ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘åçš„ä»£ç ç¼“å­˜ç­‰æ•°æ®ã€‚è™½ç„¶ã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹ä¸­æŠŠæ–¹æ³•åŒºæè¿°ä¸ºå †çš„ä¸€ä¸ªé€»è¾‘éƒ¨åˆ†ï¼Œä½†æ˜¯å®ƒå´æœ‰ä¸€ä¸ªåˆ«åå«ä½œâ€œéå †â€(Non-Heap)ï¼Œç›®çš„æ˜¯ä¸Javaå †åŒºåˆ†å¼€æ¥ã€‚<br>æ ¹æ®ã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹çš„è§„å®šï¼Œå¦‚æœæ–¹æ³•åŒºæ— æ³•æ»¡è¶³æ–°çš„å†…å­˜åˆ†é…éœ€æ±‚æ—¶ï¼Œå°†æŠ›å‡ºOutOfMemoryErrorå¼‚å¸¸ã€‚      </p>
<h4 id="è¿è¡Œæ—¶å¸¸é‡æ± "><a href="#è¿è¡Œæ—¶å¸¸é‡æ± " class="headerlink" title="è¿è¡Œæ—¶å¸¸é‡æ± "></a>è¿è¡Œæ—¶å¸¸é‡æ± </h4><p><strong>è¿è¡Œæ—¶å¸¸é‡æ± (Runtime Constant Pool)æ˜¯æ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†</strong>ã€‚Classæ–‡ä»¶ä¸­é™¤äº†æœ‰ç±»çš„ç‰ˆæœ¬ã€å­—æ®µã€æ–¹æ³•ã€æ¥å£ç­‰æè¿°ä¿¡æ¯å¤–ï¼Œè¿˜æœ‰ä¸€é¡¹ä¿¡æ¯æ˜¯<strong>å¸¸é‡æ± è¡¨</strong>(Constant Pool Table)ï¼Œç”¨äºå­˜æ”¾ç¼–è¯‘æœŸç”Ÿæˆçš„å„ç§å­—é¢é‡ä¸ç¬¦å·å¼•ç”¨ï¼Œè¿™éƒ¨åˆ†å†…å®¹å°†åœ¨ç±»åŠ è½½åå­˜æ”¾åˆ°æ–¹æ³•åŒºçš„è¿è¡Œæ—¶å¸¸é‡æ± ä¸­ã€‚<br>Javaè™šæ‹Ÿæœºå¯¹äºClassæ–‡ä»¶æ¯ä¸€éƒ¨åˆ†(è‡ªç„¶ä¹ŸåŒ…æ‹¬å¸¸é‡æ± )çš„æ ¼å¼éƒ½æœ‰ä¸¥æ ¼è§„å®šï¼Œå¦‚æ¯ä¸€ä¸ªå­—èŠ‚ç”¨äºå­˜å‚¨å“ªç§æ•°æ®éƒ½å¿…é¡»ç¬¦åˆè§„èŒƒä¸Šçš„è¦æ±‚æ‰ä¼šè¢«è™šæ‹Ÿæœºè®¤å¯ã€åŠ è½½å’Œæ‰§è¡Œï¼Œä½†å¯¹äºè¿è¡Œæ—¶å¸¸é‡æ± ï¼Œã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹å¹¶æ²¡æœ‰åšä»»ä½•ç»†èŠ‚çš„è¦æ±‚ï¼Œä¸åŒæä¾›å•†å®ç°çš„è™šæ‹Ÿæœºå¯ä»¥æŒ‰ç…§è‡ªå·±çš„éœ€è¦æ¥å®ç°è¿™ä¸ªå†…å­˜åŒºåŸŸï¼Œä¸è¿‡ä¸€èˆ¬æ¥è¯´ï¼Œé™¤äº†ä¿å­˜Classæ–‡ä»¶ä¸­æè¿°çš„ç¬¦å·å¼•ç”¨å¤–ï¼Œè¿˜ä¼šæŠŠç”±ç¬¦å·å¼•ç”¨ç¿»è¯‘å‡ºæ¥çš„ç›´æ¥å¼•ç”¨ä¹Ÿå­˜å‚¨åœ¨è¿è¡Œæ—¶å¸¸é‡æ± ä¸­ã€‚<br>è¿è¡Œæ—¶å¸¸é‡æ± ç›¸å¯¹äºClassæ–‡ä»¶å¸¸é‡æ± çš„å¦å¤–ä¸€ä¸ªé‡è¦ç‰¹å¾æ˜¯å…·å¤‡åŠ¨æ€æ€§ï¼ŒJavaè¯­è¨€å¹¶ä¸è¦æ±‚å¸¸é‡ä¸€å®šåªæœ‰ç¼–è¯‘æœŸæ‰èƒ½äº§ç”Ÿï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¹¶éé¢„ç½®å…¥Classæ–‡ä»¶ä¸­å¸¸é‡æ± çš„å†…å®¹æ‰èƒ½è¿›å…¥æ–¹æ³•åŒºè¿è¡Œæ—¶å¸¸é‡æ± ï¼Œè¿è¡ŒæœŸé—´ä¹Ÿå¯ä»¥å°†æ–°çš„å¸¸é‡æ”¾å…¥æ± ä¸­ï¼Œè¿™ç§ç‰¹æ€§è¢«å¼€å‘äººå‘˜åˆ©ç”¨å¾—æ¯”è¾ƒå¤šçš„ä¾¿æ˜¯Stringç±»çš„intern()æ–¹æ³•ã€‚<br>æ—¢ç„¶è¿è¡Œæ—¶å¸¸é‡æ± æ˜¯æ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†ï¼Œè‡ªç„¶å—åˆ°æ–¹æ³•åŒºå†…å­˜çš„é™åˆ¶ï¼Œå½“å¸¸é‡æ± æ— æ³•å†ç”³è¯·åˆ°å†…å­˜æ—¶ä¼šæŠ›å‡ºOutOfMemoryErrorå¼‚å¸¸ã€‚</p>
<h4 id="ç›´æ¥å†…å­˜"><a href="#ç›´æ¥å†…å­˜" class="headerlink" title="ç›´æ¥å†…å­˜"></a>ç›´æ¥å†…å­˜</h4><p><strong>ç›´æ¥å†…å­˜(Direct Memory)å¹¶ä¸æ˜¯è™šæ‹Ÿæœºè¿è¡Œæ—¶æ•°æ®åŒºçš„ä¸€éƒ¨åˆ†</strong>ï¼Œä¹Ÿä¸æ˜¯ã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹ä¸­å®šä¹‰çš„å†…å­˜åŒºåŸŸã€‚ä½†æ˜¯è¿™éƒ¨åˆ†å†…å­˜ä¹Ÿè¢«é¢‘ç¹åœ°ä½¿ç”¨ï¼Œè€Œä¸”ä¹Ÿå¯èƒ½å¯¼è‡´OutOfMemoryErrorå¼‚å¸¸å‡ºç°ã€‚<br>åœ¨JDK 1.4ä¸­æ–°åŠ å…¥äº†NIO(New Input/Output)ç±»ï¼Œå¼•å…¥äº†ä¸€ç§<strong>åŸºäºé€šé“(Channel)ä¸ç¼“å†²åŒº (Buffer)çš„I/Oæ–¹å¼</strong>ï¼Œå®ƒå¯ä»¥ä½¿ç”¨Nativeå‡½æ•°åº“ç›´æ¥åˆ†é…å †å¤–å†…å­˜ï¼Œç„¶åé€šè¿‡ä¸€ä¸ªå­˜å‚¨åœ¨Javaå †é‡Œé¢çš„DirectByteBufferå¯¹è±¡ä½œä¸ºè¿™å—å†…å­˜çš„å¼•ç”¨è¿›è¡Œæ“ä½œã€‚è¿™æ ·èƒ½åœ¨ä¸€äº›åœºæ™¯ä¸­æ˜¾è‘—æé«˜æ€§èƒ½ï¼Œå› ä¸ºé¿å…äº†åœ¨Javaå †å’ŒNativeå †ä¸­æ¥å›å¤åˆ¶æ•°æ®ã€‚<br>æ˜¾ç„¶ï¼Œæœ¬æœºç›´æ¥å†…å­˜çš„åˆ†é…ä¸ä¼šå—åˆ°Javaå †å¤§å°çš„é™åˆ¶ï¼Œä½†æ˜¯ï¼Œæ—¢ç„¶æ˜¯å†…å­˜ï¼Œåˆ™è‚¯å®šè¿˜æ˜¯ä¼šå—åˆ°æœ¬æœºæ€»å†…å­˜(åŒ…æ‹¬ç‰©ç†å†…å­˜ã€SWAPåˆ†åŒºæˆ–è€…åˆ†é¡µæ–‡ä»¶)å¤§å°ä»¥åŠå¤„ç†å™¨å¯»å€ç©ºé—´çš„é™åˆ¶ï¼Œä¸€èˆ¬æœåŠ¡å™¨ç®¡ç†å‘˜é…ç½®è™šæ‹Ÿæœºå‚æ•°æ—¶ï¼Œä¼šæ ¹æ®å®é™…å†…å­˜å»è®¾ç½®-Xmxç­‰å‚æ•°ä¿¡æ¯ï¼Œä½†ç»å¸¸å¿½ç•¥æ‰ç›´æ¥å†…å­˜ï¼Œä½¿å¾—å„ä¸ªå†…å­˜åŒºåŸŸæ€»å’Œå¤§äºç‰©ç†å†…å­˜é™åˆ¶(åŒ…æ‹¬ç‰©ç†çš„å’Œæ“ä½œç³»ç»Ÿçº§çš„é™åˆ¶)ï¼Œä»è€Œå¯¼è‡´åŠ¨æ€æ‰©å±•æ—¶å‡ºç°OutOfMemoryErrorå¼‚å¸¸ã€‚      </p>
<h3 id="HotSpotè™šæ‹Ÿæœº"><a href="#HotSpotè™šæ‹Ÿæœº" class="headerlink" title="HotSpotè™šæ‹Ÿæœº"></a>HotSpotè™šæ‹Ÿæœº</h3><h4 id="å¯¹è±¡çš„åˆ›å»º"><a href="#å¯¹è±¡çš„åˆ›å»º" class="headerlink" title="å¯¹è±¡çš„åˆ›å»º"></a>å¯¹è±¡çš„åˆ›å»º</h4><ol>
<li>å½“Javaè™šæ‹Ÿæœºé‡åˆ°ä¸€æ¡å­—èŠ‚ç newæŒ‡ä»¤æ—¶ï¼Œé¦–å…ˆå°†å»æ£€æŸ¥è¿™ä¸ªæŒ‡ä»¤çš„å‚æ•°æ˜¯å¦èƒ½åœ¨å¸¸é‡æ± ä¸­å®šä½åˆ°ä¸€ä¸ªç±»çš„ç¬¦å·å¼•ç”¨ï¼Œå¹¶ä¸”æ£€æŸ¥è¿™ä¸ªç¬¦å·å¼•ç”¨ä»£è¡¨çš„ç±»æ˜¯å¦å·²è¢«åŠ è½½ã€è§£æå’Œåˆå§‹åŒ–è¿‡ã€‚å¦‚æœæ²¡æœ‰ï¼Œé‚£å¿…é¡»å…ˆæ‰§è¡Œç›¸åº”çš„ç±»åŠ è½½è¿‡ç¨‹      </li>
<li>åœ¨ç±»åŠ è½½æ£€æŸ¥é€šè¿‡åï¼Œæ¥ä¸‹æ¥è™šæ‹Ÿæœºå°†ä¸ºæ–°ç”Ÿå¯¹è±¡åˆ†é…å†…å­˜ã€‚å¯¹è±¡æ‰€éœ€å†…å­˜çš„å¤§å°åœ¨ç±»åŠ è½½å®Œæˆåä¾¿å¯å®Œå…¨ç¡®å®šï¼Œä¸ºå¯¹è±¡åˆ†é…ç©ºé—´çš„ä»»åŠ¡å®é™…ä¸Šä¾¿ç­‰åŒäºæŠŠä¸€å—ç¡®å®šå¤§å°çš„å†…å­˜å—ä»Javaå †ä¸­åˆ’åˆ†å‡ºæ¥ã€‚      </li>
<li>æ¥ä¸‹æ¥ï¼ŒJavaè™šæ‹Ÿæœºè¿˜è¦å¯¹å¯¹è±¡è¿›è¡Œå¿…è¦çš„è®¾ç½®ï¼Œä¾‹å¦‚è¿™ä¸ªå¯¹è±¡æ˜¯å“ªä¸ªç±»çš„å®ä¾‹ã€å¦‚ä½•æ‰èƒ½æ‰¾åˆ°ç±»çš„å…ƒæ•°æ®ä¿¡æ¯ã€å¯¹è±¡çš„å“ˆå¸Œç (å®é™…ä¸Šå¯¹è±¡çš„å“ˆå¸Œç ä¼šå»¶ååˆ°çœŸæ­£è°ƒç”¨Object::hashCode()æ–¹æ³•æ—¶æ‰è®¡ç®—)ã€å¯¹è±¡çš„GCåˆ†ä»£å¹´é¾„ç­‰ä¿¡æ¯ã€‚è¿™äº›ä¿¡æ¯å­˜æ”¾åœ¨å¯¹è±¡çš„å¯¹è±¡å¤´(Object Header)ä¹‹ä¸­ã€‚      </li>
<li>åœ¨ä¸Šé¢å·¥ä½œéƒ½å®Œæˆä¹‹åï¼Œä»è™šæ‹Ÿæœºçš„è§†è§’æ¥çœ‹ï¼Œä¸€ä¸ªæ–°çš„å¯¹è±¡å·²ç»äº§ç”Ÿäº†ã€‚ä½†æ˜¯ä»Javaç¨‹åºçš„è§†è§’çœ‹æ¥ï¼Œå¯¹è±¡åˆ›å»ºæ‰åˆšåˆšå¼€å§‹â€”â€”æ„é€ å‡½æ•°ï¼Œå³Classæ–‡ä»¶ä¸­çš„&lt;init&gt;()æ–¹æ³•è¿˜æ²¡æœ‰æ‰§è¡Œï¼Œæ‰€æœ‰çš„å­—æ®µéƒ½ä¸ºé»˜è®¤çš„é›¶å€¼ï¼Œå¯¹è±¡éœ€è¦çš„å…¶ä»–èµ„æºå’ŒçŠ¶æ€ä¿¡æ¯ä¹Ÿè¿˜æ²¡æœ‰æŒ‰ç…§é¢„å®šçš„æ„å›¾æ„é€ å¥½ã€‚ä¸€èˆ¬æ¥è¯´(ç”±å­—èŠ‚ç æµä¸­newæŒ‡ä»¤åé¢æ˜¯å¦è·ŸéšinvokespecialæŒ‡ä»¤æ‰€å†³å®šï¼ŒJavaç¼–è¯‘å™¨ä¼šåœ¨é‡åˆ°newå…³é”®å­—çš„åœ°æ–¹åŒæ—¶ç”Ÿæˆè¿™ä¸¤æ¡å­—èŠ‚ç æŒ‡ä»¤ï¼Œä½†å¦‚æœç›´æ¥é€šè¿‡å…¶ä»–æ–¹å¼äº§ç”Ÿçš„åˆ™ä¸ä¸€å®šå¦‚æ­¤)ï¼ŒnewæŒ‡ä»¤ä¹‹åä¼šæ¥ç€æ‰§è¡Œ&lt;init&gt;()æ–¹æ³•ï¼ŒæŒ‰ç…§ç¨‹åºå‘˜çš„æ„æ„¿å¯¹å¯¹è±¡è¿›è¡Œåˆå§‹åŒ–ï¼Œè¿™æ ·ä¸€ä¸ªçœŸæ­£å¯ç”¨çš„å¯¹è±¡æ‰ç®—å®Œå…¨è¢«æ„é€ å‡ºæ¥ã€‚  </li>
</ol>
<h4 id="å¯¹è±¡çš„å†…å­˜å¸ƒå±€"><a href="#å¯¹è±¡çš„å†…å­˜å¸ƒå±€" class="headerlink" title="å¯¹è±¡çš„å†…å­˜å¸ƒå±€"></a>å¯¹è±¡çš„å†…å­˜å¸ƒå±€</h4><p>åœ¨HotSpotè™šæ‹Ÿæœºé‡Œï¼Œå¯¹è±¡åœ¨å †å†…å­˜ä¸­çš„å­˜å‚¨å¸ƒå±€å¯ä»¥åˆ’åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†:<strong>å¯¹è±¡å¤´</strong>(Header)ã€<strong>å®ä¾‹æ•°æ®</strong>(Instance Data)å’Œ<strong>å¯¹é½å¡«å……</strong>(Padding)ã€‚      </p>
<ol>
<li>HotSpotè™šæ‹Ÿæœºå¯¹è±¡çš„å¯¹è±¡å¤´éƒ¨åˆ†åŒ…æ‹¬ä¸¤ç±»ä¿¡æ¯ã€‚ç¬¬ä¸€ç±»æ˜¯ç”¨äºå­˜å‚¨å¯¹è±¡è‡ªèº«çš„<strong>è¿è¡Œæ—¶æ•°æ®</strong>ï¼Œå¦‚å“ˆå¸Œç (HashCode)ã€GCåˆ†ä»£å¹´é¾„ã€é”çŠ¶æ€æ ‡å¿—ã€çº¿ç¨‹æŒæœ‰çš„é”ã€åå‘çº¿ç¨‹IDã€åå‘æ—¶é—´æˆ³ç­‰ï¼Œè¿™éƒ¨åˆ†æ•°æ®çš„é•¿åº¦åœ¨32ä½å’Œ64ä½çš„è™šæ‹Ÿæœº(æœªå¼€å¯å‹ç¼©æŒ‡é’ˆ)ä¸­åˆ†åˆ«ä¸º32ä¸ªæ¯”ç‰¹å’Œ64ä¸ªæ¯”ç‰¹ï¼Œå®˜æ–¹ç§°å®ƒ ä¸ºâ€œMark Wordâ€ã€‚å¯¹è±¡å¤´çš„å¦å¤–ä¸€éƒ¨åˆ†æ˜¯<strong>ç±»å‹æŒ‡é’ˆ</strong>ï¼Œå³å¯¹è±¡æŒ‡å‘å®ƒçš„ç±»å‹å…ƒæ•°æ®çš„æŒ‡é’ˆï¼ŒJavaè™šæ‹Ÿæœºé€šè¿‡è¿™ä¸ªæŒ‡é’ˆæ¥ç¡®å®šè¯¥å¯¹è±¡æ˜¯å“ªä¸ªç±»çš„å®ä¾‹ã€‚å¹¶ä¸æ˜¯æ‰€æœ‰çš„è™šæ‹Ÿæœºå®ç°éƒ½å¿…é¡»åœ¨å¯¹è±¡æ•°æ®ä¸Šä¿ç•™ç±»å‹æŒ‡é’ˆï¼Œæ¢å¥è¯è¯´ï¼ŒæŸ¥æ‰¾å¯¹è±¡çš„å…ƒæ•°æ®ä¿¡æ¯å¹¶ä¸ä¸€å®šè¦ç»è¿‡å¯¹è±¡æœ¬èº«ï¼Œ      </li>
<li>æ¥ä¸‹æ¥å®ä¾‹æ•°æ®éƒ¨åˆ†æ˜¯å¯¹è±¡çœŸæ­£å­˜å‚¨çš„æœ‰æ•ˆä¿¡æ¯ï¼Œå³æˆ‘ä»¬åœ¨ç¨‹åºä»£ç é‡Œé¢æ‰€å®šä¹‰çš„å„ç§ç±»å‹çš„å­—æ®µå†…å®¹ï¼Œæ— è®ºæ˜¯ä»çˆ¶ç±»ç»§æ‰¿ä¸‹æ¥çš„ï¼Œè¿˜æ˜¯åœ¨å­ç±»ä¸­å®šä¹‰çš„å­—æ®µéƒ½å¿…é¡»è®°å½•èµ·æ¥ã€‚      </li>
<li>å¯¹è±¡çš„ç¬¬ä¸‰éƒ¨åˆ†æ˜¯å¯¹é½å¡«å……ï¼Œè¿™å¹¶ä¸æ˜¯å¿…ç„¶å­˜åœ¨çš„ï¼Œä¹Ÿæ²¡æœ‰ç‰¹åˆ«çš„å«ä¹‰ï¼Œå®ƒä»…ä»…èµ·ç€å ä½ç¬¦çš„ä½œç”¨ã€‚  </li>
</ol>
<h4 id="å¯¹è±¡çš„è®¿é—®å®šä½"><a href="#å¯¹è±¡çš„è®¿é—®å®šä½" class="headerlink" title="å¯¹è±¡çš„è®¿é—®å®šä½"></a>å¯¹è±¡çš„è®¿é—®å®šä½</h4><p>ä¸»æµçš„è®¿é—®æ–¹å¼ä¸»è¦æœ‰<strong>ä½¿ç”¨å¥æŸ„</strong>å’Œ<strong>ç›´æ¥æŒ‡é’ˆ</strong>ä¸¤ç§:      </p>
<ol>
<li><p>å¦‚æœä½¿ç”¨å¥æŸ„è®¿é—®çš„è¯ï¼ŒJavaå †ä¸­å°†å¯èƒ½ä¼šåˆ’åˆ†å‡ºä¸€å—å†…å­˜æ¥ä½œä¸ºå¥æŸ„æ± ï¼Œreferenceä¸­å­˜å‚¨çš„å°±æ˜¯å¯¹è±¡çš„å¥æŸ„åœ°å€ï¼Œè€Œå¥æŸ„ä¸­åŒ…å«äº†å¯¹è±¡å®ä¾‹æ•°æ®ä¸ç±»å‹æ•°æ®å„è‡ªå…·ä½“çš„åœ°å€ä¿¡æ¯ã€‚ </p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/09/28/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3JVM--2.%E5%86%85%E5%AD%98%E5%8C%BA%E5%9F%9F%E4%B8%8E%E5%86%85%E5%AD%98%E6%BA%A2%E5%87%BA/content2.png" class title="content2"></li>
<li><p>å¦‚æœä½¿ç”¨ç›´æ¥æŒ‡é’ˆè®¿é—®çš„è¯ï¼ŒJavaå †ä¸­å¯¹è±¡çš„å†…å­˜å¸ƒå±€å°±å¿…é¡»è€ƒè™‘å¦‚ä½•æ”¾ç½®è®¿é—®ç±»å‹æ•°æ®çš„ç›¸å…³ä¿¡æ¯ï¼Œreferenceä¸­å­˜å‚¨çš„ç›´æ¥å°±æ˜¯å¯¹è±¡åœ°å€ï¼Œå¦‚æœåªæ˜¯è®¿é—®å¯¹è±¡æœ¬èº«çš„è¯ï¼Œå°±ä¸éœ€è¦å¤šä¸€æ¬¡é—´æ¥è®¿é—®çš„å¼€é”€ã€‚   </p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/09/28/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3JVM--2.%E5%86%85%E5%AD%98%E5%8C%BA%E5%9F%9F%E4%B8%8E%E5%86%85%E5%AD%98%E6%BA%A2%E5%87%BA/content3.png" class title="content3"></li>
</ol>
<p>ä¼˜åŠ¿ï¼š</p>
<ul>
<li>ä½¿ç”¨å¥æŸ„æ¥è®¿é—®çš„æœ€å¤§å¥½å¤„å°±æ˜¯referenceä¸­å­˜å‚¨çš„æ˜¯ç¨³å®šå¥æŸ„åœ°å€ï¼Œåœ¨å¯¹è±¡è¢«ç§»åŠ¨(åƒåœ¾æ”¶é›†æ—¶ç§»åŠ¨å¯¹è±¡æ˜¯éå¸¸æ™®éçš„è¡Œä¸º)æ—¶åªä¼šæ”¹å˜å¥æŸ„ä¸­çš„å®ä¾‹æ•°æ®æŒ‡é’ˆï¼Œè€Œreferenceæœ¬èº«ä¸éœ€è¦è¢«ä¿®æ”¹ã€‚</li>
<li>ä½¿ç”¨ç›´æ¥æŒ‡é’ˆæ¥è®¿é—®æœ€å¤§çš„å¥½å¤„å°±æ˜¯é€Ÿåº¦æ›´å¿«ï¼Œå®ƒèŠ‚çœäº†ä¸€æ¬¡æŒ‡é’ˆå®šä½çš„æ—¶é—´å¼€é”€ï¼Œç”±äºå¯¹è±¡è®¿é—®åœ¨Javaä¸­éå¸¸é¢‘ç¹ï¼Œå› æ­¤è¿™ç±»å¼€é”€ç§¯å°‘æˆå¤šä¹Ÿæ˜¯ä¸€é¡¹æä¸ºå¯è§‚çš„æ‰§è¡Œæˆæœ¬ã€‚   </li>
</ul>
]]></content>
      <categories>
        <category>æ·±å…¥ç†è§£JVM</category>
      </categories>
      <tags>
        <tag>JVM</tag>
      </tags>
  </entry>
  <entry>
    <title>æ·±å…¥ç†è§£JVM--3.åƒåœ¾æ”¶é›†ä¸å†…å­˜åˆ†é…</title>
    <url>/2020/10/09/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3JVM--3.%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E5%99%A8%E4%B8%8E%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E7%AD%96%E7%95%A5/</url>
    <content><![CDATA[<h3 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p>åƒåœ¾æ”¶é›†(Garbage Collectionï¼Œç®€ç§°GC)æ€è€ƒï¼Ÿ</p>
<ul>
<li>å“ªäº›å†…å­˜éœ€è¦å›æ”¶ï¼Ÿ</li>
<li>ä»€ä¹ˆæ—¶å€™å›æ”¶ï¼Ÿ</li>
<li>å¦‚ä½•å›æ”¶ï¼Ÿ<br>äº†è§£åƒåœ¾æ”¶é›†å’Œå†…å­˜åˆ†é…çš„æ„ä¹‰ï¼Ÿ<br>å½“éœ€è¦æ’æŸ¥å„ç§å†…å­˜æº¢å‡ºã€å†…å­˜æ³„æ¼é—®é¢˜æ—¶ï¼Œå½“åƒåœ¾æ”¶é›†æˆä¸ºç³»ç»Ÿè¾¾åˆ°æ›´é«˜å¹¶å‘é‡çš„ç“¶é¢ˆæ—¶ï¼Œæˆ‘ä»¬å°±å¿…é¡»å¯¹è¿™äº›â€œè‡ªåŠ¨åŒ–â€çš„æŠ€æœ¯å®æ–½å¿…è¦çš„ç›‘æ§å’Œè°ƒèŠ‚ã€‚<br>Javaå„åŒºåŸŸåŒºåˆ«ï¼Ÿ</li>
</ul>
<ol>
<li><strong>ç¨‹åºè®¡æ•°å™¨ã€è™šæ‹Ÿæœºæ ˆã€æœ¬åœ°æ–¹æ³•æ ˆ</strong>3ä¸ªåŒºåŸŸéšçº¿ç¨‹è€Œç”Ÿï¼Œéšçº¿ç¨‹è€Œç­ï¼Œæ ˆä¸­çš„æ ˆå¸§éšç€æ–¹æ³•çš„è¿›å…¥å’Œé€€å‡ºè€Œæœ‰æ¡ä¸ç´Šåœ°æ‰§è¡Œç€å‡ºæ ˆå’Œå…¥æ ˆæ“ä½œã€‚æ¯ä¸€ä¸ªæ ˆå¸§ä¸­åˆ†é…å¤šå°‘å†…å­˜åŸºæœ¬ä¸Šæ˜¯åœ¨ç±»ç»“æ„ç¡®å®šä¸‹æ¥æ—¶å°±å·²çŸ¥çš„(å°½ç®¡åœ¨è¿è¡ŒæœŸä¼šç”±å³æ—¶ç¼–è¯‘å™¨è¿›è¡Œä¸€äº›ä¼˜åŒ–ï¼Œä½†åœ¨åŸºäºæ¦‚å¿µæ¨¡å‹çš„è®¨è®ºé‡Œï¼Œå¤§ä½“ä¸Šå¯ä»¥è®¤ä¸ºæ˜¯ç¼–è¯‘æœŸå¯çŸ¥çš„)ï¼Œå› æ­¤è¿™å‡ ä¸ªåŒºåŸŸçš„å†…å­˜åˆ†é…å’Œå›æ”¶éƒ½å…·å¤‡ç¡®å®šæ€§ï¼Œ åœ¨è¿™å‡ ä¸ªåŒºåŸŸå†…å°±<strong>ä¸éœ€è¦è¿‡å¤šè€ƒè™‘å¦‚ä½•å›æ”¶çš„é—®é¢˜</strong>ï¼Œå½“æ–¹æ³•ç»“æŸæˆ–è€…çº¿ç¨‹ç»“æŸæ—¶ï¼Œå†…å­˜è‡ªç„¶å°±è·Ÿéšç€å›æ”¶äº†ã€‚      </li>
<li><strong>å †å’Œæ–¹æ³•åŒº</strong>è¿™ä¸¤ä¸ªåŒºåŸŸåˆ™æœ‰ç€å¾ˆæ˜¾è‘—çš„ä¸ç¡®å®šæ€§:ä¸€ä¸ªæ¥å£çš„å¤šä¸ªå®ç°ç±»éœ€è¦çš„å†…å­˜å¯èƒ½ä¼šä¸ä¸€æ ·ï¼Œä¸€ä¸ªæ–¹æ³•æ‰€æ‰§è¡Œçš„ä¸åŒæ¡ä»¶åˆ†æ”¯æ‰€éœ€è¦çš„å†…å­˜ä¹Ÿå¯èƒ½ä¸ä¸€æ ·ï¼Œåªæœ‰å¤„äºè¿è¡ŒæœŸé—´ï¼Œæˆ‘ä»¬æ‰èƒ½çŸ¥é“ç¨‹åºç©¶ç«Ÿä¼šåˆ›å»ºå“ªäº›å¯¹è±¡ï¼Œåˆ›å»ºå¤šå°‘ä¸ªå¯¹è±¡ï¼Œè¿™éƒ¨åˆ†å†…å­˜çš„åˆ†é…å’Œå›æ”¶æ˜¯åŠ¨æ€çš„ã€‚åƒåœ¾æ”¶é›†å™¨<strong>æ‰€å…³æ³¨çš„æ­£æ˜¯è¿™éƒ¨åˆ†å†…å­˜è¯¥å¦‚ä½•ç®¡ç†</strong>ã€‚</li>
</ol>
<h3 id="åˆ¤æ–­å¯¹è±¡æ˜¯å¦å­˜æ´»"><a href="#åˆ¤æ–­å¯¹è±¡æ˜¯å¦å­˜æ´»" class="headerlink" title="åˆ¤æ–­å¯¹è±¡æ˜¯å¦å­˜æ´»"></a>åˆ¤æ–­å¯¹è±¡æ˜¯å¦å­˜æ´»</h3><h4 id="å¼•ç”¨è®¡æ•°ç®—æ³•"><a href="#å¼•ç”¨è®¡æ•°ç®—æ³•" class="headerlink" title="å¼•ç”¨è®¡æ•°ç®—æ³•"></a>å¼•ç”¨è®¡æ•°ç®—æ³•</h4><p><strong>å¼•ç”¨è®¡æ•°ç®—æ³•</strong>(Reference Counting)ï¼šåœ¨å¯¹è±¡ä¸­æ·»åŠ ä¸€ä¸ªå¼•ç”¨è®¡æ•°å™¨ï¼Œæ¯å½“æœ‰ä¸€ä¸ªåœ°æ–¹å¼•ç”¨å®ƒæ—¶ï¼Œè®¡æ•°å™¨å€¼å°±åŠ ä¸€;å½“å¼•ç”¨å¤±æ•ˆæ—¶ï¼Œè®¡æ•°å™¨å€¼å°±å‡ä¸€;ä»»ä½•æ—¶åˆ»è®¡æ•°å™¨ä¸ºé›¶çš„å¯¹è±¡å°±æ˜¯ä¸å¯èƒ½å†è¢«ä½¿ç”¨çš„<br>å¼•ç”¨è®¡æ•°ç®—æ³•è™½ç„¶å ç”¨äº†ä¸€äº›é¢å¤–çš„å†…å­˜ç©ºé—´æ¥è¿›è¡Œè®¡æ•°ï¼Œä½†å®ƒçš„åŸç†ç®€å•ï¼Œåˆ¤å®šæ•ˆç‡ä¹Ÿå¾ˆé«˜ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹å®ƒéƒ½æ˜¯ä¸€ä¸ªä¸é”™çš„ç®—æ³•ã€‚<br>åœ¨Javaé¢†åŸŸï¼Œè‡³å°‘ä¸»æµçš„Javaè™šæ‹Ÿæœºé‡Œé¢éƒ½æ²¡æœ‰é€‰ç”¨å¼•ç”¨è®¡æ•°ç®—æ³•æ¥ç®¡ç†å†…å­˜ï¼Œä¸»è¦åŸå› æ˜¯ï¼Œè¿™ä¸ªçœ‹ä¼¼ç®€å•çš„ç®—æ³•æœ‰å¾ˆå¤šä¾‹å¤–æƒ…å†µè¦è€ƒè™‘ï¼Œå¿…é¡»è¦é…åˆå¤§é‡é¢å¤–å¤„ç†æ‰èƒ½ä¿è¯æ­£ç¡®åœ°å·¥ä½œï¼Œè­¬å¦‚å•çº¯çš„å¼•ç”¨è®¡æ•°å°±å¾ˆéš¾è§£å†³å¯¹è±¡ä¹‹é—´ç›¸äº’å¾ªç¯å¼•ç”¨çš„é—®é¢˜ã€‚<br>ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼Œå¯¹è±¡objAå’ŒobjBéƒ½æœ‰å­—æ®µinstanceï¼Œèµ‹å€¼ä»¤ objA.instance=objBåŠobjB.instance=objAï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œè¿™ä¸¤ä¸ªå¯¹è±¡å†æ— ä»»ä½•å¼•ç”¨ï¼Œå®é™…ä¸Šè¿™ä¸¤ä¸ªå¯¹è±¡å·²ç»ä¸å¯èƒ½å†è¢«è®¿é—®ï¼Œä½†æ˜¯å®ƒä»¬å› ä¸ºäº’ç›¸å¼•ç”¨ç€å¯¹æ–¹ï¼Œå¯¼è‡´å®ƒä»¬çš„å¼•ç”¨è®¡æ•°éƒ½ä¸ä¸ºé›¶ï¼Œå¼•ç”¨è®¡æ•°ç®—æ³•ä¹Ÿå°±æ— æ³•å›æ”¶å®ƒä»¬ã€‚      </p>
<h4 id="å¯è¾¾æ€§åˆ†æç®—æ³•"><a href="#å¯è¾¾æ€§åˆ†æç®—æ³•" class="headerlink" title="å¯è¾¾æ€§åˆ†æç®—æ³•"></a>å¯è¾¾æ€§åˆ†æç®—æ³•</h4><p>å½“å‰ä¸»æµçš„å•†ç”¨ç¨‹åºè¯­è¨€(Javaã€C#ï¼Œä¸Šæº¯è‡³å‰é¢æåˆ°çš„å¤è€çš„Lisp)çš„å†…å­˜ç®¡ç†å­ç³»ç»Ÿï¼Œéƒ½æ˜¯é€šè¿‡<strong>å¯è¾¾æ€§åˆ†æ</strong>(Reachability Analysis)ç®—æ³•æ¥åˆ¤å®šå¯¹è±¡æ˜¯å¦å­˜æ´»çš„ã€‚è¿™ä¸ªç®—æ³•çš„åŸºæœ¬æ€è·¯å°±æ˜¯é€šè¿‡ä¸€ç³»åˆ—ç§°ä¸ºâ€œGC Rootsâ€çš„æ ¹å¯¹è±¡ä½œä¸ºèµ·å§‹èŠ‚ç‚¹é›†ï¼Œä»è¿™äº›èŠ‚ç‚¹å¼€å§‹ï¼Œæ ¹æ®å¼•ç”¨å…³ç³»å‘ä¸‹æœç´¢ï¼Œæœç´¢è¿‡ç¨‹æ‰€èµ°è¿‡çš„è·¯å¾„ç§°ä¸ºâ€œå¼•ç”¨é“¾â€(Reference Chain)ï¼Œå¦‚æœæŸä¸ªå¯¹è±¡åˆ°GC Rootsé—´æ²¡æœ‰ä»»ä½•å¼•ç”¨é“¾ç›¸è¿ï¼Œ æˆ–è€…ç”¨å›¾è®ºçš„è¯æ¥è¯´å°±æ˜¯ä»GC Rootsåˆ°è¿™ä¸ªå¯¹è±¡ä¸å¯è¾¾æ—¶ï¼Œåˆ™è¯æ˜æ­¤å¯¹è±¡æ˜¯ä¸å¯èƒ½å†è¢«ä½¿ç”¨çš„ã€‚<br>ä¾‹ï¼šå¯¹è±¡object5ã€object6ã€object7è™½ç„¶äº’æœ‰å…³è”ï¼Œä½†æ˜¯å®ƒä»¬åˆ°GC Rootsæ˜¯ä¸å¯è¾¾çš„ï¼Œå› æ­¤å®ƒä»¬å°†ä¼šè¢«åˆ¤å®šä¸ºå¯å›æ”¶çš„å¯¹è±¡      </p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/10/09/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3JVM--3.%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E5%99%A8%E4%B8%8E%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E7%AD%96%E7%95%A5/content1.png" class title="content1">

<p>åœ¨JavaæŠ€æœ¯ä½“ç³»é‡Œé¢ï¼Œå›ºå®šå¯ä½œä¸ºGC Rootsçš„å¯¹è±¡åŒ…æ‹¬ä»¥ä¸‹å‡ ç§: </p>
<ul>
<li>åœ¨è™šæ‹Ÿæœºæ ˆ(æ ˆå¸§ä¸­çš„æœ¬åœ°å˜é‡è¡¨)ä¸­å¼•ç”¨çš„å¯¹è±¡ï¼Œè­¬å¦‚å„ä¸ªçº¿ç¨‹è¢«è°ƒç”¨çš„æ–¹æ³•å †æ ˆä¸­ä½¿ç”¨åˆ°çš„å‚æ•°ã€å±€éƒ¨å˜é‡ã€ä¸´æ—¶å˜é‡ç­‰ã€‚ </li>
<li>åœ¨æ–¹æ³•åŒºä¸­ç±»é™æ€å±æ€§å¼•ç”¨çš„å¯¹è±¡ï¼Œè­¬å¦‚Javaç±»çš„å¼•ç”¨ç±»å‹é™æ€å˜é‡ã€‚ </li>
<li>åœ¨æ–¹æ³•åŒºä¸­å¸¸é‡å¼•ç”¨çš„å¯¹è±¡ï¼Œè­¬å¦‚å­—ç¬¦ä¸²å¸¸é‡æ± (String Table)é‡Œçš„å¼•ç”¨ã€‚      </li>
<li>åœ¨æœ¬åœ°æ–¹æ³•æ ˆä¸­JNI(å³é€šå¸¸æ‰€è¯´çš„Nativeæ–¹æ³•)å¼•ç”¨çš„å¯¹è±¡ã€‚ </li>
<li>Javaè™šæ‹Ÿæœºå†…éƒ¨çš„å¼•ç”¨ï¼Œå¦‚åŸºæœ¬æ•°æ®ç±»å‹å¯¹åº”çš„Classå¯¹è±¡ï¼Œä¸€äº›å¸¸é©»çš„å¼‚å¸¸å¯¹è±¡(æ¯”å¦‚NullPointExcepitonã€OutOfMemoryError)ç­‰ï¼Œè¿˜æœ‰ç³»ç»Ÿç±»åŠ è½½å™¨ã€‚ </li>
<li>æ‰€æœ‰è¢«åŒæ­¥é”(synchronizedå…³é”®å­—)æŒæœ‰çš„å¯¹è±¡ã€‚</li>
<li>åæ˜ Javaè™šæ‹Ÿæœºå†…éƒ¨æƒ…å†µçš„JM XBeanã€JVM TIä¸­æ³¨å†Œçš„å›è°ƒã€æœ¬åœ°ä»£ç ç¼“å­˜ç­‰ã€‚<br>é™¤äº†è¿™äº›å›ºå®šçš„GC Rootsé›†åˆä»¥å¤–ï¼Œæ ¹æ®ç”¨æˆ·æ‰€é€‰ç”¨çš„åƒåœ¾æ”¶é›†å™¨ä»¥åŠå½“å‰å›æ”¶çš„å†…å­˜åŒºåŸŸä¸åŒï¼Œè¿˜å¯ä»¥æœ‰å…¶ä»–å¯¹è±¡â€œä¸´æ—¶æ€§â€åœ°åŠ å…¥ï¼Œå…±åŒæ„æˆå®Œæ•´GC Rootsé›†åˆã€‚è­¬å¦‚åˆ†ä»£æ”¶é›†å’Œå±€éƒ¨å›æ”¶(Partial GC)ï¼Œå¦‚æœåªé’ˆå¯¹Javaå †ä¸­æŸä¸€å—åŒºåŸŸå‘èµ·åƒåœ¾æ”¶é›†æ—¶(å¦‚æœ€å…¸å‹çš„åªé’ˆå¯¹æ–°ç”Ÿä»£çš„åƒåœ¾æ”¶é›†)ï¼Œå¿…é¡»è€ƒè™‘åˆ°å†…å­˜åŒºåŸŸæ˜¯è™šæ‹Ÿæœºè‡ªå·±çš„å®ç°ç»†èŠ‚(åœ¨ç”¨æˆ·è§†è§’é‡Œä»»ä½•å†…å­˜åŒºåŸŸéƒ½æ˜¯ä¸å¯è§çš„)ï¼Œæ›´ä¸æ˜¯å­¤ç«‹å°é—­çš„ï¼Œæ‰€ä»¥æŸä¸ªåŒºåŸŸé‡Œçš„å¯¹è±¡å®Œå…¨æœ‰å¯èƒ½è¢«ä½äºå †ä¸­å…¶ä»–åŒºåŸŸçš„å¯¹è±¡æ‰€å¼•ç”¨ï¼Œè¿™æ—¶å€™å°±éœ€è¦å°†è¿™äº›å…³è”åŒºåŸŸçš„å¯¹è±¡ä¹Ÿä¸€å¹¶åŠ å…¥GC Rootsé›†åˆä¸­å»ï¼Œæ‰èƒ½ä¿è¯å¯è¾¾æ€§åˆ†æçš„æ­£ç¡®æ€§ã€‚</li>
</ul>
<h4 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h4><p>å¼•ç”¨å®šä¹‰ï¼š å¦‚æœreferenceç±»å‹çš„æ•°æ®ä¸­å­˜å‚¨çš„æ•°å€¼ä»£è¡¨çš„æ˜¯å¦å¤–ä¸€å—å†…å­˜çš„èµ·å§‹åœ°å€ï¼Œå°±ç§°è¯¥referenceæ•°æ®æ˜¯ä»£è¡¨æŸå—å†…å­˜ã€æŸä¸ªå¯¹è±¡çš„å¼•ç”¨ã€‚<br>åœ¨JDK 1.2ç‰ˆä¹‹åï¼ŒJavaå¯¹å¼•ç”¨çš„æ¦‚å¿µè¿›è¡Œäº†æ‰©å……ï¼Œå°†å¼•ç”¨åˆ†ä¸º<strong>å¼ºå¼•ç”¨</strong>(Strongly Reference)ã€<strong>è½¯å¼•ç”¨</strong>(Soft Reference)ã€<strong>å¼±å¼•ç”¨</strong>(Weak Reference)å’Œ<strong>è™šå¼•ç”¨</strong>(Phantom Reference)4ç§ï¼Œè¿™4ç§å¼•ç”¨å¼ºåº¦ä¾æ¬¡é€æ¸å‡å¼±ã€‚ </p>
<ul>
<li>å¼ºå¼•ç”¨æ˜¯æœ€ä¼ ç»Ÿçš„â€œå¼•ç”¨â€çš„å®šä¹‰ï¼Œæ˜¯æŒ‡åœ¨ç¨‹åºä»£ç ä¹‹ä¸­æ™®éå­˜åœ¨çš„å¼•ç”¨èµ‹å€¼ï¼Œå³ç±»ä¼¼â€œObject obj=new Object()â€è¿™ç§å¼•ç”¨å…³ç³»ã€‚æ— è®ºä»»ä½•æƒ…å†µä¸‹ï¼Œåªè¦å¼ºå¼•ç”¨å…³ç³»è¿˜å­˜åœ¨ï¼Œåƒåœ¾æ”¶é›†å™¨å°±æ°¸è¿œä¸ä¼šå›æ”¶æ‰è¢«å¼•ç”¨çš„å¯¹è±¡ã€‚ </li>
<li>è½¯å¼•ç”¨æ˜¯ç”¨æ¥æè¿°ä¸€äº›è¿˜æœ‰ç”¨ï¼Œä½†éå¿…é¡»çš„å¯¹è±¡ã€‚åªè¢«è½¯å¼•ç”¨å…³è”ç€çš„å¯¹è±¡ï¼Œåœ¨ç³»ç»Ÿå°†è¦å‘ç”Ÿå†…å­˜æº¢å‡ºå¼‚å¸¸å‰ï¼Œä¼šæŠŠè¿™äº›å¯¹è±¡åˆ—è¿›å›æ”¶èŒƒå›´ä¹‹ä¸­è¿›è¡Œç¬¬äºŒæ¬¡å›æ”¶ï¼Œå¦‚æœè¿™æ¬¡å›æ”¶è¿˜æ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜ï¼Œæ‰ä¼šæŠ›å‡ºå†…å­˜æº¢å‡ºå¼‚å¸¸ã€‚åœ¨JDK 1.2ç‰ˆä¹‹åæä¾›äº†SoftReferenceç±»æ¥å®ç°è½¯å¼•ç”¨ã€‚</li>
<li>å¼±å¼•ç”¨ä¹Ÿæ˜¯ç”¨æ¥æè¿°é‚£äº›éå¿…é¡»å¯¹è±¡ï¼Œä½†æ˜¯å®ƒçš„å¼ºåº¦æ¯”è½¯å¼•ç”¨æ›´å¼±ä¸€äº›ï¼Œè¢«å¼±å¼•ç”¨å…³è”çš„å¯¹è±¡åªèƒ½ç”Ÿå­˜åˆ°ä¸‹ä¸€æ¬¡åƒåœ¾æ”¶é›†å‘ç”Ÿä¸ºæ­¢ã€‚å½“åƒåœ¾æ”¶é›†å™¨å¼€å§‹å·¥ä½œï¼Œæ— è®ºå½“å‰å†…å­˜æ˜¯å¦è¶³å¤Ÿï¼Œéƒ½ä¼šå›æ”¶æ‰åªè¢«å¼±å¼•ç”¨å…³è”çš„å¯¹è±¡ã€‚åœ¨JDK 1.2ç‰ˆä¹‹åæä¾›äº†WeakReferenceç±»æ¥å®ç°å¼±å¼•ç”¨ã€‚ </li>
<li>è™šå¼•ç”¨ä¹Ÿç§°ä¸ºâ€œå¹½çµå¼•ç”¨â€æˆ–è€…â€œå¹»å½±å¼•ç”¨â€ï¼Œå®ƒæ˜¯æœ€å¼±çš„ä¸€ç§å¼•ç”¨å…³ç³»ã€‚ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æœ‰è™šå¼•ç”¨çš„å­˜åœ¨ï¼Œå®Œå…¨ä¸ä¼šå¯¹å…¶ç”Ÿå­˜æ—¶é—´æ„æˆå½±å“ï¼Œä¹Ÿæ— æ³•é€šè¿‡è™šå¼•ç”¨æ¥å–å¾—ä¸€ä¸ªå¯¹è±¡å®ä¾‹ã€‚ä¸ºä¸€ä¸ªå¯¹è±¡è®¾ç½®è™šå¼•ç”¨å…³è”çš„å”¯ä¸€ç›®çš„åªæ˜¯ä¸ºäº†èƒ½åœ¨è¿™ä¸ªå¯¹è±¡è¢«æ”¶é›†å™¨å›æ”¶æ—¶æ”¶åˆ°ä¸€ä¸ªç³»ç»Ÿé€šçŸ¥ã€‚åœ¨JDK 1.2ç‰ˆä¹‹åæä¾›äº†PhantomReferenceç±»æ¥å®ç°è™šå¼•ç”¨ã€‚</li>
</ul>
<h4 id="å›æ”¶å‰çš„finalize"><a href="#å›æ”¶å‰çš„finalize" class="headerlink" title="å›æ”¶å‰çš„finalize()"></a>å›æ”¶å‰çš„finalize()</h4><p>è¦çœŸæ­£å›æ”¶ä¸€ä¸ªå¯¹è±¡ï¼Œè‡³å°‘è¦ç»å†<strong>ä¸¤æ¬¡æ ‡è®°</strong>è¿‡ç¨‹:å¦‚æœå¯¹è±¡åœ¨è¿›è¡Œå¯è¾¾æ€§åˆ†æåå‘ç°æ²¡æœ‰ä¸GC Rootsç›¸è¿æ¥çš„å¼•ç”¨é“¾ï¼Œé‚£å®ƒå°†ä¼šè¢«ç¬¬ä¸€æ¬¡æ ‡è®°ï¼Œéšåè¿›è¡Œä¸€æ¬¡ç­›é€‰ï¼Œç­›é€‰çš„æ¡ä»¶æ˜¯æ­¤å¯¹è±¡æ˜¯å¦æœ‰å¿…è¦æ‰§è¡Œfinalize()æ–¹æ³•ã€‚å‡å¦‚å¯¹è±¡æ²¡æœ‰è¦†ç›–finalize()æ–¹æ³•ï¼Œæˆ–è€…finalize()æ–¹æ³•å·²ç»è¢«è™šæ‹Ÿæœºè°ƒç”¨è¿‡ï¼Œé‚£ä¹ˆè™šæ‹Ÿæœºå°†è¿™ä¸¤ç§æƒ…å†µéƒ½è§†ä¸ºâ€œæ²¡æœ‰å¿…è¦æ‰§è¡Œâ€ã€‚<br>å¦‚æœè¿™ä¸ªå¯¹è±¡è¢«åˆ¤å®šä¸ºç¡®æœ‰å¿…è¦æ‰§è¡Œfinalize()æ–¹æ³•ï¼Œé‚£ä¹ˆè¯¥å¯¹è±¡å°†ä¼šè¢«æ”¾ç½®åœ¨ä¸€ä¸ªåä¸º<strong>F-Queueçš„é˜Ÿåˆ—</strong>ä¹‹ä¸­ï¼Œå¹¶åœ¨ç¨åç”±ä¸€æ¡ç”±è™šæ‹Ÿæœºè‡ªåŠ¨å»ºç«‹çš„ã€ä½è°ƒåº¦ä¼˜å…ˆçº§çš„<strong>Finalizerçº¿ç¨‹</strong>å»æ‰§è¡Œå®ƒä»¬çš„finalize()æ–¹æ³•ã€‚è¿™é‡Œæ‰€è¯´çš„â€œæ‰§è¡Œâ€æ˜¯æŒ‡è™šæ‹Ÿæœºä¼šè§¦å‘è¿™ä¸ªæ–¹æ³•å¼€å§‹è¿è¡Œï¼Œä½†å¹¶ä¸æ‰¿è¯ºä¸€å®šä¼šç­‰å¾…å®ƒè¿è¡Œç»“æŸã€‚ è¿™æ ·åšçš„åŸå› æ˜¯ï¼Œå¦‚æœæŸä¸ªå¯¹è±¡çš„finalize()æ–¹æ³•æ‰§è¡Œç¼“æ…¢ï¼Œæˆ–è€…æ›´æç«¯åœ°å‘ç”Ÿäº†æ­»å¾ªç¯ï¼Œå°†å¾ˆå¯èƒ½å¯¼è‡´F-Queueé˜Ÿåˆ—ä¸­çš„å…¶ä»–å¯¹è±¡æ°¸ä¹…å¤„äºç­‰å¾…ï¼Œç”šè‡³å¯¼è‡´æ•´ä¸ªå†…å­˜å›æ”¶å­ç³»ç»Ÿçš„å´©æºƒã€‚<strong>finalize()æ–¹æ³•æ˜¯å¯¹è±¡é€ƒè„±æ­»äº¡å‘½è¿çš„æœ€åä¸€æ¬¡æœºä¼š</strong>ï¼Œç¨åæ”¶é›†å™¨å°†å¯¹F-Queueä¸­çš„å¯¹è±¡è¿›è¡Œç¬¬äºŒæ¬¡å°è§„æ¨¡çš„æ ‡è®°ï¼Œå¦‚æœå¯¹ è±¡è¦åœ¨finalize()ä¸­æˆåŠŸæ‹¯æ•‘è‡ªå·±â€”â€”åªè¦é‡æ–°ä¸å¼•ç”¨é“¾ä¸Šçš„ä»»ä½•ä¸€ä¸ªå¯¹è±¡å»ºç«‹å…³è”å³å¯ï¼Œè­¬å¦‚æŠŠè‡ªå·± (thiså…³é”®å­—)èµ‹å€¼ç»™æŸä¸ªç±»å˜é‡æˆ–è€…å¯¹è±¡çš„æˆå‘˜å˜é‡ï¼Œé‚£åœ¨ç¬¬äºŒæ¬¡æ ‡è®°æ—¶å®ƒå°†è¢«ç§»å‡ºâ€œå³å°†å›æ”¶â€çš„é›†åˆ;å¦‚æœå¯¹è±¡è¿™æ—¶å€™è¿˜æ²¡æœ‰é€ƒè„±ï¼Œé‚£åŸºæœ¬ä¸Šå®ƒå°±çœŸçš„è¦è¢«å›æ”¶äº†ã€‚      </p>
<h4 id="å›æ”¶æ–¹æ³•åŒº"><a href="#å›æ”¶æ–¹æ³•åŒº" class="headerlink" title="å›æ”¶æ–¹æ³•åŒº"></a>å›æ”¶æ–¹æ³•åŒº</h4><p><strong>æ–¹æ³•åŒºçš„åƒåœ¾æ”¶é›†ä¸»è¦å›æ”¶ä¸¤éƒ¨åˆ†å†…å®¹:åºŸå¼ƒçš„å¸¸é‡å’Œä¸å†ä½¿ç”¨çš„ç±»å‹</strong>ã€‚<br><strong>å›æ”¶åºŸå¼ƒå¸¸é‡</strong>ï¼šä¸¾ä¸ªå¸¸é‡æ± ä¸­å­—é¢é‡å›æ”¶çš„ä¾‹å­ï¼Œå‡å¦‚ä¸€ä¸ªå­—ç¬¦ä¸²â€œjavaâ€æ›¾ç»è¿›å…¥å¸¸é‡æ± ä¸­ï¼Œä½†æ˜¯å½“å‰ç³»ç»Ÿåˆæ²¡æœ‰ä»»ä½•ä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡çš„å€¼æ˜¯â€œjavaâ€ï¼Œæ¢å¥è¯è¯´ï¼Œå·²ç»æ²¡æœ‰ä»»ä½•å­—ç¬¦ä¸²å¯¹è±¡å¼•ç”¨å¸¸é‡æ± ä¸­çš„â€œjavaâ€å¸¸é‡ï¼Œä¸”è™šæ‹Ÿæœºä¸­ä¹Ÿæ²¡æœ‰å…¶ä»–åœ°æ–¹å¼•ç”¨è¿™ä¸ªå­—é¢é‡ã€‚å¦‚æœåœ¨è¿™æ—¶å‘ç”Ÿå†…å­˜å›æ”¶ï¼Œè€Œä¸”åƒåœ¾æ”¶é›†å™¨åˆ¤æ–­ç¡®æœ‰å¿…è¦çš„è¯ï¼Œè¿™ä¸ªâ€œjavaâ€å¸¸é‡å°±å°†ä¼šè¢«ç³»ç»Ÿæ¸…ç†å‡ºå¸¸é‡æ± ã€‚å¸¸é‡æ± ä¸­å…¶ä»–ç±»(æ¥å£)ã€æ–¹æ³•ã€å­—æ®µçš„ç¬¦å·å¼•ç”¨ä¹Ÿä¸æ­¤ç±»ä¼¼ã€‚<br><strong>å›æ”¶ç±»å‹</strong>: </p>
<ul>
<li>è¯¥ç±»æ‰€æœ‰çš„å®ä¾‹éƒ½å·²ç»è¢«å›æ”¶ï¼Œä¹Ÿå°±æ˜¯Javaå †ä¸­ä¸å­˜åœ¨è¯¥ç±»åŠå…¶ä»»ä½•æ´¾ç”Ÿå­ç±»çš„å®ä¾‹ã€‚ </li>
<li>åŠ è½½è¯¥ç±»çš„ç±»åŠ è½½å™¨å·²ç»è¢«å›æ”¶ï¼Œè¿™ä¸ªæ¡ä»¶é™¤éæ˜¯ç»è¿‡ç²¾å¿ƒè®¾è®¡çš„å¯æ›¿æ¢ç±»åŠ è½½å™¨çš„åœºæ™¯ï¼Œå¦‚OSGiã€JSPçš„é‡åŠ è½½ç­‰ï¼Œå¦åˆ™é€šå¸¸æ˜¯å¾ˆéš¾è¾¾æˆçš„ã€‚ </li>
<li>è¯¥ç±»å¯¹åº”çš„java.lang.Classå¯¹è±¡æ²¡æœ‰åœ¨ä»»ä½•åœ°æ–¹è¢«å¼•ç”¨ï¼Œæ— æ³•åœ¨ä»»ä½•åœ°æ–¹é€šè¿‡åå°„è®¿é—®è¯¥ç±»çš„æ–¹æ³•ã€‚<br>Javaè™šæ‹Ÿæœºè¢«å…è®¸å¯¹æ»¡è¶³ä¸Šè¿°ä¸‰ä¸ªæ¡ä»¶çš„æ— ç”¨ç±»è¿›è¡Œå›æ”¶ï¼Œè¿™é‡Œè¯´çš„ä»…ä»…æ˜¯â€œè¢«å…è®¸â€ï¼Œè€Œå¹¶ä¸æ˜¯å’Œå¯¹è±¡ä¸€æ ·ï¼Œæ²¡æœ‰å¼•ç”¨äº†å°±å¿…ç„¶ä¼šå›æ”¶ã€‚      </li>
</ul>
<h3 id="åƒåœ¾æ”¶é›†ç®—æ³•"><a href="#åƒåœ¾æ”¶é›†ç®—æ³•" class="headerlink" title="åƒåœ¾æ”¶é›†ç®—æ³•"></a>åƒåœ¾æ”¶é›†ç®—æ³•</h3><h4 id="åˆ†ä»£æ”¶é›†ç†è®º"><a href="#åˆ†ä»£æ”¶é›†ç†è®º" class="headerlink" title="åˆ†ä»£æ”¶é›†ç†è®º"></a>åˆ†ä»£æ”¶é›†ç†è®º</h4><p>å½“å‰å•†ä¸šè™šæ‹Ÿæœºçš„åƒåœ¾æ”¶é›†å™¨ï¼Œå¤§å¤šæ•°éƒ½éµå¾ªäº†â€œåˆ†ä»£æ”¶é›†â€(Generational Collection)çš„ç†è®ºè¿›è¡Œè®¾è®¡ï¼Œåˆ†ä»£æ”¶é›†åä¸ºç†è®ºï¼Œå®è´¨æ˜¯ä¸€å¥—ç¬¦åˆå¤§å¤šæ•°ç¨‹åºè¿è¡Œå®é™…æƒ…å†µçš„ç»éªŒæ³•åˆ™ï¼Œå®ƒå»ºç«‹åœ¨ä¸¤ä¸ªåˆ†ä»£å‡è¯´ä¹‹ä¸Š:<br>1)å¼±åˆ†ä»£å‡è¯´(Weak Generational Hypothesis):ç»å¤§å¤šæ•°å¯¹è±¡éƒ½æ˜¯æœç”Ÿå¤•ç­çš„ã€‚<br>2)å¼ºåˆ†ä»£å‡è¯´(Strong Generational Hypothesis):ç†¬è¿‡è¶Šå¤šæ¬¡åƒåœ¾æ”¶é›†è¿‡ç¨‹çš„å¯¹è±¡å°±è¶Šéš¾ä»¥æ¶ˆäº¡ã€‚<br>è¿™ä¸¤ä¸ªåˆ†ä»£å‡è¯´å…±åŒå¥ å®šäº†å¤šæ¬¾å¸¸ç”¨çš„åƒåœ¾æ”¶é›†å™¨çš„ä¸€è‡´çš„è®¾è®¡åŸåˆ™:æ”¶é›†å™¨åº”è¯¥å°†Javaå †åˆ’åˆ†å‡ºä¸åŒçš„åŒºåŸŸï¼Œç„¶åå°†å›æ”¶å¯¹è±¡ä¾æ®å…¶å¹´é¾„(å¹´é¾„å³å¯¹è±¡ç†¬è¿‡åƒåœ¾æ”¶é›†è¿‡ç¨‹çš„æ¬¡æ•°)åˆ†é…åˆ°ä¸åŒçš„åŒºåŸŸä¹‹ä¸­å­˜å‚¨ã€‚æ˜¾è€Œæ˜“è§ï¼Œå¦‚æœä¸€ä¸ªåŒºåŸŸä¸­å¤§å¤šæ•°å¯¹è±¡éƒ½æ˜¯æœç”Ÿå¤•ç­ï¼Œéš¾ä»¥ç†¬è¿‡åƒåœ¾æ”¶é›†è¿‡ç¨‹çš„è¯ï¼Œé‚£ä¹ˆæŠŠå®ƒä»¬é›†ä¸­æ”¾åœ¨ä¸€èµ·ï¼Œæ¯æ¬¡å›æ”¶æ—¶åªå…³æ³¨å¦‚ä½•ä¿ç•™å°‘é‡å­˜æ´»è€Œä¸æ˜¯å»æ ‡è®°é‚£äº›å¤§é‡å°†è¦è¢«å›æ”¶çš„å¯¹è±¡ï¼Œå°±èƒ½ä»¥è¾ƒä½ä»£ä»·å›æ”¶åˆ°å¤§é‡çš„ç©ºé—´;å¦‚æœå‰©ä¸‹çš„éƒ½æ˜¯éš¾ä»¥æ¶ˆäº¡çš„å¯¹è±¡ï¼Œé‚£æŠŠå®ƒä»¬é›†ä¸­æ”¾åœ¨ä¸€å—ï¼Œè™šæ‹Ÿæœºä¾¿å¯ä»¥ä½¿ç”¨è¾ƒä½çš„é¢‘ç‡æ¥å›æ”¶è¿™ä¸ªåŒºåŸŸï¼Œè¿™å°±åŒæ—¶å…¼é¡¾äº†åƒåœ¾æ”¶é›†çš„æ—¶é—´å¼€é”€å’Œå†…å­˜çš„ç©ºé—´æœ‰æ•ˆåˆ©ç”¨ã€‚<br>æŠŠåˆ†ä»£æ”¶é›†ç†è®ºå…·ä½“æ”¾åˆ°ç°åœ¨çš„å•†ç”¨Javaè™šæ‹Ÿæœºé‡Œï¼Œè®¾è®¡è€…ä¸€èˆ¬è‡³å°‘ä¼šæŠŠJavaå †åˆ’åˆ†ä¸º<strong>æ–°ç”Ÿä»£</strong>(Young Generation)å’Œ<strong>è€å¹´ä»£</strong>(Old Generation)ä¸¤ä¸ªåŒºåŸŸã€‚é¡¾åæ€ä¹‰ï¼Œåœ¨æ–°ç”Ÿä»£ä¸­ï¼Œæ¯æ¬¡åƒåœ¾æ”¶é›†æ—¶éƒ½å‘ç°æœ‰å¤§æ‰¹å¯¹è±¡æ­»å»ï¼Œè€Œæ¯æ¬¡å›æ”¶åå­˜æ´»çš„å°‘é‡å¯¹è±¡ï¼Œå°†ä¼šé€æ­¥æ™‹å‡åˆ°è€å¹´ä»£ä¸­å­˜æ”¾ã€‚      </p>
<h4 id="æ ‡è®°-æ¸…é™¤ç®—æ³•"><a href="#æ ‡è®°-æ¸…é™¤ç®—æ³•" class="headerlink" title="æ ‡è®°-æ¸…é™¤ç®—æ³•"></a>æ ‡è®°-æ¸…é™¤ç®—æ³•</h4><p>æœ€æ—©å‡ºç°ä¹Ÿæ˜¯æœ€åŸºç¡€çš„åƒåœ¾æ”¶é›†ç®—æ³•æ˜¯â€œæ ‡è®°-æ¸…é™¤â€(Mark-Sweep)ç®—æ³•ã€‚<br>ç®—æ³•åˆ†ä¸ºâ€œæ ‡è®°â€å’Œâ€œæ¸…é™¤â€ä¸¤ä¸ªé˜¶æ®µ:é¦–å…ˆæ ‡è®°å‡ºæ‰€æœ‰éœ€è¦å›æ”¶çš„å¯¹è±¡ï¼Œåœ¨æ ‡è®°å®Œæˆåï¼Œç»Ÿä¸€å›æ”¶æ‰æ‰€æœ‰è¢«æ ‡è®°çš„å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥åè¿‡æ¥ï¼Œæ ‡è®°å­˜æ´»çš„å¯¹è±¡ï¼Œç»Ÿä¸€å›æ”¶æ‰€æœ‰æœªè¢«æ ‡è®°çš„å¯¹è±¡ã€‚æ ‡è®°è¿‡ç¨‹å°±æ˜¯å¯¹è±¡æ˜¯å¦å±äºåƒåœ¾çš„åˆ¤å®šè¿‡ç¨‹ã€‚<br>å®ƒçš„ä¸»è¦ç¼ºç‚¹æœ‰ä¸¤ä¸ª:ç¬¬ä¸€ä¸ªæ˜¯æ‰§è¡Œæ•ˆç‡ä¸ç¨³å®šï¼Œå¦‚æœJavaå †ä¸­åŒ…å«å¤§é‡å¯¹è±¡ï¼Œè€Œä¸”å…¶ä¸­å¤§éƒ¨åˆ†æ˜¯éœ€è¦è¢«å›æ”¶çš„ï¼Œè¿™æ—¶å¿…é¡»è¿›è¡Œå¤§é‡æ ‡è®°å’Œæ¸…é™¤çš„åŠ¨ä½œï¼Œå¯¼è‡´æ ‡è®°å’Œæ¸…é™¤ä¸¤ä¸ªè¿‡ç¨‹çš„æ‰§è¡Œæ•ˆç‡éƒ½éšå¯¹è±¡æ•°é‡å¢é•¿è€Œé™ä½;ç¬¬äºŒä¸ªæ˜¯å†…å­˜ç©ºé—´çš„ç¢ç‰‡åŒ–é—®é¢˜ï¼Œæ ‡è®°ã€æ¸…é™¤ä¹‹åä¼šäº§ç”Ÿå¤§é‡ä¸è¿ç»­çš„å†…å­˜ç¢ç‰‡ï¼Œç©ºé—´ç¢ç‰‡å¤ªå¤šå¯èƒ½ä¼šå¯¼è‡´å½“ä»¥ååœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­éœ€è¦åˆ†é…è¾ƒå¤§å¯¹è±¡æ—¶æ— æ³•åˆ°è¶³å¤Ÿçš„è¿ç»­å†…å­˜è€Œä¸å¾—ä¸æå‰è§¦å‘å¦ä¸€æ¬¡åƒåœ¾æ”¶é›†åŠ¨ä½œã€‚</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/10/09/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3JVM--3.%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E5%99%A8%E4%B8%8E%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E7%AD%96%E7%95%A5/content2.png" class title="content2">

<h4 id="æ ‡è®°-å¤åˆ¶ç®—æ³•"><a href="#æ ‡è®°-å¤åˆ¶ç®—æ³•" class="headerlink" title="æ ‡è®°-å¤åˆ¶ç®—æ³•"></a>æ ‡è®°-å¤åˆ¶ç®—æ³•</h4><p>æ ‡è®°-å¤åˆ¶ç®—æ³•å¸¸è¢«ç®€ç§°ä¸ºå¤åˆ¶ç®—æ³•ï¼Œå®ƒå°†å¯ç”¨å†…å­˜æŒ‰å®¹é‡åˆ’åˆ†ä¸ºå¤§å°ç›¸ç­‰çš„ä¸¤å—ï¼Œæ¯æ¬¡åªä½¿ç”¨å…¶ä¸­çš„ä¸€å—ã€‚å½“è¿™ä¸€å—çš„å†…å­˜ç”¨å®Œäº†ï¼Œå°±å°†è¿˜å­˜æ´»ç€çš„å¯¹è±¡å¤åˆ¶åˆ°å¦å¤–ä¸€å—ä¸Šé¢ï¼Œç„¶åå†æŠŠå·²ä½¿ç”¨è¿‡çš„å†…å­˜ç©ºé—´ä¸€æ¬¡æ¸…ç†æ‰ã€‚å¦‚æœå†…å­˜ä¸­å¤šæ•°å¯¹è±¡éƒ½æ˜¯å­˜æ´»çš„ï¼Œè¿™ç§ç®—æ³•å°†ä¼šäº§ç”Ÿå¤§é‡çš„å†…å­˜é—´å¤åˆ¶çš„å¼€é”€ï¼Œä½†å¯¹äºå¤šæ•°å¯¹è±¡éƒ½æ˜¯å¯å›æ”¶çš„æƒ…å†µï¼Œç®—æ³•éœ€è¦å¤åˆ¶çš„å°±æ˜¯å å°‘æ•°çš„å­˜æ´»å¯¹è±¡ï¼Œè€Œä¸”æ¯æ¬¡éƒ½æ˜¯é’ˆå¯¹æ•´ä¸ªåŠåŒºè¿›è¡Œå†…å­˜å›æ”¶ï¼Œåˆ†é…å†…å­˜æ—¶ä¹Ÿå°±ä¸ç”¨è€ƒè™‘æœ‰ç©ºé—´ç¢ç‰‡çš„å¤æ‚æƒ…å†µï¼Œåªè¦ç§»åŠ¨å †é¡¶æŒ‡é’ˆï¼ŒæŒ‰é¡ºåºåˆ†é…å³å¯ã€‚è¿™æ ·å®ç°ç®€å•ï¼Œè¿è¡Œé«˜æ•ˆï¼Œä¸è¿‡å…¶ç¼ºé™·ä¹Ÿæ˜¾è€Œæ˜“è§ï¼Œè¿™ç§å¤åˆ¶å›æ”¶ç®—æ³•çš„ä»£ä»·æ˜¯å°†å¯ç”¨å†…å­˜ç¼©å°ä¸ºäº†åŸæ¥çš„ä¸€åŠï¼Œç©ºé—´æµªè´¹æœªå…å¤ªå¤šäº†ä¸€ç‚¹ã€‚</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/10/09/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3JVM--3.%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E5%99%A8%E4%B8%8E%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E7%AD%96%E7%95%A5/content3.png" class title="content3">

<h4 id="æ ‡è®°-æ•´ç†ç®—æ³•"><a href="#æ ‡è®°-æ•´ç†ç®—æ³•" class="headerlink" title="æ ‡è®°-æ•´ç†ç®—æ³•"></a>æ ‡è®°-æ•´ç†ç®—æ³•</h4><p>æ ‡è®°-å¤åˆ¶ç®—æ³•åœ¨å¯¹è±¡å­˜æ´»ç‡è¾ƒé«˜æ—¶å°±è¦è¿›è¡Œè¾ƒå¤šçš„å¤åˆ¶æ“ä½œï¼Œæ•ˆç‡å°†ä¼šé™ä½ã€‚æ›´å…³é”®çš„æ˜¯ï¼Œå¦‚æœä¸æƒ³æµªè´¹50%çš„ç©ºé—´ï¼Œå°±éœ€è¦æœ‰é¢å¤–çš„ç©ºé—´è¿›è¡Œåˆ†é…æ‹…ä¿ï¼Œä»¥é’ˆå¯¹è€å¹´ä»£å¯¹è±¡çš„å­˜äº¡ç‰¹å¾ï¼Œå¦å¤–ä¸€ç§æœ‰é’ˆå¯¹æ€§çš„â€œæ ‡è®°-æ•´ç†â€(Mark-Compact)ç®—æ³•ï¼Œå…¶ä¸­çš„æ ‡è®°è¿‡ç¨‹ä»ç„¶ä¸â€œæ ‡è®°-æ¸…é™¤â€ç®—æ³•ä¸€æ ·ï¼Œä½†åç»­æ­¥éª¤ä¸æ˜¯ç›´æ¥å¯¹å¯å›æ”¶å¯¹è±¡è¿›è¡Œæ¸…ç†ï¼Œè€Œæ˜¯è®©æ‰€æœ‰å­˜æ´»çš„å¯¹è±¡éƒ½å‘å†…å­˜ç©ºé—´ä¸€ç«¯ç§»åŠ¨ï¼Œç„¶åç›´æ¥æ¸…ç†æ‰è¾¹ç•Œä»¥å¤–çš„å†…å­˜ã€‚<br>æ ‡è®°-æ¸…é™¤ç®—æ³•ä¸æ ‡è®°-æ•´ç†ç®—æ³•çš„æœ¬è´¨å·®å¼‚åœ¨äºå‰è€…æ˜¯ä¸€ç§éç§»åŠ¨å¼çš„å›æ”¶ç®—æ³•ï¼Œè€Œåè€…æ˜¯ç§»åŠ¨å¼çš„ã€‚æ˜¯å¦ç§»åŠ¨å›æ”¶åçš„å­˜æ´»å¯¹è±¡æ˜¯ä¸€é¡¹ä¼˜ç¼ºç‚¹å¹¶å­˜çš„é£é™©å†³ç­–ï¼š</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/10/09/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3JVM--3.%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E5%99%A8%E4%B8%8E%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E7%AD%96%E7%95%A5/content4.png" class title="content4">

]]></content>
      <categories>
        <category>æ·±å…¥ç†è§£JVM</category>
      </categories>
      <tags>
        <tag>JVM</tag>
      </tags>
  </entry>
  <entry>
    <title>ç±»çš„åŠ è½½æ–¹å¼</title>
    <url>/2020/08/20/%E7%B1%BB%E7%9A%84%E5%8A%A0%E8%BD%BD%E6%96%B9%E5%BC%8F/</url>
    <content><![CDATA[<h3 id="åŠ è½½æ–¹å¼"><a href="#åŠ è½½æ–¹å¼" class="headerlink" title="åŠ è½½æ–¹å¼"></a>åŠ è½½æ–¹å¼</h3><ol>
<li>éšå¼åŠ è½½ï¼šnew</li>
<li>æ˜¾å¼åŠ è½½ï¼šClassLoader.loadClasså’ŒClass.forName</li>
</ol>
<h3 id="åŒºåˆ«"><a href="#åŒºåˆ«" class="headerlink" title="åŒºåˆ«"></a>åŒºåˆ«</h3><p>æ–¹å¼1ï¼š<br>newé€šè¿‡å…³é”®å­— ç„¶åé€šè¿‡ä¸åŒçš„æ„é€ å™¨ç›´æ¥åˆ›å»ºå®ä¾‹ã€‚å¦‚ï¼šnew String() ï¼Œnew String(â€œtestâ€)</p>
<p>æ–¹å¼2ï¼š<br>éœ€è¦åŠ è½½.classæ–‡ä»¶è·å–Classå¯¹è±¡ï¼Œé€šè¿‡Classå¯¹è±¡ï¼Œè·å–æ„é€ å™¨ï¼Œç„¶åè°ƒç”¨newInstanceæ–¹æ³•åˆ›å»ºå¯¹è±¡å®ä¾‹ã€‚</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/20/%E7%B1%BB%E7%9A%84%E5%8A%A0%E8%BD%BD%E6%96%B9%E5%BC%8F/content1.png" class title="content1">

<h3 id="ClassLoader-loadClasså’ŒClass-forNameçš„åŒºåˆ«"><a href="#ClassLoader-loadClasså’ŒClass-forNameçš„åŒºåˆ«" class="headerlink" title="ClassLoader.loadClasså’ŒClass.forNameçš„åŒºåˆ«"></a>ClassLoader.loadClasså’ŒClass.forNameçš„åŒºåˆ«</h3><p>Classçš„è£…è½½åŒ…æ‹¬3ä¸ªæ­¥éª¤ï¼šåŠ è½½ï¼ˆloadingï¼‰ï¼Œè¿æ¥ï¼ˆlinkï¼‰ï¼Œåˆå§‹åŒ–ï¼ˆinitializeï¼‰<br>å‚è€ƒï¼šç±»çš„åŠ è½½è¿‡ç¨‹æ–‡æ¡£</p>
<p><strong>Class.forName:</strong></p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/20/%E7%B1%BB%E7%9A%84%E5%8A%A0%E8%BD%BD%E6%96%B9%E5%BC%8F/content2.png" class title="content2">
<p>forName0ç¬¬äºŒä¸ªå‚æ•°initializeåˆå§‹åŒ– è¿™é‡Œå‚æ•°æ˜¯trueè¯´æ˜æ˜¯åˆå§‹åŒ–è¿‡çš„ï¼Œå› æ­¤ï¼Œé™æ€ä»£ç å—å’Œé™æ€å˜é‡æ˜¯ä¼šè¢«æ‰§è¡Œå’Œåˆå§‹åŒ–çš„<br><strong>ClassLoader.loadClass:</strong>  </p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/20/%E7%B1%BB%E7%9A%84%E5%8A%A0%E8%BD%BD%E6%96%B9%E5%BC%8F/content3.png" class title="content3">
<p>ç¬¬äºŒå‚æ•°resolveï¼Œæ³¨é‡Šä¸­è¯´æ˜è¿™ä¸ªå‚æ•°ä»£è¡¨æ˜¯å¦é“¾æ¥ï¼ˆç±»åŠ è½½è¿‡ç¨‹ä¸­çš„é“¾æ¥è¿‡ç¨‹ï¼‰ClassLoader.loadClassåœ¨åŠ è½½ç±»çš„è¿‡ç¨‹ä¸­åªèµ°äº†ç¬¬ä¸€æ­¥</p>
<h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/20/%E7%B1%BB%E7%9A%84%E5%8A%A0%E8%BD%BD%E6%96%B9%E5%BC%8F/content4.png" class title="content4">
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/20/%E7%B1%BB%E7%9A%84%E5%8A%A0%E8%BD%BD%E6%96%B9%E5%BC%8F/content5.png" class title="content5">
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/20/%E7%B1%BB%E7%9A%84%E5%8A%A0%E8%BD%BD%E6%96%B9%E5%BC%8F/content6.png" class title="content6">

<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>Class.forNameå¾—åˆ°çš„classæ˜¯å·²ç»åˆå§‹åŒ–<br>ClassLoader.loadeClasså¾—åˆ°çš„classæ˜¯è¿˜æ²¡æœ‰é“¾æ¥çš„</p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>ç±»</tag>
      </tags>
  </entry>
  <entry>
    <title>ç±»çš„åŠ è½½è¿‡ç¨‹</title>
    <url>/2020/08/20/%E7%B1%BB%E7%9A%84%E5%8A%A0%E8%BD%BD%E8%BF%87%E7%A8%8B/</url>
    <content><![CDATA[<h3 id="Java-ç±»åŠ è½½æœºåˆ¶"><a href="#Java-ç±»åŠ è½½æœºåˆ¶" class="headerlink" title="Java ç±»åŠ è½½æœºåˆ¶"></a>Java ç±»åŠ è½½æœºåˆ¶</h3><p>ç±»ä»è¢«åŠ è½½åˆ°JVMä¸­å¼€å§‹ï¼Œåˆ°å¸è½½ä¸ºæ­¢ï¼Œæ•´ä¸ªç”Ÿå‘½å‘¨æœŸåŒ…æ‹¬ï¼š<strong>åŠ è½½ã€éªŒè¯ã€å‡†å¤‡ã€è§£æã€åˆå§‹åŒ–ã€ä½¿ç”¨å’Œå¸è½½ä¸ƒä¸ªé˜¶æ®µ</strong>ã€‚<br>å…¶ä¸­ç±»åŠ è½½è¿‡ç¨‹åŒ…æ‹¬åŠ è½½ã€éªŒè¯ã€å‡†å¤‡ã€è§£æå’Œåˆå§‹åŒ–äº”ä¸ªé˜¶æ®µã€‚</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/20/%E7%B1%BB%E7%9A%84%E5%8A%A0%E8%BD%BD%E8%BF%87%E7%A8%8B/content1.png" class title="content1">

<h3 id="ç±»çš„åŠ è½½è¿‡ç¨‹"><a href="#ç±»çš„åŠ è½½è¿‡ç¨‹" class="headerlink" title="ç±»çš„åŠ è½½è¿‡ç¨‹"></a>ç±»çš„åŠ è½½è¿‡ç¨‹</h3><h4 id="åŠ è½½"><a href="#åŠ è½½" class="headerlink" title="åŠ è½½"></a>åŠ è½½</h4><ol>
<li>é€šè¿‡ç±»åŠ è½½å™¨ï¼ŒåŠ è½½.classæ–‡ä»¶åˆ°å†…å­˜ä¸­ã€‚</li>
<li>å°†è¯»å–åˆ°.classsæ•°æ®å­˜å‚¨åˆ°è¿è¡Œæ—¶å†…å­˜åŒºçš„æ–¹æ³•åŒºã€‚</li>
<li>ç„¶åå°†å…¶è½¬æ¢ä¸ºä¸€ä¸ªä¸ç›®æ ‡ç±»å‹å¯¹åº”çš„java.lang.Classå¯¹è±¡å®ä¾‹ã€‚è¿™ä¸ªClasså¯¹è±¡åœ¨æ—¥åå°±ä¼šä½œä¸ºæ–¹æ³•åŒºä¸­è¯¥ç±»çš„å„ç§æ•°æ®çš„è®¿é—®å…¥å£ã€‚</li>
</ol>
<h4 id="éªŒè¯"><a href="#éªŒè¯" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h4><p>ç¡®ä¿è¢«åŠ è½½çš„ç±»ï¼ˆ.classæ–‡ä»¶çš„å­—èŠ‚æµï¼‰ï¼Œæ˜¯å¦æŒ‰ç…§javaè™šæ‹Ÿçš„è§„èŒƒã€‚ä¸ä¼šé€ æˆå®‰å…¨é—®é¢˜</p>
<ol>
<li>æ–‡ä»¶æ ¼å¼éªŒè¯:<br>ç¬¬ä¸€é˜¶æ®µè¦éªŒè¯å­—èŠ‚æµæ˜¯å¦ç¬¦åˆ Classæ–‡ä»¶æ ¼å¼çš„è§„èŒƒ, äº•ä¸”èƒ½è¢«å½“å‰ç‰ˆæœ¬çš„è™šæ‹Ÿæœºå¤„ç†ã€‚è¿™ä¸€é˜¶æ®µå¯èƒ½åŒ…æ‹¬ä¸‹é¢è¿™äº›éªŒè¯ç‚¹ï¼š</li>
</ol>
<ul>
<li>æ˜¯å¦ä»¥é­”æ•° 0xCAFEBABEå¼€å¤´</li>
<li>ä¸»ã€æ¬¡ç‰ˆæœ¬å·æ˜¯å¦åœ¨å½“å‰è™šæ‹Ÿæœºå¤„ç†èŒƒå›´ä¹‹å†…ã€‚</li>
<li>å¸¸é‡æ± çš„å¸¸é‡ä¸­æ˜¯å¦æœ‰ä¸è¢«æ”¯æŒçš„å¸¸é‡ç±»å‹(æ£€æŸ»å¸¸é‡tag æ ‡å¿—)ã€‚</li>
<li>æŒ‡å‘å¸¸é‡çš„å„ç§ç´¢å¼•å€¼ä¸­æ˜¯å¦æœ‰æŒ‡å‘ä¸å­˜åœ¨çš„å¸¸é‡æˆ–ä¸ç¬¦åˆè£…å‹çš„å¸¸é‡ã€‚</li>
<li>CONSTANT_Utf8_infoå‹çš„å¸¸é‡ä¸­æ˜¯å¦æœ‰ä¸ç¬¦åˆ UTF8ç¼–ç çš„æ•°æ®</li>
<li>Class æ–‡ä»¶ä¸­å„ä¸ªéƒ¨åˆ†åŠæ–‡ä»¶æœ¬èº«æ˜¯å¦æœ‰è¢«åˆ é™¤çš„æˆ–é™„åŠ çš„å…¶ä»–ä¿¡æ¯ å®é™…ä¸Šç¬¬ä¸€é˜¶æ®µçš„éªŒè¯ç‚¹è¿˜è¿œä¸æ­¢è¿™äº›, è¿™æ˜¯å…¶ä¸­çš„ä¸€éƒ¨åˆ†ã€‚åªæœ‰é€šè¿‡äº†è¿™ä¸ªé˜¶æ®µçš„éªŒè¯ä¹‹å, å­—èŠ‚æµæ‰ä¼šè¿›å…¥å†…å­˜çš„æ–¹æ³•åŒºä¸­è¿›è¡Œå­˜å‚¨, æ‰€ä»¥åé¢çš„ä¸‰ä¸ªéªŒè¯é˜¶æ®µå…¨éƒ¨æ˜¯åŸºäºæ–¹æ³•åŒºçš„å­˜å‚¨ç»“æ„è¿›è¡Œçš„ï¼Œä¸ä¼šå†ç›´æ¥æ“ä½œå­—èŠ‚æµã€‚</li>
</ul>
<ol start="2">
<li>å…ƒæ•°æ®éªŒè¯<br>ç¬¬äºŒé˜¶æ®µæ˜¯å¯¹å­—èŠ‚ç æè¿°çš„ä¿¡æ¯è¿›è¡Œè¯­ä¹‰åˆ†æï¼Œä»¥ä¿è¯å…¶æè¿°çš„ä¿¡æ¯ç¬¦åˆJavaè¯­è¨€è§„èŒƒçš„è¦æ±‚,è¿™ä¸ªé˜¶æ®µå¯èƒ½åŒ…æ‹¬çš„éªŒè¯ç‚¹å¦‚ä¸‹:</li>
</ol>
<ul>
<li>è¿™ä¸ªç±»æ˜¯å¦æœ‰çˆ¶ç±»(é™¤äº†java.lang.objectä¹‹å¤–,æ‰€æœ‰çš„ç±»éƒ½åº”å½“æœ‰çˆ¶ç±»)</li>
<li>è¿™ä¸ªç±»çš„çˆ¶ç±»æ˜¯å¦ç»§æ‰¿äº†ä¸å…è®¸è¢«ç»§æ‰¿çš„ç±»(è¢«finaIä¿®é¥°çš„ç±»)<br>å¦‚æœè¿™ä¸ªç±»ä¸æ˜¯æŠ½è±¡ç±», æ˜¯å¦å®ç¾äº†å…¶çˆ¶ç±»æˆ–æ¥å£ä¹‹ä¸­è¦æ±‚å®ç°çš„æ‰€æœ‰æ–¹æ³•ç±»ä¸­çš„å­—æ®µã€æ–¹æ³•æ˜¯å¦ä¸çˆ¶ç±»äº§ç”Ÿäº†çŸ›ç›¾(ä¾‹å¦‚è¦†ç›–äº†çˆ¶ç±»çš„finalå­—æ®µ, æˆ–è€…å‡ºç¾ä¸ç¬¦åˆè§„åˆ™çš„æ–¹æ³•é‡è½½, ä¾‹å¦‚æ–¹æ³•å‚æ•°éƒ½ä¸€è‡´, ä½†è¿”å›å€¼ç±»å‹å´ä¸åŒç­‰) ç¬¬äºŒé˜¶æ®µçš„éªŒè¯ç‚¹åŒæ ·è¿œä¸æ­¢è¿™äº›ï¼Œè¿™ä¸€é˜¶æ®µçš„ä¸»è¦ç›®çš„æ˜¯å¯¹ç±»çš„å…ƒæ•°æ®ä¿¡æ¯è¿›è¡Œè¯­ä¹‰æ£€éªŒ, ä¿è¯ä¸å­˜åœ¨ä¸ç¬¦åˆ Javaè¯­è¨€è§„èŒƒçš„å…ƒæ•°æ®ä¿¡æ¯ã€‚</li>
</ul>
<ol start="3">
<li>å­—èŠ‚ç éªŒè¯<br>ç¬¬ä¸‰é˜¶æ®µæ˜¯æ•´ä¸ªéªŒè¯è¿‡ç¨‹ä¸­æœ€å¤æ‚çš„ä¸€ä¸ªé˜¶æ®µ, ä¸»è¦ç›®çš„æ˜¯é€šè¿‡æ•°æ®æµå’Œæ§åˆ¶æµçš„åˆ†æï¼Œç¡®å®šè¯­ä¹‰æ˜¯åˆæ³•çš„ã€‚ç¬¦å·é€»è¾‘çš„ã€‚åœ¨ç¬¬äºŒé˜¶æ®µå¯¹å…ƒæ•°æ®ä¿¡æ¯ä¸­çš„æ•°æ®ç±»å‹åšå®Œæ ¡éªŒåï¼Œè¿™é˜¶æ®µå°†å¯¹ç±»çš„æ–¹æ³•ä½“è¿›è¡Œæ ¡éªŒåˆ†æï¼Œä¿è¯è¢«æ ¡éªŒç±»çš„æ–¹æ³•åœ¨è¿è¡Œæ—¶ä¸ä¼šåšå‡ºå±å®³è™šæ‹Ÿæœºå®‰å…¨çš„è¡Œä¸ºï¼Œä¾‹å¦‚ï¼š</li>
</ol>
<ul>
<li>ä¿è¯ä»»æ„æ—¶åˆ»æ“ä½œæ•°æ ˆçš„æ•°æ®è£…å‹ä¸æŒ‡ä»¤ä»£ç åºåˆ—éƒ½èƒ½é…åˆå·¥ä½œ, ä¾‹å¦‚ä¸ä¼šå‡ºç°ç±»ä¼¼è¿™æ ·çš„æƒ…å†µ:åœ¨æ“ä½œæ ˆä¸­æ”¾ç½®äº†ä¸€ä¸ª intç±»å‹çš„æ•°æ®, ä½¿ç”¨æ—¶å´æŒ‰longç±»å‹æ¥åŠ è½½å…¥æœ¬åœ°å˜é‡è¡¨ä¸­ã€‚</li>
<li>ä¿è¯è·³è½¬æŒ‡ä»¤ä¸ä¼šè·³è½¬åˆ°æ–¹æ³•ä½“ä»¥å¤–çš„å­—èŠ‚ç æŒ‡ä»¤ä¸Š</li>
<li>ä¿è¯æ–¹æ³•ä½“ä¸­çš„ç±»å‹è½¬æ¢æ˜¯æœ‰æ•ˆçš„, ä¾‹å¦‚å¯ä»¥æŠŠä¸€ä¸ªå­ç±»å¯¹è±¡èµ‹å€¼ç»™çˆ¶ç±»æ•°æ®è£…å‹ï¼Œè¿™æ˜¯å®‰å…¨çš„,ä½†æ˜¯æŠŠçˆ¶ç±»å¯¹è±¡æ„èµ‹å€¼ç»™å­ç±»æ•°æ®ç±»å‹,ç”šè‡³æŠŠå¯¹è±¡èµ‹å€¼ç»™ä¸å®ƒæ¯«æ— ç»§æ‰¿å…³ç³»ã€ å®Œå…¨ä¸ç›¸å¹²çš„ä¸€ä¸ªæ•°æ®ç±»å‹, åˆ™æ˜¯å±é™©å’Œä¸åˆæ³•çš„ã€‚ å³ä½¿ä¸€ä¸ªæ–¹æ³•ä½“é€šè¿‡äº†å­—èŠ‚ç éªŒè¯, ä¹Ÿä¸èƒ½è¯´æ˜å…¶ä¸€å®šå°±æ˜¯å®‰å…¨çš„ã€‚</li>
</ul>
<ol start="4">
<li>ç¬¦å·å¼•ç”¨éªŒè¯<br>æœ€åä¸€ä¸ªé˜¶æ®µçš„æ ¡éªŒå‘ç”Ÿåœ¨è™šæ‹Ÿæœºå°†ç¬¦å·å¼•ç”¨è½¬åŒ–ä¸ºç›´æ¥å¼•ç”¨çš„æ—¶å€™, è¿™ä¸ªè½¬åŒ–åŠ¨ä½œå°†åœ¨è¿æ¥çš„ç¬¬ä¸‰ä¸ªé˜¶æ®µâ€”â€”è§£æé˜¶æ®µä¸­å‘ç”Ÿã€‚ç¬¦å·å¼•ç”¨éªŒè¯å¯ä»¥çœ‹åšæ˜¯å¯¹ç±»è‡ªèº«ä»¥å¤–(å¸¸é‡æ± ä¸­çš„å„ç§ç¬¦å·å¼•ç”¨) çš„ä¿¡æ¯è¿›è¡ŒåŒ¹é…æ€§çš„æ ¡éªŒ, é€šå¸¸éœ€è¦æ ¡éªŒä»¥ä¸‹å†…å®¹:</li>
</ol>
<ul>
<li>ç¬¦å·å¼•ç”¨ä¸­é€šè¿‡å­—å°†ä¸²æè¿°çš„å…¨é™å®šåæ˜¯å¦èƒ½æ‰¾åˆ°å¯¹åº”çš„ç±»</li>
<li>åœ¨æŒ‡å®šç±»ä¸­æ˜¯å¦å­˜åœ¨ç¬¦åˆæ–¹æ³•çš„å­—æ®µæè¿°ç¬¦ä»¥åŠç®€å•åç§°æ‰€æè¿°çš„æ–¹æ³•å’Œå­—æ®µ ã€‚</li>
<li>ç¬¦å·å¼•ç”¨ä¸­çš„ç±»ã€å­—æ®µå’Œæ–¹æ³•çš„è®¿é—®æ€§(privateã€ protectedã€ publicã€ default)æ˜¯å¦å¯è¢«å½“å‰     ç±»è®¿é—®</li>
<li>ç¬¦å·å¼•ç”¨éªŒè¯çš„ç›®çš„æ˜¯ç¡®ä¿è§£æåŠ¨ä½œèƒ½æ­£å¸¸æ‰§è¡Œ, å¦‚æœæ— æ³•é€šè¿‡ç¬¦å·å¼•ç”¨éªŒè¯, å°†ä¼šæŠ›å‡ºä¸€ä¸ªjava.lang.IncompatibleClassChangErrorå¼‚å¸¸çš„å­ç±», å¦‚ java.lang.IllegalAccessErrorã€java.lang.NoSuchFieldErrorã€java.lang.NoSuchMethodErrorç­‰ã€‚</li>
</ul>
<h4 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h4><p>ä¸»è¦æ˜¯ä¸ºç±»å˜é‡ï¼ˆæ³¨æ„ï¼Œä¸æ˜¯å®ä¾‹å˜é‡ï¼‰åˆ†é…å†…å­˜ï¼Œå¹¶ä¸”èµ‹äºˆåˆå€¼ï¼Œæ­¤æ—¶çš„èµ‹å€¼æ˜¯Javaè™šæ‹Ÿæœºæ ¹æ®ä¸åŒå˜é‡ç±»å‹çš„é»˜è®¤åˆå§‹å€¼ï¼š<br>å¦‚8ç§åŸºæœ¬ç±»å‹çš„åˆå€¼ï¼Œé»˜è®¤ä¸º0ï¼›å¼•ç”¨ç±»å‹çš„åˆå€¼åˆ™ä¸ºnullï¼›å¸¸é‡çš„åˆå€¼å³ä¸ºä»£ç ä¸­è®¾ç½®çš„å€¼<br> 1ã€final static temp = 100ï¼Œæ­¤æ—¶tempå°±æ˜¯èµ‹å€¼ 100ã€‚<br> 2ã€String temp = â€œ123456â€ï¼Œæ­¤æ—¶tempå€¼å°±æ˜¯nullã€‚<br> 3ã€int temp = 100ï¼Œæ­¤æ—¶tempå€¼å°±æ˜¯0ã€‚</p>
<h4 id="è§£æ"><a href="#è§£æ" class="headerlink" title="è§£æ"></a>è§£æ</h4><p>å°†ç±»çš„äºŒè¿›åˆ¶æ•°æ®ä¸­çš„ç¬¦å·å¼•ç”¨æ›¿æ¢æˆç›´æ¥å¼•ç”¨ï¼ˆç¬¦å·å¼•ç”¨æ˜¯ç”¨ä¸€ç»„ç¬¦å·æè¿°æ‰€å¼•ç”¨çš„ç›®æ ‡ï¼›ç›´æ¥å¼•ç”¨æ˜¯æŒ‡å‘ç›®æ ‡çš„æŒ‡é’ˆï¼‰<br>å¯ä»¥è®¤ä¸ºæ˜¯ä¸€äº›é™æ€ç»‘å®šçš„ä¼šè¢«è§£æï¼ŒåŠ¨æ€ç»‘å®šåˆ™åªä¼šåœ¨è¿è¡Œæ—¶è¿›è¡Œè§£æï¼›é™æ€ç»‘å®šåŒ…æ‹¬ä¸€äº›finalæ–¹æ³•(ä¸å¯ä»¥é‡å†™),staticæ–¹æ³•(åªä¼šå±äºå½“å‰ç±»)ï¼Œæ„é€ å™¨(ä¸ä¼šè¢«é‡å†™)<br>åœ¨è§£æé˜¶æ®µï¼Œè™šæ‹Ÿæœºä¼šæŠŠæ‰€æœ‰çš„ç±»åï¼Œæ–¹æ³•åï¼Œå­—æ®µåè¿™äº›ç¬¦å·å¼•ç”¨æ›¿æ¢ä¸ºå…·ä½“çš„å†…å­˜åœ°å€æˆ–åç§»é‡ï¼Œä¹Ÿå°±æ˜¯ç›´æ¥å¼•ç”¨ã€‚</p>
<h4 id="åˆå§‹åŒ–"><a href="#åˆå§‹åŒ–" class="headerlink" title="åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h4><p>åˆå§‹åŒ–ï¼Œåˆ™æ˜¯ä¸ºæ ‡è®°ä¸ºå¸¸é‡å€¼çš„å­—æ®µèµ‹å€¼çš„è¿‡ç¨‹ã€‚<br>æ¢å¥è¯è¯´ï¼Œåªå¯¹staticä¿®é¥°çš„å˜é‡æˆ–è¯­å¥å—è¿›è¡Œåˆå§‹åŒ–ã€‚<br>å¦‚æœåˆå§‹åŒ–ä¸€ä¸ªç±»çš„æ—¶å€™ï¼Œå…¶çˆ¶ç±»å°šæœªåˆå§‹åŒ–ï¼Œåˆ™ä¼˜å…ˆåˆå§‹åŒ–å…¶çˆ¶ç±»ã€‚<br>å¦‚æœåŒæ—¶åŒ…å«å¤šä¸ªé™æ€å˜é‡å’Œé™æ€ä»£ç å—ï¼Œåˆ™æŒ‰ç…§è‡ªä¸Šè€Œä¸‹çš„é¡ºåºä¾æ¬¡æ‰§è¡Œã€‚</p>
<h3 id="æ¶‰åŠé—®é¢˜"><a href="#æ¶‰åŠé—®é¢˜" class="headerlink" title="æ¶‰åŠé—®é¢˜"></a>æ¶‰åŠé—®é¢˜</h3><p>ä¸€ä¸ªç±»çš„æ„é€ å™¨ï¼Œä»£ç å—ï¼Œé™æ€ä»£ç å—ï¼Œæˆå‘˜å˜é‡çš„çš„æ‰§è¡Œé¡ºåºã€‚</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/20/%E7%B1%BB%E7%9A%84%E5%8A%A0%E8%BD%BD%E8%BF%87%E7%A8%8B/content2.png" class title="content2">
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/20/%E7%B1%BB%E7%9A%84%E5%8A%A0%E8%BD%BD%E8%BF%87%E7%A8%8B/content3.png" class title="content3">
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/20/%E7%B1%BB%E7%9A%84%E5%8A%A0%E8%BD%BD%E8%BF%87%E7%A8%8B/content4.png" class title="content4">                                                                                                                                                   ]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>ç±»</tag>
      </tags>
  </entry>
  <entry>
    <title>è‡ªåŠ¨æ‹†è£…ç®±</title>
    <url>/2020/07/12/%E8%87%AA%E5%8A%A8%E6%8B%86%E8%A3%85%E7%AE%B1/</url>
    <content><![CDATA[<h3 id="ä»€ä¹ˆæ˜¯è‡ªåŠ¨è£…ç®±å’Œæ‹†ç®±"><a href="#ä»€ä¹ˆæ˜¯è‡ªåŠ¨è£…ç®±å’Œæ‹†ç®±" class="headerlink" title="ä»€ä¹ˆæ˜¯è‡ªåŠ¨è£…ç®±å’Œæ‹†ç®±"></a>ä»€ä¹ˆæ˜¯è‡ªåŠ¨è£…ç®±å’Œæ‹†ç®±</h3><p>è‡ªåŠ¨è£…ç®±å°±æ˜¯Javaè‡ªåŠ¨å°†åŸå§‹ç±»å‹å€¼è½¬æ¢æˆå¯¹åº”çš„å¯¹è±¡ï¼Œæ¯”å¦‚å°†intçš„å˜é‡è½¬æ¢æˆIntegerå¯¹è±¡ï¼Œè¿™ä¸ªè¿‡ç¨‹å«åšè£…ç®±ï¼Œåä¹‹å°†Integerå¯¹è±¡è½¬æ¢æˆintç±»å‹å€¼ï¼Œè¿™ä¸ªè¿‡ç¨‹å«åšæ‹†ç®±ã€‚å› ä¸ºè¿™é‡Œçš„è£…ç®±å’Œæ‹†ç®±æ˜¯è‡ªåŠ¨è¿›è¡Œçš„éäººä¸ºè½¬æ¢ï¼Œæ‰€ä»¥å°±ç§°ä½œä¸ºè‡ªåŠ¨è£…ç®±å’Œæ‹†ç®±ã€‚åŸå§‹ç±»å‹byte, short, char, int, long, float, double å’Œ boolean å¯¹åº”çš„å°è£…ç±»ä¸ºByte, Short, Character, Integer, Long, Float, Double, Booleanã€‚</p>
<p>ä¸‹é¢ä¾‹å­æ˜¯è‡ªåŠ¨è£…ç®±å’Œæ‹†ç®±å¸¦æ¥çš„ç–‘æƒ‘               </p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/07/12/%E8%87%AA%E5%8A%A8%E6%8B%86%E8%A3%85%E7%AE%B1/content1.png" class title="content1"> 
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/07/12/%E8%87%AA%E5%8A%A8%E6%8B%86%E8%A3%85%E7%AE%B1/content2.png" class title="content2">    

<h3 id="è‡ªåŠ¨è£…ç®±å’Œæ‹†ç®±çš„åŸç†"><a href="#è‡ªåŠ¨è£…ç®±å’Œæ‹†ç®±çš„åŸç†" class="headerlink" title="è‡ªåŠ¨è£…ç®±å’Œæ‹†ç®±çš„åŸç†"></a>è‡ªåŠ¨è£…ç®±å’Œæ‹†ç®±çš„åŸç†</h3><p>è‡ªåŠ¨è£…ç®±æ—¶ç¼–è¯‘å™¨è°ƒç”¨valueOfå°†åŸå§‹ç±»å‹å€¼è½¬æ¢æˆå¯¹è±¡ï¼ŒåŒæ—¶è‡ªåŠ¨æ‹†ç®±æ—¶ï¼Œç¼–è¯‘å™¨é€šè¿‡è°ƒç”¨ç±»ä¼¼intValue(),doubleValue()è¿™ç±»çš„æ–¹æ³•å°†å¯¹è±¡è½¬æ¢æˆåŸå§‹ç±»å‹å€¼ã€‚æ˜ç™½è‡ªåŠ¨è£…ç®±å’Œæ‹†ç®±çš„åŸç†åï¼Œæˆ‘ä»¬å¸¦ç€ä¸Šé¢çš„ç–‘é—®è¿›è¡Œåˆ†æä¸‹Integerçš„è‡ªåŠ¨è£…ç®±çš„å®ç°æºç ã€‚å¦‚ä¸‹ï¼š</p>
<p>â€‹        <img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/07/12/%E8%87%AA%E5%8A%A8%E6%8B%86%E8%A3%85%E7%AE%B1/content3.png" class title="content3"><br>        <img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/07/12/%E8%87%AA%E5%8A%A8%E6%8B%86%E8%A3%85%E7%AE%B1/content4.png" class title="content4"></p>
<p>Integer i1 = 40; è‡ªåŠ¨è£…ç®±ï¼Œç›¸å½“äºè°ƒç”¨äº†Integer.valueOf(40);æ–¹æ³•ã€‚é¦–å…ˆåˆ¤æ–­iå€¼æ˜¯å¦åœ¨-128å’Œ127ä¹‹é—´ï¼Œå¦‚æœåœ¨-128å’Œ127ä¹‹é—´åˆ™ç›´æ¥ä»IntegerCache.cacheç¼“å­˜ä¸­è·å–æŒ‡å®šæ•°å­—çš„åŒ…è£…ç±»ï¼›ä¸å­˜åœ¨åˆ™newå‡ºä¸€ä¸ªæ–°çš„åŒ…è£…ç±»ã€‚</p>
<p>IntegerCacheå†…éƒ¨å®ç°äº†ä¸€ä¸ªIntegerçš„é™æ€å¸¸é‡æ•°ç»„ï¼Œåœ¨ç±»åŠ è½½çš„æ—¶å€™ï¼Œæ‰§è¡Œstaticé™æ€å—è¿›è¡Œåˆå§‹åŒ–-128åˆ°127ä¹‹é—´çš„Integerå¯¹è±¡ï¼Œå­˜æ”¾åˆ°cacheæ•°ç»„ä¸­ã€‚cacheå±äºå¸¸é‡ï¼Œå­˜æ”¾åœ¨javaçš„æ–¹æ³•åŒºä¸­ã€‚ </p>
<p>æ¥ç€çœ‹ä¸‹é¢æ˜¯java8ç§åŸºæœ¬ç±»å‹çš„è‡ªåŠ¨è£…ç®±ä»£ç å®ç°ã€‚å¦‚ä¸‹ï¼š</p>

<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/07/12/%E8%87%AA%E5%8A%A8%E6%8B%86%E8%A3%85%E7%AE%B1/content6.png" class title="content6">
<p>é€šè¿‡åˆ†ææºç å‘ç°ï¼Œåªæœ‰doubleå’Œfloatçš„è‡ªåŠ¨è£…ç®±ä»£ç æ²¡æœ‰ä½¿ç”¨ç¼“å­˜ï¼Œæ¯æ¬¡éƒ½æ˜¯new æ–°çš„å¯¹è±¡ï¼Œå…¶å®ƒçš„6ç§åŸºæœ¬ç±»å‹éƒ½ä½¿ç”¨äº†ç¼“å­˜ç­–ç•¥ã€‚<br>ä½¿ç”¨ç¼“å­˜ç­–ç•¥æ˜¯å› ä¸ºï¼Œç¼“å­˜çš„è¿™äº›å¯¹è±¡éƒ½æ˜¯ç»å¸¸ä½¿ç”¨åˆ°çš„ï¼ˆå¦‚å­—ç¬¦ã€-128è‡³127ä¹‹é—´çš„æ•°å­—ï¼‰ï¼Œé˜²æ­¢æ¯æ¬¡è‡ªåŠ¨è£…ç®±éƒ½åˆ›å»ºä¸€æ¬¡å¯¹è±¡çš„å®ä¾‹ã€‚<br>è€Œdoubleã€floatæ˜¯æµ®ç‚¹å‹çš„ï¼Œæ²¡æœ‰ç‰¹åˆ«çš„çƒ­çš„ï¼ˆç»å¸¸ä½¿ç”¨åˆ°çš„ï¼‰æ•°æ®çš„ï¼Œç¼“å­˜æ•ˆæœæ²¡æœ‰å…¶å®ƒå‡ ç§ç±»å‹ä½¿ç”¨æ•ˆç‡é«˜ã€‚<br>ä¸‹é¢åœ¨çœ‹ä¸‹è£…ç®±å’Œæ‹†ç®±é—®é¢˜è§£æƒ‘ã€‚</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/07/12/%E8%87%AA%E5%8A%A8%E6%8B%86%E8%A3%85%E7%AE%B1/content7.png" class title="content7">]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>JavaåŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title>ServletåŸºç¡€æ€»ç»“</title>
    <url>/2021/07/14/Servlet%E5%9F%BA%E7%A1%80%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<h3 id="Servletæ€»ç»“"><a href="#Servletæ€»ç»“" class="headerlink" title="Servletæ€»ç»“"></a>Servletæ€»ç»“</h3><p>åœ¨Java Webç¨‹åºä¸­ï¼ŒServletä¸»è¦è´Ÿè´£æ¥å—ç”¨æˆ·è¯·æ±‚ HttpServletRequestï¼Œåœ¨doget()ï¼ŒdoPost()ä¸­åšç›¸åº”çš„å¤„ç†ï¼Œå¹¶å°†å›åº” HttpServletResponseåé¦ˆç»™ç”¨æˆ·ã€‚Servletå¯ä»¥è®¾ç½®åˆå§‹åŒ–å‚æ•°ï¼Œä¾›Servletå†…éƒ¨ä½¿ç”¨ã€‚ä¸€ä¸ªServletç±»åªä¼šæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œåœ¨å®ƒçš„åˆå§‹åŒ–æ—¶è°ƒç”¨init()æ–¹æ³•ï¼Œé”€æ¯æ—¶è°ƒç”¨destroy()æ–¹æ³•ã€‚Servletéœ€è¦åœ¨web.xmlä¸­é…ç½®ï¼ˆMyEclipseä¸­åˆ›å»ºServletä¼šè‡ªåŠ¨é…ç½®ï¼‰ï¼Œ<strong>ä¸€ä¸ªServletå¯ä»¥è®¾ç½®å¤šä¸ªURLè®¿é—®ã€‚Servletä¸æ˜¯çº¿ç¨‹å®‰å…¨</strong>ï¼Œå› æ­¤è¦è°¨æ…ä½¿ç”¨ç±»å˜é‡ã€‚</p>
<h3 id="é˜è¿°Servletå’ŒCGIçš„åŒºåˆ«ï¼Ÿ"><a href="#é˜è¿°Servletå’ŒCGIçš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="é˜è¿°Servletå’ŒCGIçš„åŒºåˆ«ï¼Ÿ"></a>é˜è¿°Servletå’ŒCGIçš„åŒºåˆ«ï¼Ÿ</h3><ol>
<li><p>CGIçš„ä¸è¶³ä¹‹å¤„ï¼š<br>(1)éœ€è¦ä¸ºæ¯ä¸ªè¯·æ±‚å¯åŠ¨ä¸€ä¸ªæ“ä½œCGIç¨‹åºçš„ç³»ç»Ÿè¿›ç¨‹ã€‚å¦‚æœè¯·æ±‚é¢‘ç¹ï¼Œè¿™å°†ä¼šå¸¦æ¥å¾ˆå¤§çš„å¼€é”€ã€‚<br>(2)éœ€è¦ä¸ºæ¯ä¸ªè¯·æ±‚åŠ è½½å’Œè¿è¡Œä¸€ä¸ªCGIç¨‹åºï¼Œè¿™å°†å¸¦æ¥å¾ˆå¤§çš„å¼€é”€<br>(3)éœ€è¦é‡å¤ç¼–å†™å¤„ç†ç½‘ç»œåè®®çš„ä»£ç ä»¥åŠç¼–ç ï¼Œè¿™äº›å·¥ä½œéƒ½æ˜¯éå¸¸è€—æ—¶çš„ã€‚</p>
</li>
<li><p>Servletçš„ä¼˜ç‚¹ï¼š<br>(1)åªéœ€è¦å¯åŠ¨ä¸€ä¸ªæ“ä½œç³»ç»Ÿè¿›ç¨‹ä»¥åŠåŠ è½½ä¸€ä¸ªJVMï¼Œå¤§å¤§é™ä½äº†ç³»ç»Ÿçš„å¼€é”€<br>(2)å¦‚æœå¤šä¸ªè¯·æ±‚éœ€è¦åšåŒæ ·å¤„ç†çš„æ—¶å€™ï¼Œè¿™æ—¶å€™åªéœ€è¦åŠ è½½ä¸€ä¸ªç±»ï¼Œè¿™ä¹Ÿå¤§å¤§é™ä½äº†å¼€é”€<br>(3)æ‰€æœ‰åŠ¨æ€åŠ è½½çš„ç±»å¯ä»¥å®ç°å¯¹ç½‘ç»œåè®®ä»¥åŠè¯·æ±‚è§£ç çš„å…±äº«ï¼Œå¤§å¤§é™ä½äº†å·¥ä½œé‡ã€‚<br>(4)Servletèƒ½ç›´æ¥å’ŒWebæœåŠ¡å™¨äº¤äº’ï¼Œè€Œæ™®é€šçš„CGIç¨‹åºä¸èƒ½ã€‚Servletè¿˜èƒ½åœ¨å„ä¸ªç¨‹åºä¹‹é—´å…±äº«æ•°æ®ï¼Œä½¿æ•°æ®åº“è¿æ¥æ± ä¹‹ç±»çš„åŠŸèƒ½å¾ˆå®¹æ˜“å®ç°ã€‚<br>è¡¥å……ï¼šSun Microsystemså…¬å¸åœ¨1996å¹´å‘å¸ƒServletæŠ€æœ¯å°±æ˜¯ä¸ºäº†å’ŒCGIè¿›è¡Œç«äº‰ï¼ŒServletæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„Javaç¨‹åºï¼Œä¸€ä¸ªåŸºäºJavaçš„Webåº”ç”¨é€šå¸¸åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªServletç±»ã€‚Servletä¸èƒ½å¤Ÿè‡ªè¡Œåˆ›å»ºå¹¶æ‰§è¡Œï¼Œå®ƒæ˜¯åœ¨Servletå®¹å™¨ä¸­è¿è¡Œçš„ï¼Œå®¹å™¨å°†ç”¨æˆ·çš„è¯·æ±‚ä¼ é€’ç»™Servletç¨‹åºï¼Œå¹¶å°†Servletçš„å“åº”å›ä¼ ç»™ç”¨æˆ·ã€‚é€šå¸¸ä¸€ä¸ªServletä¼šå…³è”ä¸€ä¸ªæˆ–å¤šä¸ªJSPé¡µé¢ã€‚ä»¥å‰CGIç»å¸¸å› ä¸ºæ€§èƒ½å¼€é”€ä¸Šçš„é—®é¢˜è¢«è¯Ÿç—…ï¼Œç„¶è€ŒFast CGIæ—©å°±å·²ç»è§£å†³äº†CGIæ•ˆç‡ä¸Šçš„é—®é¢˜ï¼Œæ‰€ä»¥é¢è¯•çš„æ—¶å€™å¤§å¯ä¸å¿…ä¿¡å£å¼€æ²³çš„è¯Ÿç—…CGIï¼Œäº‹å®ä¸Šæœ‰å¾ˆå¤šä½ ç†Ÿæ‚‰çš„ç½‘ç«™éƒ½ä½¿ç”¨äº†CGIæŠ€æœ¯ã€‚</p>
</li>
</ol>
<h3 id="Servletæ¥å£ä¸­æœ‰å“ªäº›æ–¹æ³•åŠServletç”Ÿå‘½å‘¨æœŸæ¢ç§˜"><a href="#Servletæ¥å£ä¸­æœ‰å“ªäº›æ–¹æ³•åŠServletç”Ÿå‘½å‘¨æœŸæ¢ç§˜" class="headerlink" title="Servletæ¥å£ä¸­æœ‰å“ªäº›æ–¹æ³•åŠServletç”Ÿå‘½å‘¨æœŸæ¢ç§˜"></a>Servletæ¥å£ä¸­æœ‰å“ªäº›æ–¹æ³•åŠServletç”Ÿå‘½å‘¨æœŸæ¢ç§˜</h3><p>Servletæ¥å£å®šä¹‰äº†5ä¸ªæ–¹æ³•ï¼Œå…¶ä¸­å‰ä¸‰ä¸ªæ–¹æ³•ä¸Servletç”Ÿå‘½å‘¨æœŸç›¸å…³ï¼š </p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2021/07/14/Servlet%E5%9F%BA%E7%A1%80%E6%80%BB%E7%BB%93/content1.png" class title="content1">

<p>ç”Ÿå‘½å‘¨æœŸï¼š <strong>Webå®¹å™¨åŠ è½½Servletå¹¶å°†å…¶å®ä¾‹åŒ–åï¼ŒServletç”Ÿå‘½å‘¨æœŸå¼€å§‹</strong>ï¼Œå®¹å™¨è¿è¡Œå…¶<strong>init()æ–¹æ³•</strong>è¿›è¡ŒServletçš„åˆå§‹åŒ–ï¼›è¯·æ±‚åˆ°è¾¾æ—¶è°ƒç”¨Servletçš„<strong>service()<strong>æ–¹æ³•ï¼Œservice()æ–¹æ³•ä¼šæ ¹æ®éœ€è¦è°ƒç”¨ä¸è¯·æ±‚å¯¹åº”çš„</strong>doGetæˆ–doPost</strong>ç­‰æ–¹æ³•ï¼›å½“æœåŠ¡å™¨å…³é—­æˆ–é¡¹ç›®è¢«å¸è½½æ—¶æœåŠ¡å™¨ä¼šå°†Servletå®ä¾‹é”€æ¯ï¼Œæ­¤æ—¶ä¼šè°ƒç”¨Servletçš„<strong>destroy()æ–¹æ³•</strong>ã€‚<strong>initæ–¹æ³•å’Œdestroyæ–¹æ³•åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œserviceæ–¹æ³•å®¢æˆ·ç«¯æ¯æ¬¡è¯·æ±‚Servletéƒ½ä¼šæ‰§è¡Œ</strong>ã€‚Servletä¸­æœ‰æ—¶ä¼šç”¨åˆ°ä¸€äº›éœ€è¦åˆå§‹åŒ–ä¸é”€æ¯çš„èµ„æºï¼Œå› æ­¤å¯ä»¥æŠŠåˆå§‹åŒ–èµ„æºçš„ä»£ç æ”¾å…¥initæ–¹æ³•ä¸­ï¼Œé”€æ¯èµ„æºçš„ä»£ç æ”¾å…¥destroyæ–¹æ³•ä¸­ï¼Œè¿™æ ·å°±ä¸éœ€è¦æ¯æ¬¡å¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚éƒ½è¦åˆå§‹åŒ–ä¸é”€æ¯èµ„æºã€‚</p>
<h3 id="getå’Œpostè¯·æ±‚çš„åŒºåˆ«"><a href="#getå’Œpostè¯·æ±‚çš„åŒºåˆ«" class="headerlink" title="getå’Œpostè¯·æ±‚çš„åŒºåˆ«"></a>getå’Œpostè¯·æ±‚çš„åŒºåˆ«</h3><p>å¯ä»¥æŠŠ get å’Œ post å½“ä½œä¸¤ä¸ªä¸åŒçš„è¡Œä¸ºï¼Œä¸¤è€…å¹¶æ²¡æœ‰ä»€ä¹ˆæœ¬è´¨åŒºåˆ«ï¼Œåº•å±‚éƒ½æ˜¯ TCP è¿æ¥ã€‚ getè¯·æ±‚ç”¨æ¥ä»æœåŠ¡å™¨ä¸Šè·å¾—èµ„æºï¼Œè€Œpostæ˜¯ç”¨æ¥å‘æœåŠ¡å™¨æäº¤æ•°æ®ã€‚æ¯”å¦‚ä½ è¦è·å–äººå‘˜åˆ—è¡¨å¯ä»¥ç”¨ get è¯·æ±‚ï¼Œä½ éœ€è¦åˆ›å»ºä¸€ä¸ªäººå‘˜å¯ä»¥ç”¨ post ã€‚è¿™ä¹Ÿæ˜¯ Restful API æœ€åŸºæœ¬çš„ä¸€ä¸ªè¦æ±‚ã€‚</p>
<p>æœ€ç›´è§‚çš„åŒºåˆ«å°±æ˜¯<strong>GETæŠŠå‚æ•°åŒ…å«åœ¨URLä¸­ï¼ŒPOSTé€šè¿‡request bodyä¼ é€’å‚æ•°</strong>ã€‚</p>
<ul>
<li>GETåœ¨æµè§ˆå™¨å›é€€æ—¶æ˜¯æ— å®³çš„ï¼Œè€ŒPOSTä¼šå†æ¬¡æäº¤è¯·æ±‚ã€‚</li>
<li>GETäº§ç”Ÿçš„URLåœ°å€å¯ä»¥è¢«Bookmarkï¼Œè€ŒPOSTä¸å¯ä»¥ã€‚</li>
<li>GETè¯·æ±‚ä¼šè¢«æµè§ˆå™¨ä¸»åŠ¨cacheï¼Œè€ŒPOSTä¸ä¼šï¼Œé™¤éæ‰‹åŠ¨è®¾ç½®ã€‚</li>
<li>GETè¯·æ±‚åªèƒ½è¿›è¡Œurlç¼–ç ï¼Œè€ŒPOSTæ”¯æŒå¤šç§ç¼–ç æ–¹å¼ã€‚</li>
<li>GETè¯·æ±‚å‚æ•°ä¼šè¢«å®Œæ•´ä¿ç•™åœ¨æµè§ˆå™¨å†å²è®°å½•é‡Œï¼Œè€ŒPOSTä¸­çš„å‚æ•°ä¸ä¼šè¢«ä¿ç•™ã€‚</li>
<li>GETè¯·æ±‚åœ¨URLä¸­ä¼ é€çš„å‚æ•°æ˜¯æœ‰é•¿åº¦é™åˆ¶çš„ï¼Œè€ŒPOSTä¹ˆæœ‰ã€‚</li>
<li>å¯¹å‚æ•°çš„æ•°æ®ç±»å‹ï¼ŒGETåªæ¥å—ASCIIå­—ç¬¦ï¼Œè€ŒPOSTæ²¡æœ‰é™åˆ¶ã€‚</li>
<li>GETæ¯”POSTæ›´ä¸å®‰å…¨ï¼Œå› ä¸ºå‚æ•°ç›´æ¥æš´éœ²åœ¨URLä¸Šï¼Œæ‰€ä»¥ä¸èƒ½ç”¨æ¥ä¼ é€’æ•æ„Ÿä¿¡æ¯ã€‚</li>
<li>GETå‚æ•°é€šè¿‡URLä¼ é€’ï¼ŒPOSTæ”¾åœ¨Request bodyä¸­ã€‚</li>
</ul>
<p>å…¶å®ï¼ŒGETå’ŒPOSTæœ¬è´¨ä¸Šæ²¡æœ‰åŒºåˆ«ï¼š<br>GETå’ŒPOSTæ˜¯ä»€ä¹ˆï¼ŸHTTPåè®®ä¸­çš„ä¸¤ç§å‘é€è¯·æ±‚çš„æ–¹æ³•ã€‚</p>
<p>HTTPæ˜¯ä»€ä¹ˆï¼ŸHTTPæ˜¯åŸºäºTCP/IPçš„å…³äºæ•°æ®å¦‚ä½•åœ¨ä¸‡ç»´ç½‘ä¸­å¦‚ä½•é€šä¿¡çš„åè®®ã€‚<br>HTTPçš„åº•å±‚æ˜¯TCP/IPã€‚æ‰€ä»¥GETå’ŒPOSTçš„åº•å±‚ä¹Ÿæ˜¯TCP/IPï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒGET/POSTéƒ½æ˜¯TCPé“¾æ¥ã€‚GETå’ŒPOSTèƒ½åšçš„äº‹æƒ…æ˜¯ä¸€æ ·ä¸€æ ·çš„ã€‚ä½ è¦ç»™GETåŠ ä¸Šrequest bodyï¼Œç»™POSTå¸¦ä¸Šurlå‚æ•°ï¼ŒæŠ€æœ¯ä¸Šæ˜¯å®Œå…¨è¡Œçš„é€šçš„ã€‚</p>
<p>åœ¨æˆ‘å¤§ä¸‡ç»´ç½‘ä¸–ç•Œä¸­ï¼ŒTCPå°±åƒæ±½è½¦ï¼Œæˆ‘ä»¬ç”¨TCPæ¥è¿è¾“æ•°æ®ï¼Œå®ƒå¾ˆå¯é ï¼Œä»æ¥ä¸ä¼šå‘ç”Ÿä¸¢ä»¶å°‘ä»¶çš„ç°è±¡ã€‚ä½†æ˜¯å¦‚æœè·¯ä¸Šè·‘çš„å…¨æ˜¯çœ‹èµ·æ¥ä¸€æ¨¡ä¸€æ ·çš„æ±½è½¦ï¼Œé‚£è¿™ä¸ªä¸–ç•Œçœ‹èµ·æ¥æ˜¯ä¸€å›¢æ··ä¹±ï¼Œé€æ€¥ä»¶çš„æ±½è½¦å¯èƒ½è¢«å‰é¢æ»¡è½½è´§ç‰©çš„æ±½è½¦æ‹¦å µåœ¨è·¯ä¸Šï¼Œæ•´ä¸ªäº¤é€šç³»ç»Ÿä¸€å®šä¼šç˜«ç—ªã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µå‘ç”Ÿï¼Œäº¤é€šè§„åˆ™HTTPè¯ç”Ÿäº†ã€‚HTTPç»™æ±½è½¦è¿è¾“è®¾å®šäº†å¥½å‡ ä¸ªæœåŠ¡ç±»åˆ«ï¼Œæœ‰GET, POST, PUT, DELETEç­‰ç­‰ï¼ŒHTTPè§„å®šï¼Œå½“æ‰§è¡ŒGETè¯·æ±‚çš„æ—¶å€™ï¼Œè¦ç»™æ±½è½¦è´´ä¸ŠGETçš„æ ‡ç­¾ï¼ˆè®¾ç½®methodä¸ºGETï¼‰ï¼Œè€Œä¸”è¦æ±‚æŠŠä¼ é€çš„æ•°æ®æ”¾åœ¨è½¦é¡¶ä¸Šï¼ˆurlä¸­ï¼‰ä»¥æ–¹ä¾¿è®°å½•ã€‚å¦‚æœæ˜¯POSTè¯·æ±‚ï¼Œå°±è¦åœ¨è½¦ä¸Šè´´ä¸ŠPOSTçš„æ ‡ç­¾ï¼Œå¹¶æŠŠè´§ç‰©æ”¾åœ¨è½¦å¢é‡Œã€‚å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨GETçš„æ—¶å€™å¾€è½¦å¢å†…å·å·è—ç‚¹è´§ç‰©ï¼Œä½†æ˜¯è¿™æ˜¯å¾ˆä¸å…‰å½©ï¼›ä¹Ÿå¯ä»¥åœ¨POSTçš„æ—¶å€™åœ¨è½¦é¡¶ä¸Šä¹Ÿæ”¾ä¸€äº›æ•°æ®ï¼Œè®©äººè§‰å¾—å‚»ä¹ä¹çš„ã€‚HTTPåªæ˜¯ä¸ªè¡Œä¸ºå‡†åˆ™ï¼Œè€ŒTCPæ‰æ˜¯GETå’ŒPOSTæ€ä¹ˆå®ç°çš„åŸºæœ¬ã€‚</p>
<p>ä½†æ˜¯ï¼Œæˆ‘ä»¬åªçœ‹åˆ°HTTPå¯¹GETå’ŒPOSTå‚æ•°çš„ä¼ é€æ¸ é“ï¼ˆurlè¿˜æ˜¯requrest bodyï¼‰æå‡ºäº†è¦æ±‚ã€‚â€œæ ‡å‡†ç­”æ¡ˆâ€é‡Œå…³äºå‚æ•°å¤§å°çš„é™åˆ¶åˆæ˜¯ä»å“ªæ¥çš„å‘¢ï¼Ÿ<br>åœ¨æˆ‘å¤§ä¸‡ç»´ç½‘ä¸–ç•Œä¸­ï¼Œè¿˜æœ‰å¦ä¸€ä¸ªé‡è¦çš„è§’è‰²ï¼šè¿è¾“å…¬å¸ã€‚ä¸åŒçš„æµè§ˆå™¨ï¼ˆå‘èµ·httpè¯·æ±‚ï¼‰å’ŒæœåŠ¡å™¨ï¼ˆæ¥å—httpè¯·æ±‚ï¼‰å°±æ˜¯ä¸åŒçš„è¿è¾“å…¬å¸ã€‚ è™½ç„¶ç†è®ºä¸Šï¼Œä½ å¯ä»¥åœ¨è½¦é¡¶ä¸Šæ— é™çš„å †è´§ç‰©ï¼ˆurlä¸­æ— é™åŠ å‚æ•°ï¼‰ã€‚ä½†æ˜¯è¿è¾“å…¬å¸å¯ä¸å‚»ï¼Œè£…è´§å’Œå¸è´§ä¹Ÿæ˜¯æœ‰å¾ˆå¤§æˆæœ¬çš„ï¼Œä»–ä»¬ä¼šé™åˆ¶å•æ¬¡è¿è¾“é‡æ¥æ§åˆ¶é£é™©ï¼Œæ•°æ®é‡å¤ªå¤§å¯¹æµè§ˆå™¨å’ŒæœåŠ¡å™¨éƒ½æ˜¯å¾ˆå¤§è´Ÿæ‹…ã€‚ä¸šç•Œä¸æˆæ–‡çš„è§„å®šæ˜¯ï¼Œï¼ˆå¤§å¤šæ•°ï¼‰æµè§ˆå™¨é€šå¸¸éƒ½ä¼šé™åˆ¶urlé•¿åº¦åœ¨2Kä¸ªå­—èŠ‚ï¼Œè€Œï¼ˆå¤§å¤šæ•°ï¼‰æœåŠ¡å™¨æœ€å¤šå¤„ç†64Kå¤§å°çš„urlã€‚è¶…è¿‡çš„éƒ¨åˆ†ï¼Œæ•ä¸å¤„ç†ã€‚å¦‚æœä½ ç”¨GETæœåŠ¡ï¼Œåœ¨request bodyå·å·è—äº†æ•°æ®ï¼Œä¸åŒæœåŠ¡å™¨çš„å¤„ç†æ–¹å¼ä¹Ÿæ˜¯ä¸åŒçš„ï¼Œæœ‰äº›æœåŠ¡å™¨ä¼šå¸®ä½ å¸è´§ï¼Œè¯»å‡ºæ•°æ®ï¼Œæœ‰äº›æœåŠ¡å™¨ç›´æ¥å¿½ç•¥ï¼Œæ‰€ä»¥ï¼Œè™½ç„¶GETå¯ä»¥å¸¦request bodyï¼Œä¹Ÿä¸èƒ½ä¿è¯ä¸€å®šèƒ½è¢«æ¥æ”¶åˆ°å“¦ã€‚</p>
<p>GETå’ŒPOSTæœ¬è´¨ä¸Šå°±æ˜¯TCPé“¾æ¥ï¼Œå¹¶æ— å·®åˆ«ã€‚ä½†æ˜¯ç”±äºHTTPçš„è§„å®šå’Œæµè§ˆå™¨/æœåŠ¡å™¨çš„é™åˆ¶ï¼Œå¯¼è‡´ä»–ä»¬åœ¨åº”ç”¨è¿‡ç¨‹ä¸­ä½“ç°å‡ºä¸€äº›ä¸åŒã€‚<br>GETå’ŒPOSTè¿˜æœ‰ä¸€ä¸ªé‡å¤§åŒºåˆ«ï¼Œç®€å•çš„è¯´ï¼š<br><strong>GETäº§ç”Ÿä¸€ä¸ªTCPæ•°æ®åŒ…ï¼›POSTäº§ç”Ÿä¸¤ä¸ªTCPæ•°æ®åŒ…</strong>ã€‚</p>
<p>é•¿çš„è¯´ï¼š<br>å¯¹äºGETæ–¹å¼çš„è¯·æ±‚ï¼Œæµè§ˆå™¨ä¼šæŠŠhttp headerå’Œdataä¸€å¹¶å‘é€å‡ºå»ï¼ŒæœåŠ¡å™¨å“åº”200ï¼ˆè¿”å›æ•°æ®ï¼‰ï¼›<br>è€Œå¯¹äºPOSTï¼Œæµè§ˆå™¨å…ˆå‘é€headerï¼ŒæœåŠ¡å™¨å“åº”100 continueï¼Œæµè§ˆå™¨å†å‘é€dataï¼ŒæœåŠ¡å™¨å“åº”200(è¿”å›æ•°æ®ï¼‰ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼ŒGETåªéœ€è¦æ±½è½¦è·‘ä¸€è¶Ÿå°±æŠŠè´§é€åˆ°äº†ï¼Œè€ŒPOSTå¾—è·‘ä¸¤è¶Ÿï¼Œç¬¬ä¸€è¶Ÿï¼Œå…ˆå»å’ŒæœåŠ¡å™¨æ‰“ä¸ªæ‹›å‘¼â€œå—¨ï¼Œæˆ‘ç­‰ä¸‹è¦é€ä¸€æ‰¹è´§æ¥ï¼Œä½ ä»¬æ‰“å¼€é—¨è¿æ¥æˆ‘â€ï¼Œç„¶åå†å›å¤´æŠŠè´§é€è¿‡å»ã€‚</p>
<p>å› ä¸ºPOSTéœ€è¦ä¸¤æ­¥ï¼Œæ—¶é—´ä¸Šæ¶ˆè€—çš„è¦å¤šä¸€ç‚¹ï¼Œçœ‹èµ·æ¥GETæ¯”POSTæ›´æœ‰æ•ˆã€‚å› æ­¤Yahooå›¢é˜Ÿæœ‰æ¨èç”¨GETæ›¿æ¢POSTæ¥ä¼˜åŒ–ç½‘ç«™æ€§èƒ½ã€‚ä½†è¿™æ˜¯ä¸€ä¸ªå‘ï¼ä¸ºä»€ä¹ˆï¼Ÿ</p>
<ol>
<li>GETä¸POSTéƒ½æœ‰è‡ªå·±çš„è¯­ä¹‰ï¼Œä¸èƒ½éšä¾¿æ··ç”¨ã€‚</li>
<li>æ®ç ”ç©¶ï¼Œåœ¨ç½‘ç»œç¯å¢ƒå¥½çš„æƒ…å†µä¸‹ï¼Œå‘ä¸€æ¬¡åŒ…çš„æ—¶é—´å’Œå‘ä¸¤æ¬¡åŒ…çš„æ—¶é—´å·®åˆ«åŸºæœ¬å¯ä»¥æ— è§†ã€‚è€Œåœ¨ç½‘ç»œç¯å¢ƒå·®çš„æƒ…å†µä¸‹ï¼Œä¸¤æ¬¡åŒ…çš„TCPåœ¨éªŒè¯æ•°æ®åŒ…å®Œæ•´æ€§ä¸Šï¼Œæœ‰éå¸¸å¤§çš„ä¼˜ç‚¹ã€‚</li>
<li>å¹¶ä¸æ˜¯æ‰€æœ‰æµè§ˆå™¨éƒ½ä¼šåœ¨POSTä¸­å‘é€ä¸¤æ¬¡åŒ…ï¼ŒFirefoxå°±åªå‘é€ä¸€æ¬¡ã€‚</li>
</ol>
<h3 id="ä»€ä¹ˆæƒ…å†µä¸‹è°ƒç”¨doGet-å’ŒdoPost-ï¼Ÿ"><a href="#ä»€ä¹ˆæƒ…å†µä¸‹è°ƒç”¨doGet-å’ŒdoPost-ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæƒ…å†µä¸‹è°ƒç”¨doGet()å’ŒdoPost()ï¼Ÿ"></a>ä»€ä¹ˆæƒ…å†µä¸‹è°ƒç”¨doGet()å’ŒdoPost()ï¼Ÿ</h3><p>Formæ ‡ç­¾é‡Œçš„methodçš„å±æ€§ä¸ºgetæ—¶è°ƒç”¨doGet()ï¼Œä¸ºpostæ—¶è°ƒç”¨doPost()ã€‚</p>
<h3 id="è½¬å‘-Forward-å’Œé‡å®šå‘-Redirect-çš„åŒºåˆ«"><a href="#è½¬å‘-Forward-å’Œé‡å®šå‘-Redirect-çš„åŒºåˆ«" class="headerlink" title="è½¬å‘(Forward)å’Œé‡å®šå‘(Redirect)çš„åŒºåˆ«"></a>è½¬å‘(Forward)å’Œé‡å®šå‘(Redirect)çš„åŒºåˆ«</h3><p><strong>è½¬å‘æ˜¯æœåŠ¡å™¨è¡Œä¸ºï¼Œé‡å®šå‘æ˜¯å®¢æˆ·ç«¯è¡Œä¸º</strong>ã€‚<br>è½¬å‘ï¼ˆForwardï¼‰<br>é€šè¿‡RequestDispatcherå¯¹è±¡çš„forwardï¼ˆHttpServletRequest request,HttpServletResponse responseï¼‰æ–¹æ³•å®ç°çš„ã€‚RequestDispatcherå¯ä»¥é€šè¿‡HttpServletRequest çš„getRequestDispatcher()æ–¹æ³•è·å¾—ã€‚ä¾‹å¦‚ä¸‹é¢çš„ä»£ç å°±æ˜¯è·³è½¬åˆ°login_success.jspé¡µé¢ã€‚</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2021/07/14/Servlet%E5%9F%BA%E7%A1%80%E6%80%BB%E7%BB%93/content2.png" class title="content2">

<p>é‡å®šå‘ï¼ˆRedirectï¼‰<br>æ˜¯åˆ©ç”¨æœåŠ¡å™¨è¿”å›çš„çŠ¶æ€ç æ¥å®ç°çš„ã€‚å®¢æˆ·ç«¯æµè§ˆå™¨è¯·æ±‚æœåŠ¡å™¨çš„æ—¶å€™ï¼ŒæœåŠ¡å™¨ä¼šè¿”å›ä¸€ä¸ªçŠ¶æ€ç ã€‚æœåŠ¡å™¨é€šè¿‡ HttpServletResponseçš„setStatus(int status)æ–¹æ³•è®¾ç½®çŠ¶æ€ç ã€‚å¦‚æœæœåŠ¡å™¨è¿”å›301æˆ–è€…302ï¼Œåˆ™æµè§ˆå™¨ä¼šåˆ°æ–°çš„ç½‘å€é‡æ–°è¯·æ±‚è¯¥èµ„æºã€‚</p>
<ol>
<li><p>ä»åœ°å€æ æ˜¾ç¤ºæ¥è¯´<br>forwardæ˜¯æœåŠ¡å™¨è¯·æ±‚èµ„æº,æœåŠ¡å™¨ç›´æ¥è®¿é—®ç›®æ ‡åœ°å€çš„URL,æŠŠé‚£ä¸ªURLçš„å“åº”å†…å®¹è¯»å–è¿‡æ¥,ç„¶åæŠŠè¿™äº›å†…å®¹å†å‘ç»™æµè§ˆå™¨.æµè§ˆå™¨æ ¹æœ¬ä¸çŸ¥é“æœåŠ¡å™¨å‘é€çš„å†…å®¹ä»å“ªé‡Œæ¥çš„,æ‰€ä»¥å®ƒçš„åœ°å€æ è¿˜æ˜¯åŸæ¥çš„åœ°å€.<br>redirectæ˜¯æœåŠ¡ç«¯æ ¹æ®é€»è¾‘,å‘é€ä¸€ä¸ªçŠ¶æ€ç ,å‘Šè¯‰æµè§ˆå™¨é‡æ–°å»è¯·æ±‚é‚£ä¸ªåœ°å€.æ‰€ä»¥åœ°å€æ æ˜¾ç¤ºçš„æ˜¯æ–°çš„URL.</p>
</li>
<li><p>ä»æ•°æ®å…±äº«æ¥è¯´<br>forward:è½¬å‘é¡µé¢å’Œè½¬å‘åˆ°çš„é¡µé¢å¯ä»¥å…±äº«requesté‡Œé¢çš„æ•°æ®.<br>redirect:ä¸èƒ½å…±äº«æ•°æ®.</p>
</li>
<li><p>ä»è¿ç”¨åœ°æ–¹æ¥è¯´<br>forward:ä¸€èˆ¬ç”¨äºç”¨æˆ·ç™»é™†çš„æ—¶å€™,æ ¹æ®è§’è‰²è½¬å‘åˆ°ç›¸åº”çš„æ¨¡å—.<br>redirect:ä¸€èˆ¬ç”¨äºç”¨æˆ·æ³¨é”€ç™»é™†æ—¶è¿”å›ä¸»é¡µé¢å’Œè·³è½¬åˆ°å…¶å®ƒçš„ç½‘ç«™ç­‰</p>
</li>
<li><p>ä»æ•ˆç‡æ¥è¯´<br>forward:é«˜.<br>redirect:ä½. </p>
</li>
</ol>
<h3 id="è‡ªåŠ¨åˆ·æ–°-Refresh"><a href="#è‡ªåŠ¨åˆ·æ–°-Refresh" class="headerlink" title="è‡ªåŠ¨åˆ·æ–°(Refresh)"></a>è‡ªåŠ¨åˆ·æ–°(Refresh)</h3><p>è‡ªåŠ¨åˆ·æ–°ä¸ä»…å¯ä»¥å®ç°ä¸€æ®µæ—¶é—´ä¹‹åè‡ªåŠ¨è·³è½¬åˆ°å¦ä¸€ä¸ªé¡µé¢ï¼Œè¿˜å¯ä»¥å®ç°ä¸€æ®µæ—¶é—´ä¹‹åè‡ªåŠ¨åˆ·æ–°æœ¬é¡µé¢ã€‚Servletä¸­é€šè¿‡HttpServletResponseå¯¹è±¡è®¾ç½®Headerå±æ€§å®ç°è‡ªåŠ¨åˆ·æ–°ä¾‹å¦‚ï¼š</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2021/07/14/Servlet%E5%9F%BA%E7%A1%80%E6%80%BB%E7%BB%93/content3.png" class title="content3">

<p>å…¶ä¸­5ä¸ºæ—¶é—´ï¼Œå•ä½ä¸ºç§’ã€‚URLæŒ‡å®šå°±æ˜¯è¦è·³è½¬çš„é¡µé¢ï¼ˆå¦‚æœè®¾ç½®è‡ªå·±çš„è·¯å¾„ï¼Œå°±ä¼šå®ç°æ¯è¿‡5ç§’è‡ªåŠ¨åˆ·æ–°æœ¬é¡µé¢ä¸€æ¬¡ï¼‰</p>
<h3 id="Servletä¸çº¿ç¨‹å®‰å…¨"><a href="#Servletä¸çº¿ç¨‹å®‰å…¨" class="headerlink" title="Servletä¸çº¿ç¨‹å®‰å…¨"></a>Servletä¸çº¿ç¨‹å®‰å…¨</h3><p>Servletä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¤šçº¿ç¨‹å¹¶å‘çš„è¯»å†™ä¼šå¯¼è‡´æ•°æ®ä¸åŒæ­¥çš„é—®é¢˜ã€‚ è§£å†³çš„åŠæ³•æ˜¯å°½é‡ä¸è¦å®šä¹‰nameå±æ€§ï¼Œè€Œæ˜¯è¦æŠŠnameå˜é‡åˆ†åˆ«å®šä¹‰åœ¨doGet()å’ŒdoPost()æ–¹æ³•å†…ã€‚è™½ç„¶ä½¿ç”¨synchronized(name){}è¯­å¥å—å¯ä»¥è§£å†³é—®é¢˜ï¼Œä½†æ˜¯ä¼šé€ æˆçº¿ç¨‹çš„ç­‰å¾…ï¼Œä¸æ˜¯å¾ˆç§‘å­¦çš„åŠæ³•ã€‚ æ³¨æ„ï¼šå¤šçº¿ç¨‹çš„å¹¶å‘çš„è¯»å†™Servletç±»å±æ€§ä¼šå¯¼è‡´æ•°æ®ä¸åŒæ­¥ã€‚ä½†æ˜¯å¦‚æœåªæ˜¯å¹¶å‘åœ°è¯»å–å±æ€§è€Œä¸å†™å…¥ï¼Œåˆ™ä¸å­˜åœ¨æ•°æ®ä¸åŒæ­¥çš„é—®é¢˜ã€‚å› æ­¤Servleté‡Œçš„åªè¯»å±æ€§æœ€å¥½å®šä¹‰ä¸ºfinalç±»å‹çš„ã€‚</p>
<h3 id="JSPå’ŒServletæ˜¯ä»€ä¹ˆå…³ç³»"><a href="#JSPå’ŒServletæ˜¯ä»€ä¹ˆå…³ç³»" class="headerlink" title="JSPå’ŒServletæ˜¯ä»€ä¹ˆå…³ç³»"></a>JSPå’ŒServletæ˜¯ä»€ä¹ˆå…³ç³»</h3><p>å…¶å®è¿™ä¸ªé—®é¢˜åœ¨ä¸Šé¢å·²ç»é˜è¿°è¿‡äº†ï¼ŒServletæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„Javaç¨‹åºï¼Œå®ƒè¿è¡ŒäºæœåŠ¡å™¨çš„JVMä¸­ï¼Œèƒ½å¤Ÿä¾é æœåŠ¡å™¨çš„æ”¯æŒå‘æµè§ˆå™¨æä¾›æ˜¾ç¤ºå†…å®¹ã€‚JSPæœ¬è´¨ä¸Šæ˜¯Servletçš„ä¸€ç§ç®€æ˜“å½¢å¼ï¼ŒJSPä¼šè¢«æœåŠ¡å™¨å¤„ç†æˆä¸€ä¸ªç±»ä¼¼äºServletçš„Javaç¨‹åºï¼Œå¯ä»¥ç®€åŒ–é¡µé¢å†…å®¹çš„ç”Ÿæˆã€‚Servletå’ŒJSPæœ€ä¸»è¦çš„ä¸åŒç‚¹åœ¨äºï¼ŒServletçš„åº”ç”¨é€»è¾‘æ˜¯åœ¨Javaæ–‡ä»¶ä¸­ï¼Œå¹¶ä¸”å®Œå…¨ä»è¡¨ç¤ºå±‚ä¸­çš„HTMLåˆ†ç¦»å¼€æ¥ã€‚è€ŒJSPçš„æƒ…å†µæ˜¯Javaå’ŒHTMLå¯ä»¥ç»„åˆæˆä¸€ä¸ªæ‰©å±•åä¸º.jspçš„æ–‡ä»¶ã€‚æœ‰äººè¯´ï¼ŒServletå°±æ˜¯åœ¨Javaä¸­å†™HTMLï¼Œè€ŒJSPå°±æ˜¯åœ¨HTMLä¸­å†™Javaä»£ç ï¼Œå½“ç„¶è¿™ä¸ªè¯´æ³•æ˜¯å¾ˆç‰‡é¢ä¸”ä¸å¤Ÿå‡†ç¡®çš„ã€‚JSPä¾§é‡äºè§†å›¾ï¼ŒServletæ›´ä¾§é‡äºæ§åˆ¶é€»è¾‘ï¼Œåœ¨MVCæ¶æ„æ¨¡å¼ä¸­ï¼ŒJSPé€‚åˆå……å½“è§†å›¾ï¼ˆviewï¼‰è€ŒServleté€‚åˆå……å½“æ§åˆ¶å™¨ï¼ˆcontrollerï¼‰ã€‚</p>
<h3 id="JSPå·¥ä½œåŸç†"><a href="#JSPå·¥ä½œåŸç†" class="headerlink" title="JSPå·¥ä½œåŸç†"></a>JSPå·¥ä½œåŸç†</h3><p>JSPæ˜¯ä¸€ç§Servletï¼Œä½†æ˜¯ä¸HttpServletçš„å·¥ä½œæ–¹å¼ä¸å¤ªä¸€æ ·ã€‚HttpServletæ˜¯å…ˆç”±æºä»£ç ç¼–è¯‘ä¸ºclassæ–‡ä»¶åéƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸‹ï¼Œä¸ºå…ˆç¼–è¯‘åéƒ¨ç½²ã€‚è€ŒJSPåˆ™æ˜¯å…ˆéƒ¨ç½²åç¼–è¯‘ã€‚JSPä¼šåœ¨å®¢æˆ·ç«¯ç¬¬ä¸€æ¬¡è¯·æ±‚JSPæ–‡ä»¶æ—¶è¢«ç¼–è¯‘ä¸ºHttpJspPageç±»ï¼ˆæ¥å£Servletçš„ä¸€ä¸ªå­ç±»ï¼‰ã€‚è¯¥ç±»ä¼šè¢«æœåŠ¡å™¨ä¸´æ—¶å­˜æ”¾åœ¨æœåŠ¡å™¨å·¥ä½œç›®å½•é‡Œé¢ã€‚ä¸‹é¢é€šè¿‡å®ä¾‹ç»™å¤§å®¶ä»‹ç»ã€‚ å·¥ç¨‹JspLoginDemoä¸‹æœ‰ä¸€ä¸ªåä¸ºlogin.jspçš„Jspæ–‡ä»¶ï¼ŒæŠŠå·¥ç¨‹ç¬¬ä¸€æ¬¡éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šåè®¿é—®è¿™ä¸ªJspæ–‡ä»¶ï¼Œæˆ‘ä»¬å‘ç°è¿™ä¸ªç›®å½•ä¸‹å¤šäº†ä¸‹å›¾è¿™ä¸¤ä¸ªä¸œä¸œã€‚ .classæ–‡ä»¶ä¾¿æ˜¯JSPå¯¹åº”çš„Servletã€‚ç¼–è¯‘å®Œæ¯•åå†è¿è¡Œclassæ–‡ä»¶æ¥å“åº”å®¢æˆ·ç«¯è¯·æ±‚ã€‚ä»¥åå®¢æˆ·ç«¯è®¿é—®login.jspçš„æ—¶å€™ï¼ŒTomcatå°†ä¸å†é‡æ–°ç¼–è¯‘JSPæ–‡ä»¶ï¼Œè€Œæ˜¯ç›´æ¥è°ƒç”¨classæ–‡ä»¶æ¥å“åº”å®¢æˆ·ç«¯è¯·æ±‚ã€‚</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2021/07/14/Servlet%E5%9F%BA%E7%A1%80%E6%80%BB%E7%BB%93/content4.png" class title="content4">

<p>ç”±äºJSPåªä¼šåœ¨å®¢æˆ·ç«¯ç¬¬ä¸€æ¬¡è¯·æ±‚çš„æ—¶å€™è¢«ç¼–è¯‘ ï¼Œå› æ­¤ç¬¬ä¸€æ¬¡è¯·æ±‚JSPæ—¶ä¼šæ„Ÿè§‰æ¯”è¾ƒæ…¢ï¼Œä¹‹åå°±ä¼šæ„Ÿè§‰å¿«å¾ˆå¤šã€‚å¦‚æœæŠŠæœåŠ¡å™¨ä¿å­˜çš„classæ–‡ä»¶åˆ é™¤ï¼ŒæœåŠ¡å™¨ä¹Ÿä¼šé‡æ–°ç¼–è¯‘JSPã€‚<br>å¼€å‘Webç¨‹åºæ—¶ç»å¸¸éœ€è¦ä¿®æ”¹JSPã€‚Tomcatèƒ½å¤Ÿè‡ªåŠ¨æ£€æµ‹åˆ°JSPç¨‹åºçš„æ”¹åŠ¨ã€‚å¦‚æœæ£€æµ‹åˆ°JSPæºä»£ç å‘ç”Ÿäº†æ”¹åŠ¨ã€‚Tomcatä¼šåœ¨ä¸‹æ¬¡å®¢æˆ·ç«¯è¯·æ±‚JSPæ—¶é‡æ–°ç¼–è¯‘JSPï¼Œè€Œä¸éœ€è¦é‡å¯Tomcatã€‚è¿™ç§è‡ªåŠ¨æ£€æµ‹åŠŸèƒ½æ˜¯é»˜è®¤å¼€å¯çš„ï¼Œæ£€æµ‹æ”¹åŠ¨ä¼šæ¶ˆè€—å°‘é‡çš„æ—¶é—´ï¼Œåœ¨éƒ¨ç½²Webåº”ç”¨çš„æ—¶å€™å¯ä»¥åœ¨web.xmlä¸­å°†å®ƒå…³æ‰ã€‚</p>
<h3 id="JSPæœ‰å“ªäº›å†…ç½®å¯¹è±¡ã€ä½œç”¨åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#JSPæœ‰å“ªäº›å†…ç½®å¯¹è±¡ã€ä½œç”¨åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="JSPæœ‰å“ªäº›å†…ç½®å¯¹è±¡ã€ä½œç”¨åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>JSPæœ‰å“ªäº›å†…ç½®å¯¹è±¡ã€ä½œç”¨åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>JSPæœ‰9ä¸ªå†…ç½®å¯¹è±¡ï¼š</p>
<ul>
<li>requestï¼šå°è£…å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œå…¶ä¸­åŒ…å«æ¥è‡ªGETæˆ–POSTè¯·æ±‚çš„å‚æ•°ï¼› </li>
<li>responseï¼šå°è£…æœåŠ¡å™¨å¯¹å®¢æˆ·ç«¯çš„å“åº”ï¼›</li>
<li>pageContextï¼šé€šè¿‡è¯¥å¯¹è±¡å¯ä»¥è·å–å…¶ä»–å¯¹è±¡ï¼›</li>
<li>sessionï¼šå°è£…ç”¨æˆ·ä¼šè¯çš„å¯¹è±¡ï¼›</li>
<li>applicationï¼šå°è£…æœåŠ¡å™¨è¿è¡Œç¯å¢ƒçš„å¯¹è±¡ï¼›</li>
<li>outï¼šè¾“å‡ºæœåŠ¡å™¨å“åº”çš„è¾“å‡ºæµå¯¹è±¡ï¼›</li>
<li>configï¼šWebåº”ç”¨çš„é…ç½®å¯¹è±¡ï¼›</li>
<li>pageï¼šJSPé¡µé¢æœ¬èº«ï¼ˆç›¸å½“äºJavaç¨‹åºä¸­çš„thisï¼‰ï¼›</li>
<li>exceptionï¼šå°è£…é¡µé¢æŠ›å‡ºå¼‚å¸¸çš„å¯¹è±¡ã€‚</li>
</ul>
<h3 id="Requestå¯¹è±¡çš„ä¸»è¦æ–¹æ³•æœ‰å“ªäº›ï¼Ÿ"><a href="#Requestå¯¹è±¡çš„ä¸»è¦æ–¹æ³•æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="Requestå¯¹è±¡çš„ä¸»è¦æ–¹æ³•æœ‰å“ªäº›ï¼Ÿ"></a>Requestå¯¹è±¡çš„ä¸»è¦æ–¹æ³•æœ‰å“ªäº›ï¼Ÿ</h3><ol>
<li>setAttribute(String name,Object)ï¼šè®¾ç½®åå­—ä¸ºnameçš„request çš„å‚æ•°å€¼</li>
<li>getAttribute(String name)ï¼šè¿”å›ç”±nameæŒ‡å®šçš„å±æ€§å€¼</li>
<li>getAttributeNames()ï¼šè¿”å›request å¯¹è±¡æ‰€æœ‰å±æ€§çš„åå­—é›†åˆï¼Œç»“æœæ˜¯ä¸€ä¸ªæšä¸¾çš„å®ä¾‹</li>
<li>getCookies()ï¼šè¿”å›å®¢æˆ·ç«¯çš„æ‰€æœ‰ Cookie å¯¹è±¡ï¼Œç»“æœæ˜¯ä¸€ä¸ªCookie æ•°ç»„</li>
<li>getCharacterEncoding() ï¼šè¿”å›è¯·æ±‚ä¸­çš„å­—ç¬¦ç¼–ç æ–¹å¼ = getContentLength() ï¼šè¿”å›è¯·æ±‚çš„ Bodyçš„é•¿åº¦</li>
<li>getHeader(String name) ï¼šè·å¾—HTTPåè®®å®šä¹‰çš„æ–‡ä»¶å¤´ä¿¡æ¯</li>
<li>getHeaders(String name) ï¼šè¿”å›æŒ‡å®šåå­—çš„request Header çš„æ‰€æœ‰å€¼ï¼Œç»“æœæ˜¯ä¸€ä¸ªæšä¸¾çš„å®ä¾‹</li>
<li>getHeaderNames() ï¼šè¿”å›æ‰€ä»¥request Header çš„åå­—ï¼Œç»“æœæ˜¯ä¸€ä¸ªæšä¸¾çš„å®ä¾‹</li>
<li>getInputStream() ï¼šè¿”å›è¯·æ±‚çš„è¾“å…¥æµï¼Œç”¨äºè·å¾—è¯·æ±‚ä¸­çš„æ•°æ®</li>
<li>getMethod() ï¼šè·å¾—å®¢æˆ·ç«¯å‘æœåŠ¡å™¨ç«¯ä¼ é€æ•°æ®çš„æ–¹æ³•</li>
<li>getParameter(String name) ï¼šè·å¾—å®¢æˆ·ç«¯ä¼ é€ç»™æœåŠ¡å™¨ç«¯çš„æœ‰ nameæŒ‡å®šçš„å‚æ•°å€¼</li>
<li>getParameterNames() ï¼šè·å¾—å®¢æˆ·ç«¯ä¼ é€ç»™æœåŠ¡å™¨ç«¯çš„æ‰€æœ‰å‚æ•°çš„åå­—ï¼Œç»“æœæ˜¯ä¸€ä¸ªæšä¸¾çš„å®ä¾‹</li>
<li>getParameterValues(String name)ï¼šè·å¾—æœ‰nameæŒ‡å®šçš„å‚æ•°çš„æ‰€æœ‰å€¼</li>
<li>getProtocol()ï¼šè·å–å®¢æˆ·ç«¯å‘æœåŠ¡å™¨ç«¯ä¼ é€æ•°æ®æ‰€ä¾æ®çš„åè®®åç§°</li>
<li>getQueryString() ï¼šè·å¾—æŸ¥è¯¢å­—ç¬¦ä¸²</li>
<li>getRequestURI() ï¼šè·å–å‘å‡ºè¯·æ±‚å­—ç¬¦ä¸²çš„å®¢æˆ·ç«¯åœ°å€</li>
<li>getRemoteAddr()ï¼šè·å–å®¢æˆ·ç«¯çš„ IP åœ°å€</li>
<li>getRemoteHost() ï¼šè·å–å®¢æˆ·ç«¯çš„åå­—</li>
<li>getSession([Boolean create]) ï¼šè¿”å›å’Œè¯·æ±‚ç›¸å…³ Session</li>
<li>getServerName() ï¼šè·å–æœåŠ¡å™¨çš„åå­—</li>
<li>getServletPath()ï¼šè·å–å®¢æˆ·ç«¯æ‰€è¯·æ±‚çš„è„šæœ¬æ–‡ä»¶çš„è·¯å¾„</li>
<li>getServerPort()ï¼šè·å–æœåŠ¡å™¨çš„ç«¯å£å·</li>
<li>removeAttribute(String name)ï¼šåˆ é™¤è¯·æ±‚ä¸­çš„ä¸€ä¸ªå±æ€§</li>
</ol>
<h3 id="request-getAttribute-å’Œrequest-getParameter-æœ‰ä½•åŒºåˆ«"><a href="#request-getAttribute-å’Œrequest-getParameter-æœ‰ä½•åŒºåˆ«" class="headerlink" title="request.getAttribute()å’Œrequest.getParameter()æœ‰ä½•åŒºåˆ«"></a>request.getAttribute()å’Œrequest.getParameter()æœ‰ä½•åŒºåˆ«</h3><ol>
<li><p>ä»è·å–æ–¹å‘æ¥çœ‹ï¼š<br>getParameter() æ˜¯è·å– POST/GET ä¼ é€’çš„å‚æ•°å€¼ï¼›<br>getAttribute() æ˜¯è·å–å¯¹è±¡å®¹å™¨ä¸­çš„æ•°æ®å€¼ï¼›</p>
</li>
<li><p>ä»ç”¨é€”æ¥çœ‹ï¼š<br>getParameter() ç”¨äºå®¢æˆ·ç«¯é‡å®šå‘æ—¶ï¼Œå³ç‚¹å‡»äº†é“¾æ¥æˆ–æäº¤æŒ‰æ‰­æ—¶ä¼ å€¼ç”¨ï¼Œå³ç”¨äºåœ¨ç”¨è¡¨å•æˆ–urlé‡å®šå‘ä¼ å€¼æ—¶æ¥æ”¶æ•°æ®ç”¨ã€‚<br>getAttribute() ç”¨äºæœåŠ¡å™¨ç«¯é‡å®šå‘æ—¶ï¼Œå³åœ¨ sevlet ä¸­ä½¿ç”¨äº† forward å‡½æ•°,æˆ– struts ä¸­ä½¿ç”¨äº† mapping.findForwardã€‚ getAttribute åªèƒ½æ”¶åˆ°ç¨‹åºç”¨ setAttribute ä¼ è¿‡æ¥çš„å€¼ã€‚<br>å¦å¤–ï¼Œå¯ä»¥ç”¨ setAttribute() , getAttribute() å‘é€æ¥æ”¶å¯¹è±¡.è€Œ getParameter() æ˜¾ç„¶åªèƒ½ä¼ å­—ç¬¦ä¸²ã€‚ setAttribute() æ˜¯åº”ç”¨æœåŠ¡å™¨æŠŠè¿™ä¸ªå¯¹è±¡æ”¾åœ¨è¯¥é¡µé¢æ‰€å¯¹åº”çš„ä¸€å—å†…å­˜ä¸­å»ï¼Œå½“ä½ çš„é¡µé¢æœåŠ¡å™¨é‡å®šå‘åˆ°å¦ä¸€ä¸ªé¡µé¢æ—¶ï¼Œåº”ç”¨æœåŠ¡å™¨ä¼šæŠŠè¿™å—å†…å­˜æ‹·è´å¦ä¸€ä¸ªé¡µé¢æ‰€å¯¹åº”çš„å†…å­˜ä¸­ã€‚è¿™æ · setAttribute() å°±èƒ½å–å¾—ä½ æ‰€è®¾ä¸‹çš„å€¼ï¼Œå½“ç„¶è¿™ç§æ–¹æ³•å¯ä»¥ä¼ å¯¹è±¡ã€‚sessionä¹Ÿä¸€æ ·ï¼Œåªæ˜¯å¯¹è±¡åœ¨å†…å­˜ä¸­çš„ç”Ÿå‘½å‘¨æœŸä¸ä¸€æ ·è€Œå·²ã€‚getParameter() åªæ˜¯åº”ç”¨æœåŠ¡å™¨åœ¨åˆ†æä½ é€ä¸Šæ¥çš„ requesté¡µé¢çš„æ–‡æœ¬æ—¶ï¼Œå–å¾—ä½ è®¾åœ¨è¡¨å•æˆ– url é‡å®šå‘æ—¶çš„å€¼ã€‚ </p>
</li>
<li><p>æ€»ç»“ï¼š<br>getParameter() è¿”å›çš„æ˜¯String,ç”¨äºè¯»å–æäº¤çš„è¡¨å•ä¸­çš„å€¼;ï¼ˆè·å–ä¹‹åä¼šæ ¹æ®å®é™…éœ€è¦è½¬æ¢ä¸ºè‡ªå·±éœ€è¦çš„ç›¸åº”ç±»å‹ï¼Œæ¯”å¦‚æ•´å‹ï¼Œæ—¥æœŸç±»å‹å•Šç­‰ç­‰ï¼‰<br>getAttribute() è¿”å›çš„æ˜¯Objectï¼Œéœ€è¿›è¡Œè½¬æ¢,å¯ç”¨ setAttribute() è®¾ç½®æˆä»»æ„å¯¹è±¡ï¼Œä½¿ç”¨å¾ˆçµæ´»ï¼Œå¯éšæ—¶ç”¨</p>
</li>
</ol>
<h3 id="includeæŒ‡ä»¤includeçš„è¡Œä¸ºçš„åŒºåˆ«"><a href="#includeæŒ‡ä»¤includeçš„è¡Œä¸ºçš„åŒºåˆ«" class="headerlink" title="includeæŒ‡ä»¤includeçš„è¡Œä¸ºçš„åŒºåˆ«"></a>includeæŒ‡ä»¤includeçš„è¡Œä¸ºçš„åŒºåˆ«</h3><p>includeæŒ‡ä»¤ï¼š JSPå¯ä»¥é€šè¿‡includeæŒ‡ä»¤æ¥åŒ…å«å…¶ä»–æ–‡ä»¶ã€‚è¢«åŒ…å«çš„æ–‡ä»¶å¯ä»¥æ˜¯JSPæ–‡ä»¶ã€HTMLæ–‡ä»¶æˆ–æ–‡æœ¬æ–‡ä»¶ã€‚åŒ…å«çš„æ–‡ä»¶å°±å¥½åƒæ˜¯è¯¥JSPæ–‡ä»¶çš„ä¸€éƒ¨åˆ†ï¼Œä¼šè¢«åŒæ—¶ç¼–è¯‘æ‰§è¡Œã€‚ è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š &lt;%@ include file=â€æ–‡ä»¶ç›¸å¯¹ url åœ°å€â€ %&gt;<br>includeåŠ¨ä½œï¼š <jsp : include>åŠ¨ä½œå…ƒç´ ç”¨æ¥åŒ…å«é™æ€å’ŒåŠ¨æ€çš„æ–‡ä»¶ã€‚è¯¥åŠ¨ä½œæŠŠæŒ‡å®šæ–‡ä»¶æ’å…¥æ­£åœ¨ç”Ÿæˆçš„é¡µé¢ã€‚è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š &lt;jsp:include page=â€ç›¸å¯¹ URL åœ°å€â€ flush=â€trueâ€ /&gt;</jsp></p>
<h3 id="è®²è§£JSPä¸­çš„å››ç§ä½œç”¨åŸŸ"><a href="#è®²è§£JSPä¸­çš„å››ç§ä½œç”¨åŸŸ" class="headerlink" title="è®²è§£JSPä¸­çš„å››ç§ä½œç”¨åŸŸ"></a>è®²è§£JSPä¸­çš„å››ç§ä½œç”¨åŸŸ</h3><p>JSPä¸­çš„å››ç§ä½œç”¨åŸŸåŒ…æ‹¬pageã€requestã€sessionå’Œapplicationï¼Œå…·ä½“æ¥è¯´ï¼š</p>
<ol>
<li>pageä»£è¡¨ä¸ä¸€ä¸ªé¡µé¢ç›¸å…³çš„å¯¹è±¡å’Œå±æ€§ã€‚</li>
<li>requestä»£è¡¨ä¸Webå®¢æˆ·æœºå‘å‡ºçš„ä¸€ä¸ªè¯·æ±‚ç›¸å…³çš„å¯¹è±¡å’Œå±æ€§ã€‚ä¸€ä¸ªè¯·æ±‚å¯èƒ½è·¨è¶Šå¤šä¸ªé¡µé¢ï¼Œæ¶‰åŠå¤šä¸ªWebç»„ä»¶ï¼›éœ€è¦åœ¨é¡µé¢æ˜¾ç¤ºçš„ä¸´æ—¶æ•°æ®å¯ä»¥ç½®äºæ­¤ä½œç”¨åŸŸã€‚</li>
<li>sessionä»£è¡¨ä¸æŸä¸ªç”¨æˆ·ä¸æœåŠ¡å™¨å»ºç«‹çš„ä¸€æ¬¡ä¼šè¯ç›¸å…³çš„å¯¹è±¡å’Œå±æ€§ã€‚è·ŸæŸä¸ªç”¨æˆ·ç›¸å…³çš„æ•°æ®åº”è¯¥æ”¾åœ¨ç”¨æˆ·è‡ªå·±çš„sessionä¸­ã€‚</li>
<li>applicationä»£è¡¨ä¸æ•´ä¸ªWebåº”ç”¨ç¨‹åºç›¸å…³çš„å¯¹è±¡å’Œå±æ€§ï¼Œå®ƒå®è´¨ä¸Šæ˜¯è·¨è¶Šæ•´ä¸ªWebåº”ç”¨ç¨‹åºï¼ŒåŒ…æ‹¬å¤šä¸ªé¡µé¢ã€è¯·æ±‚å’Œä¼šè¯çš„ä¸€ä¸ªå…¨å±€ä½œç”¨åŸŸã€‚</li>
</ol>
<h3 id="å¦‚ä½•å®ç°JSPæˆ–Servletçš„å•çº¿ç¨‹æ¨¡å¼"><a href="#å¦‚ä½•å®ç°JSPæˆ–Servletçš„å•çº¿ç¨‹æ¨¡å¼" class="headerlink" title="å¦‚ä½•å®ç°JSPæˆ–Servletçš„å•çº¿ç¨‹æ¨¡å¼"></a>å¦‚ä½•å®ç°JSPæˆ–Servletçš„å•çº¿ç¨‹æ¨¡å¼</h3><p>å¯¹äºJSPé¡µé¢ï¼Œå¯ä»¥é€šè¿‡pageæŒ‡ä»¤è¿›è¡Œè®¾ç½®ã€‚&lt;%@page isTreadSafe=â€falseâ€%&gt;<br>å¯¹äºServletï¼Œå¯ä»¥è®©è‡ªå®šä¹‰çš„Servletå®ç°SingleThreadModelæ ‡è¯†æ¥å£ã€‚<br>è¯´æ˜ï¼šå¦‚æœå°†JSPæˆ–Servletè®¾ç½®æˆå•çº¿ç¨‹å·¥ä½œæ¨¡å¼ï¼Œä¼šå¯¼è‡´æ¯ä¸ªè¯·æ±‚åˆ›å»ºä¸€ä¸ªServletå®ä¾‹ï¼Œè¿™ç§å®è·µå°†å¯¼è‡´ä¸¥é‡çš„æ€§èƒ½é—®é¢˜ï¼ˆæœåŠ¡å™¨çš„å†…å­˜å‹åŠ›å¾ˆå¤§ï¼Œè¿˜ä¼šå¯¼è‡´é¢‘ç¹çš„åƒåœ¾å›æ”¶ï¼‰ï¼Œæ‰€ä»¥é€šå¸¸æƒ…å†µä¸‹å¹¶ä¸ä¼šè¿™ä¹ˆåšã€‚</p>
<h3 id="å®ç°ä¼šè¯è·Ÿè¸ªçš„æŠ€æœ¯æœ‰å“ªäº›"><a href="#å®ç°ä¼šè¯è·Ÿè¸ªçš„æŠ€æœ¯æœ‰å“ªäº›" class="headerlink" title="å®ç°ä¼šè¯è·Ÿè¸ªçš„æŠ€æœ¯æœ‰å“ªäº›"></a>å®ç°ä¼šè¯è·Ÿè¸ªçš„æŠ€æœ¯æœ‰å“ªäº›</h3><ol>
<li><p>ä½¿ç”¨Cookie<br>å‘å®¢æˆ·ç«¯å‘é€Cookie</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2021/07/14/Servlet%E5%9F%BA%E7%A1%80%E6%80%BB%E7%BB%93/content5.png" class title="content5">
<p>ä»å®¢æˆ·ç«¯è¯»å–Cookie</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2021/07/14/Servlet%E5%9F%BA%E7%A1%80%E6%80%BB%E7%BB%93/content6.png" class title="content6">
<p>ä¼˜ç‚¹: æ•°æ®å¯ä»¥æŒä¹…ä¿å­˜ï¼Œä¸éœ€è¦æœåŠ¡å™¨èµ„æºï¼Œç®€å•ï¼ŒåŸºäºæ–‡æœ¬çš„Key-Value<br>ç¼ºç‚¹: å¤§å°å—åˆ°é™åˆ¶ï¼Œç”¨æˆ·å¯ä»¥ç¦ç”¨CookieåŠŸèƒ½ï¼Œç”±äºä¿å­˜åœ¨æœ¬åœ°ï¼Œæœ‰ä¸€å®šçš„å®‰å…¨é£é™©ã€‚</p>
</li>
<li><p>URL é‡å†™<br>åœ¨URLä¸­æ·»åŠ ç”¨æˆ·ä¼šè¯çš„ä¿¡æ¯ä½œä¸ºè¯·æ±‚çš„å‚æ•°ï¼Œæˆ–è€…å°†å”¯ä¸€çš„ä¼šè¯IDæ·»åŠ åˆ°URLç»“å°¾ä»¥æ ‡è¯†ä¸€ä¸ªä¼šè¯ã€‚<br>ä¼˜ç‚¹ï¼š åœ¨Cookieè¢«ç¦ç”¨çš„æ—¶å€™ä¾ç„¶å¯ä»¥ä½¿ç”¨<br>ç¼ºç‚¹ï¼š å¿…é¡»å¯¹ç½‘ç«™çš„URLè¿›è¡Œç¼–ç ï¼Œæ‰€æœ‰é¡µé¢å¿…é¡»åŠ¨æ€ç”Ÿæˆï¼Œä¸èƒ½ç”¨é¢„å…ˆè®°å½•ä¸‹æ¥çš„URLè¿›è¡Œè®¿é—®ã€‚</p>
</li>
<li><p>éšè—çš„è¡¨å•åŸŸ</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2021/07/14/Servlet%E5%9F%BA%E7%A1%80%E6%80%BB%E7%BB%93/content7.png" class title="content7">    
<p>ä¼˜ç‚¹ï¼š Cookieè¢«ç¦æ—¶å¯ä»¥ä½¿ç”¨<br>ç¼ºç‚¹ï¼š æ‰€æœ‰é¡µé¢å¿…é¡»æ˜¯è¡¨å•æäº¤ä¹‹åçš„ç»“æœã€‚</p>
</li>
<li><p>HttpSession<br>åœ¨æ‰€æœ‰ä¼šè¯è·Ÿè¸ªæŠ€æœ¯ä¸­ï¼ŒHttpSessionå¯¹è±¡æ˜¯æœ€å¼ºå¤§ä¹Ÿæ˜¯åŠŸèƒ½æœ€å¤šçš„ã€‚å½“ä¸€ä¸ªç”¨æˆ·ç¬¬ä¸€æ¬¡è®¿é—®æŸä¸ªç½‘ç«™æ—¶ä¼šè‡ªåŠ¨åˆ›å»º HttpSessionï¼Œæ¯ä¸ªç”¨æˆ·å¯ä»¥è®¿é—®ä»–è‡ªå·±çš„HttpSessionã€‚å¯ä»¥é€šè¿‡HttpServletRequestå¯¹è±¡çš„getSessionæ–¹ æ³•è·å¾—HttpSessionï¼Œé€šè¿‡HttpSessionçš„setAttributeæ–¹æ³•å¯ä»¥å°†ä¸€ä¸ªå€¼æ”¾åœ¨HttpSessionä¸­ï¼Œé€šè¿‡è°ƒç”¨ HttpSessionå¯¹è±¡çš„getAttributeæ–¹æ³•ï¼ŒåŒæ—¶ä¼ å…¥å±æ€§åå°±å¯ä»¥è·å–ä¿å­˜åœ¨HttpSessionä¸­çš„å¯¹è±¡ã€‚ä¸ä¸Šé¢ä¸‰ç§æ–¹å¼ä¸åŒçš„ æ˜¯ï¼ŒHttpSessionæ”¾åœ¨æœåŠ¡å™¨çš„å†…å­˜ä¸­ï¼Œå› æ­¤ä¸è¦å°†è¿‡å¤§çš„å¯¹è±¡æ”¾åœ¨é‡Œé¢ï¼Œå³ä½¿ç›®å‰çš„Servletå®¹å™¨å¯ä»¥åœ¨å†…å­˜å°†æ»¡æ—¶å°†HttpSession ä¸­çš„å¯¹è±¡ç§»åˆ°å…¶ä»–å­˜å‚¨è®¾å¤‡ä¸­ï¼Œä½†æ˜¯è¿™æ ·åŠ¿å¿…å½±å“æ€§èƒ½ã€‚æ·»åŠ åˆ°HttpSessionä¸­çš„å€¼å¯ä»¥æ˜¯ä»»æ„Javaå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æœ€å¥½å®ç°äº† Serializableæ¥å£ï¼Œè¿™æ ·Servletå®¹å™¨åœ¨å¿…è¦çš„æ—¶å€™å¯ä»¥å°†å…¶åºåˆ—åŒ–åˆ°æ–‡ä»¶ä¸­ï¼Œå¦åˆ™åœ¨åºåˆ—åŒ–æ—¶å°±ä¼šå‡ºç°å¼‚å¸¸ã€‚</p>
</li>
</ol>
<h3 id="Cookieå’ŒSessionçš„çš„åŒºåˆ«"><a href="#Cookieå’ŒSessionçš„çš„åŒºåˆ«" class="headerlink" title="Cookieå’ŒSessionçš„çš„åŒºåˆ«"></a>Cookieå’ŒSessionçš„çš„åŒºåˆ«</h3><ol>
<li>Cookie å’Œ Sessionéƒ½æ˜¯ç”¨æ¥è·Ÿè¸ªæµè§ˆå™¨ç”¨æˆ·èº«ä»½çš„ä¼šè¯æ–¹å¼ï¼Œä½†æ˜¯ä¸¤è€…çš„åº”ç”¨åœºæ™¯ä¸å¤ªä¸€æ ·ã€‚</li>
<li>Cookie ä¸€èˆ¬ç”¨æ¥ä¿å­˜ç”¨æˆ·ä¿¡æ¯ æ¯”å¦‚<br>â‘ æˆ‘ä»¬åœ¨ Cookie ä¸­ä¿å­˜å·²ç»ç™»å½•è¿‡å¾—ç”¨æˆ·ä¿¡æ¯ï¼Œä¸‹æ¬¡è®¿é—®ç½‘ç«™çš„æ—¶å€™é¡µé¢å¯ä»¥è‡ªåŠ¨å¸®ä½ ç™»å½•çš„ä¸€äº›åŸºæœ¬ä¿¡æ¯ç»™å¡«äº†ï¼›<br>â‘¡ä¸€èˆ¬çš„ç½‘ç«™éƒ½ä¼šæœ‰ä¿æŒç™»å½•ä¹Ÿå°±æ˜¯è¯´ä¸‹æ¬¡ä½ å†è®¿é—®ç½‘ç«™çš„æ—¶å€™å°±ä¸éœ€è¦é‡æ–°ç™»å½•äº†ï¼Œè¿™æ˜¯å› ä¸ºç”¨æˆ·ç™»å½•çš„æ—¶å€™æˆ‘ä»¬å¯ä»¥å­˜æ”¾äº†ä¸€ä¸ª Token åœ¨ Cookie ä¸­ï¼Œä¸‹æ¬¡ç™»å½•çš„æ—¶å€™åªéœ€è¦æ ¹æ® Token å€¼æ¥æŸ¥æ‰¾ç”¨æˆ·å³å¯(ä¸ºäº†å®‰å…¨è€ƒè™‘ï¼Œé‡æ–°ç™»å½•ä¸€èˆ¬è¦å°† Token é‡å†™)ï¼›<br>â‘¢ç™»å½•ä¸€æ¬¡ç½‘ç«™åè®¿é—®ç½‘ç«™å…¶ä»–é¡µé¢ä¸éœ€è¦é‡æ–°ç™»å½•ã€‚Session çš„ä¸»è¦ä½œç”¨å°±æ˜¯é€šè¿‡æœåŠ¡ç«¯è®°å½•ç”¨æˆ·çš„çŠ¶æ€ã€‚ å…¸å‹çš„åœºæ™¯æ˜¯è´­ç‰©è½¦ï¼Œå½“ä½ è¦æ·»åŠ å•†å“åˆ°è´­ç‰©è½¦çš„æ—¶å€™ï¼Œç³»ç»Ÿä¸çŸ¥é“æ˜¯å“ªä¸ªç”¨æˆ·æ“ä½œçš„ï¼Œå› ä¸º HTTP åè®®æ˜¯æ— çŠ¶æ€çš„ã€‚æœåŠ¡ç«¯ç»™ç‰¹å®šçš„ç”¨æˆ·åˆ›å»ºç‰¹å®šçš„ Session ä¹‹åå°±å¯ä»¥æ ‡è¯†è¿™ä¸ªç”¨æˆ·å¹¶ä¸”è·Ÿè¸ªè¿™ä¸ªç”¨æˆ·äº†ã€‚</li>
<li>Cookie æ•°æ®ä¿å­˜åœ¨å®¢æˆ·ç«¯(æµè§ˆå™¨ç«¯)ï¼ŒSession æ•°æ®ä¿å­˜åœ¨æœåŠ¡å™¨ç«¯ã€‚</li>
<li>Cookie å­˜å‚¨åœ¨å®¢æˆ·ç«¯ä¸­ï¼Œè€ŒSessionå­˜å‚¨åœ¨æœåŠ¡å™¨ä¸Šï¼Œç›¸å¯¹æ¥è¯´ Session å®‰å…¨æ€§æ›´é«˜ã€‚å¦‚æœä½¿ç”¨ Cookie çš„ä¸€äº›æ•æ„Ÿä¿¡æ¯ä¸è¦å†™å…¥ Cookie ä¸­ï¼Œæœ€å¥½èƒ½å°† Cookie ä¿¡æ¯åŠ å¯†ç„¶åä½¿ç”¨åˆ°çš„æ—¶å€™å†å»æœåŠ¡å™¨ç«¯è§£å¯†ã€‚</li>
</ol>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Servlet</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringåŸºç¡€</title>
    <url>/2020/08/26/Spring%E5%9F%BA%E7%A1%80/</url>
    <content><![CDATA[<h3 id="ä»€ä¹ˆæ˜¯Springæ¡†æ¶ï¼ŸSpringæ¡†æ¶æœ‰å“ªäº›ä¸»è¦æ¨¡å—ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯Springæ¡†æ¶ï¼ŸSpringæ¡†æ¶æœ‰å“ªäº›ä¸»è¦æ¨¡å—ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯Springæ¡†æ¶ï¼ŸSpringæ¡†æ¶æœ‰å“ªäº›ä¸»è¦æ¨¡å—ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯Springæ¡†æ¶ï¼ŸSpringæ¡†æ¶æœ‰å“ªäº›ä¸»è¦æ¨¡å—ï¼Ÿ</h3><p>Springæ¡†æ¶æ˜¯ä¸€ä¸ªä¸ºJavaåº”ç”¨ç¨‹åºçš„å¼€å‘æä¾›äº†ç»¼åˆã€å¹¿æ³›çš„åŸºç¡€æ€§æ”¯æŒçš„Javaå¹³å°ã€‚Springå¸®åŠ©å¼€å‘è€…è§£å†³äº†å¼€å‘ä¸­åŸºç¡€æ€§çš„é—®é¢˜ï¼Œä½¿å¾—å¼€å‘äººå‘˜å¯ä»¥ä¸“æ³¨äºåº”ç”¨ç¨‹åºçš„å¼€å‘ã€‚Springæ¡†æ¶æœ¬èº«äº¦æ˜¯æŒ‰ç…§è®¾è®¡æ¨¡å¼ç²¾å¿ƒæ‰“é€ ï¼Œè¿™ä½¿å¾—æˆ‘ä»¬å¯ä»¥åœ¨å¼€å‘ç¯å¢ƒä¸­å®‰å¿ƒçš„é›†æˆSpringæ¡†æ¶ï¼Œä¸å¿…æ‹…å¿ƒSpringæ˜¯å¦‚ä½•åœ¨åå°è¿›è¡Œå·¥ä½œçš„ã€‚<br>Springæ¡†æ¶è‡³ä»Šå·²é›†æˆäº†20å¤šä¸ªæ¨¡å—ã€‚è¿™äº›æ¨¡å—ä¸»è¦è¢«åˆ†ä¸ºæ ¸å¿ƒå®¹å™¨ã€æ•°æ®è®¿é—®ã€é›†æˆã€webã€AOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰ã€å·¥å…·ã€æ¶ˆæ¯å’Œæµ‹è¯•æ¨¡å—ã€‚</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/26/Spring%E5%9F%BA%E7%A1%80/content1.png" class title="content1">

<h3 id="ä½¿ç”¨Springæ¡†æ¶èƒ½å¸¦æ¥çš„å“ªäº›å¥½å¤„ï¼Ÿ"><a href="#ä½¿ç”¨Springæ¡†æ¶èƒ½å¸¦æ¥çš„å“ªäº›å¥½å¤„ï¼Ÿ" class="headerlink" title="ä½¿ç”¨Springæ¡†æ¶èƒ½å¸¦æ¥çš„å“ªäº›å¥½å¤„ï¼Ÿ"></a>ä½¿ç”¨Springæ¡†æ¶èƒ½å¸¦æ¥çš„å“ªäº›å¥½å¤„ï¼Ÿ</h3><ul>
<li>Dependency Injection(DI)æ–¹æ³•ä½¿å¾—æ„é€ å™¨å’ŒJavaBean propertiesæ–‡ä»¶ä¸­çš„ä¾èµ–å…³ç³»ä¸€ç›®äº†ç„¶ã€‚  </li>
<li>ä¸EJBå®¹å™¨ç›¸æ¯”è¾ƒï¼ŒIoCå®¹å™¨æ›´åŠ è¶‹å‘äºè½»é‡çº§ã€‚è¿™æ ·ä¸€æ¥IoCå®¹å™¨åœ¨æœ‰é™çš„å†…å­˜å’ŒCPUèµ„æºçš„æƒ…å†µä¸‹è¿›è¡Œåº”ç”¨ç¨‹åºçš„å¼€å‘å’Œå‘å¸ƒå°±å˜å¾—ååˆ†æœ‰åˆ©ã€‚</li>
<li>Springå¹¶æ²¡æœ‰é—­é—¨é€ è½¦ï¼ŒSpringåˆ©ç”¨äº†å·²æœ‰çš„æŠ€æœ¯æ¯”å¦‚ORMæ¡†æ¶ã€loggingæ¡†æ¶ã€J2EEã€Quartzå’ŒJDK Timerï¼Œä»¥åŠå…¶ä»–è§†å›¾æŠ€æœ¯ã€‚</li>
<li>Springæ¡†æ¶æ˜¯æŒ‰ç…§æ¨¡å—çš„å½¢å¼æ¥ç»„ç»‡çš„ã€‚ç”±åŒ…å’Œç±»çš„ç¼–å·å°±å¯ä»¥çœ‹å‡ºå…¶æ‰€å±çš„æ¨¡å—ï¼Œå¼€å‘è€…ä»…ä»…éœ€è¦é€‰ç”¨ä»–ä»¬éœ€è¦çš„æ¨¡å—å³å¯ã€‚</li>
<li>è¦æµ‹è¯•ä¸€é¡¹Springå¼€å‘çš„åº”ç”¨ç¨‹åºååˆ†ç®€å•ï¼Œå› ä¸ºæµ‹è¯•ç›¸å…³çš„ç¯å¢ƒä»£ç éƒ½å·²ç»å›Šæ‹¬åœ¨æ¡†æ¶ä¸­äº†ã€‚æ›´åŠ ç®€å•çš„æ˜¯ï¼Œåˆ©ç”¨JavaBeanå½¢å¼çš„POJOç±»ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„åˆ©ç”¨ä¾èµ–æ³¨å…¥æ¥å†™å…¥æµ‹è¯•æ•°æ®ã€‚</li>
<li>Springçš„Webæ¡†æ¶äº¦æ˜¯ä¸€ä¸ªç²¾å¿ƒè®¾è®¡çš„Web MVCæ¡†æ¶ï¼Œä¸ºå¼€å‘è€…ä»¬åœ¨Webæ¡†æ¶çš„é€‰æ‹©ä¸Šæä¾›äº†ä¸€ä¸ªé™¤äº†ä¸»æµæ¡†æ¶æ¯”å¦‚Strutsã€è¿‡åº¦è®¾è®¡çš„ã€ä¸æµè¡Œwebæ¡†æ¶çš„ä»¥å¤–çš„æœ‰åŠ›é€‰é¡¹ã€‚</li>
<li>Springæä¾›äº†ä¸€ä¸ªä¾¿æ·çš„äº‹åŠ¡ç®¡ç†æ¥å£ï¼Œé€‚ç”¨äºå°å‹çš„æœ¬åœ°äº‹ç‰©å¤„ç†ï¼ˆæ¯”å¦‚åœ¨å•DBçš„ç¯å¢ƒä¸‹ï¼‰å’Œå¤æ‚çš„å…±åŒäº‹ç‰©å¤„ç†ï¼ˆæ¯”å¦‚åˆ©ç”¨JTAçš„å¤æ‚DBç¯å¢ƒï¼‰</li>
</ul>
<h3 id="ä»€ä¹ˆæ˜¯æ§åˆ¶åè½¬ï¼ˆIOCï¼‰ï¼Ÿä»€ä¹ˆæ˜¯ä¾èµ–æ³¨å…¥ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯æ§åˆ¶åè½¬ï¼ˆIOCï¼‰ï¼Ÿä»€ä¹ˆæ˜¯ä¾èµ–æ³¨å…¥ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯æ§åˆ¶åè½¬ï¼ˆIOCï¼‰ï¼Ÿä»€ä¹ˆæ˜¯ä¾èµ–æ³¨å…¥ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯æ§åˆ¶åè½¬ï¼ˆIOCï¼‰ï¼Ÿä»€ä¹ˆæ˜¯ä¾èµ–æ³¨å…¥ï¼Ÿ</h3><p>æ§åˆ¶åè½¬æ˜¯åº”ç”¨äºè½¯ä»¶å·¥ç¨‹é¢†åŸŸä¸­çš„ï¼Œåœ¨è¿è¡Œæ—¶è¢«è£…é…å™¨å¯¹è±¡æ¥ç»‘å®šè€¦åˆå¯¹è±¡çš„ä¸€ç§ç¼–ç¨‹æŠ€å·§ï¼Œå¯¹è±¡ä¹‹é—´è€¦åˆå…³ç³»åœ¨ç¼–è¯‘æ—¶é€šå¸¸æ˜¯æœªçŸ¥çš„ã€‚åœ¨ä¼ ç»Ÿçš„ç¼–ç¨‹æ–¹å¼ä¸­ï¼Œä¸šåŠ¡é€»è¾‘çš„æµç¨‹æ˜¯ç”±åº”ç”¨ç¨‹åºä¸­çš„æ—©å·²è¢«è®¾å®šå¥½å…³è”å…³ç³»çš„å¯¹è±¡æ¥å†³å®šçš„ï¼Œè¯¥å¯¹è±¡å…³ç³»å›¾ç”±è£…é…å™¨è´Ÿè´£å®ä¾‹åŒ–ï¼Œè¿™ç§å®ç°æ–¹å¼è¿˜å¯ä»¥å°†å¯¹è±¡ä¹‹é—´çš„å…³è”å…³ç³»çš„å®šä¹‰æŠ½è±¡åŒ–ã€‚è€Œç»‘å®šçš„è¿‡ç¨‹æ˜¯é€šè¿‡â€œä¾èµ–æ³¨å…¥â€å®ç°çš„ã€‚<br>æ§åˆ¶åè½¬æ˜¯ä¸€ç§ä»¥ç»™äºˆåº”ç”¨ç¨‹åºä¸­ç›®æ ‡ç»„ä»¶æ›´å¤šæ§åˆ¶ä¸ºç›®çš„è®¾è®¡èŒƒå¼ï¼Œå¹¶åœ¨æˆ‘ä»¬çš„å®é™…å·¥ä½œä¸­èµ·åˆ°äº†æœ‰æ•ˆåœ°ä½œç”¨ã€‚<br>ä¾èµ–æ³¨å…¥æ˜¯ç¼–è¯‘é˜¶æ®µå°šæœªçŸ¥æ‰€éœ€çš„åŠŸèƒ½æ˜¯æ¥è‡ªå“ªä¸ªçš„ç±»çš„æƒ…å†µä¸‹ï¼Œå°†å…¶ä»–å¯¹è±¡æ‰€ä¾èµ–çš„åŠŸèƒ½å¯¹è±¡å®ä¾‹åŒ–çš„æ¨¡å¼ã€‚è¿™å°±éœ€è¦ä¸€ç§æœºåˆ¶ç”¨æ¥æ¿€æ´»ç›¸åº”çš„ç»„ä»¶ä»¥æä¾›ç‰¹å®šçš„åŠŸèƒ½ï¼Œæ‰€ä»¥ä¾èµ–æ³¨å…¥æ˜¯æ§åˆ¶åè½¬çš„åŸºç¡€ã€‚å¦åˆ™å¦‚æœåœ¨ç»„ä»¶ä¸å—æ¡†æ¶æ§åˆ¶çš„æƒ…å†µä¸‹ï¼Œæ¡†æ¶åˆæ€ä¹ˆçŸ¥é“è¦åˆ›å»ºå“ªä¸ªç»„ä»¶ï¼Ÿ<br>åœ¨Javaä¾èµ–æ³¨å…¥æœ‰ä»¥ä¸‹ä¸‰ç§å®ç°æ–¹å¼ï¼š</p>
<ol>
<li>æ„é€ å™¨æ³¨å…¥</li>
<li>Setteræ–¹æ³•æ³¨å…¥</li>
<li>æ¥å£æ³¨å…¥</li>
</ol>
<h3 id="è§£é‡ŠSpringæ¡†æ¶ä¸­çš„IoCï¼Ÿ"><a href="#è§£é‡ŠSpringæ¡†æ¶ä¸­çš„IoCï¼Ÿ" class="headerlink" title="è§£é‡ŠSpringæ¡†æ¶ä¸­çš„IoCï¼Ÿ"></a>è§£é‡ŠSpringæ¡†æ¶ä¸­çš„IoCï¼Ÿ</h3><p>Springä¸­çš„org.springframework.beansåŒ…å’Œorg.springframework.contextåŒ…æ„æˆäº†Springæ¡†æ¶IoCå®¹å™¨çš„åŸºç¡€ã€‚<br>BeanFactoryæ¥å£æä¾›äº†ä¸€ä¸ªå…ˆè¿›çš„é…ç½®æœºåˆ¶ï¼Œä½¿å¾—ä»»ä½•ç±»å‹çš„å¯¹è±¡çš„é…ç½®æˆä¸ºå¯èƒ½ã€‚ApplicationContextæ¥å£å¯¹BeanFactoryï¼ˆæ˜¯ä¸€ä¸ªå­æ¥å£ï¼‰è¿›è¡Œäº†æ‰©å±•ï¼Œåœ¨BeanFactoryçš„åŸºç¡€ä¸Šæ·»åŠ äº†å…¶ä»–åŠŸèƒ½ï¼Œæ¯”å¦‚ä¸Springçš„AOPæ›´å®¹æ˜“ç»§æ‰¿ï¼Œä¹Ÿæä¾›äº†å¤„ç†message resourceçš„æœºåˆ¶ï¼ˆç”¨äºå›½é™…åŒ–ï¼‰ã€äº‹ä»¶ä¼ æ’­ä»¥åŠåº”ç”¨å±‚çš„ç‰¹åˆ«é…ç½®ï¼Œæ¯”å¦‚é’ˆå¯¹Webåº”ç”¨çš„WebApplicationContextã€‚<br>Org.springframework.beans.factory.BeanFactoryæ˜¯Spring IoCå®¹å™¨çš„å…·ä½“å®ç°ï¼Œç”¨æ¥åŒ…è£…å’Œç®¡ç†å‰é¢æåˆ°çš„å„ç§beanã€‚BeanFactoryæ¥å£æ˜¯Spring IoCå®¹å™¨çš„æ ¸å¿ƒæ¥å£ã€‚</p>
<h3 id="BeanFactoryå’ŒApplicationContextæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#BeanFactoryå’ŒApplicationContextæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="BeanFactoryå’ŒApplicationContextæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>BeanFactoryå’ŒApplicationContextæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p>BeanFactoryå¯ä»¥ç†è§£ä¸ºå«æœ‰beané›†åˆçš„å·¥å‚ç±»ã€‚BeanFactoryåŒ…å«äº†ç§beançš„å®šä¹‰ï¼Œä»¥ä¾¿åœ¨æ¥å—å®¢æˆ·ç«¯è¯·æ±‚æ—¶å°†å¯¹åº”çš„beanå®ä¾‹åŒ–ã€‚<br>BeanFactoryè¿˜èƒ½å†å®ä¾‹åŒ–å¯¹è±¡æ—¶ç”Ÿæˆåä½œç±»ä¹‹é—´çš„å…³ç³»ã€‚æ­¤ä¸¾å°†beanè‡ªèº«ä¸beanå®¢æˆ·ç«¯çš„é…ç½®ä¸­è§£æ”¾å‡ºæ¥ã€‚BeanFactoryè¿˜åŒ…å«äº†beanç”Ÿå‘½å‘¨æœŸçš„æ§åˆ¶ï¼Œè°ƒç”¨å®¢æˆ·ç«¯çš„åˆå§‹åŒ–æ–¹æ³•ï¼ˆinitialization methodsï¼‰å’Œé”€æ¯æ–¹æ³•ï¼ˆdestruction methodsï¼‰ã€‚<br>ä»è¡¨é¢ä¸Šçœ‹ï¼Œapplication contextå¦‚åŒbean factoryä¸€æ ·å…·æœ‰beanå®šä¹‰ã€beanå…³è”å…³ç³»çš„è®¾ç½®ï¼Œæ ¹æ®è¯·æ±‚åˆ†å‘beançš„åŠŸèƒ½ã€‚ä½†application contextåœ¨æ­¤åŸºç¡€ä¸Šè¿˜æä¾›äº†å…¶ä»–çš„åŠŸèƒ½ã€‚</p>
<ol>
<li>æä¾›äº†æ”¯æŒå›½é™…åŒ–çš„æ–‡æœ¬æ¶ˆæ¯</li>
<li>ç»Ÿä¸€çš„èµ„æºæ–‡ä»¶è¯»å–æ–¹å¼</li>
<li>å·²åœ¨ç›‘å¬å™¨ä¸­æ³¨å†Œçš„beançš„äº‹ä»¶</li>
</ol>
<p>ä»¥ä¸‹æ˜¯ä¸‰ç§è¾ƒä¸ºå¸¸è§çš„ApplicationContextå®ç°æ–¹å¼ï¼š<br>1ã€ClassPathXmlApplicationContextï¼šä»classpathçš„XMLé…ç½®æ–‡ä»¶ä¸­è¯»å–ä¸Šä¸‹æ–‡ï¼Œå¹¶ç”Ÿæˆä¸Šä¸‹æ–‡å®šä¹‰ã€‚åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡ä»ç¨‹åºç¯å¢ƒå˜é‡ä¸­å–å¾—ã€‚</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/26/Spring%E5%9F%BA%E7%A1%80/content2.png" class title="content2">
<p>2ã€FileSystemXmlApplicationContextï¼šç”±æ–‡ä»¶ç³»ç»Ÿä¸­çš„XMLé…ç½®æ–‡ä»¶è¯»å–ä¸Šä¸‹æ–‡</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/26/Spring%E5%9F%BA%E7%A1%80/content3.png" class title="content3">
<p>3ã€XmlWebApplicationContextï¼šç”±Webåº”ç”¨çš„XMLæ–‡ä»¶è¯»å–ä¸Šä¸‹æ–‡</p>
<h3 id="Springæœ‰å‡ ç§é…ç½®æ–¹å¼"><a href="#Springæœ‰å‡ ç§é…ç½®æ–¹å¼" class="headerlink" title="Springæœ‰å‡ ç§é…ç½®æ–¹å¼"></a>Springæœ‰å‡ ç§é…ç½®æ–¹å¼</h3><p>å°†Springé…ç½®åˆ°åº”ç”¨å¼€å‘ä¸­æœ‰ä»¥ä¸‹ä¸‰ç§æ–¹å¼ï¼š</p>
<ol>
<li>åŸºäºXMLçš„é…ç½®</li>
<li>åŸºäºæ³¨è§£çš„é…ç½®</li>
<li>åŸºäºJavaçš„é…ç½®</li>
</ol>
<h3 id="å¦‚ä½•ç”¨åŸºäºXMLé…ç½®çš„æ–¹å¼é…ç½®Springï¼Ÿ"><a href="#å¦‚ä½•ç”¨åŸºäºXMLé…ç½®çš„æ–¹å¼é…ç½®Springï¼Ÿ" class="headerlink" title="å¦‚ä½•ç”¨åŸºäºXMLé…ç½®çš„æ–¹å¼é…ç½®Springï¼Ÿ"></a>å¦‚ä½•ç”¨åŸºäºXMLé…ç½®çš„æ–¹å¼é…ç½®Springï¼Ÿ</h3><p>åœ¨Springæ¡†æ¶ä¸­ï¼Œä¾èµ–å’ŒæœåŠ¡éœ€è¦åœ¨ä¸“é—¨çš„é…ç½®æ–‡ä»¶æ¥å®ç°ï¼Œæˆ‘å¸¸ç”¨çš„XMLæ ¼å¼çš„é…ç½®æ–‡ä»¶ã€‚è¿™äº›é…ç½®æ–‡ä»¶çš„æ ¼å¼é€šå¸¸ç”¨<beans>å¼€å¤´ï¼Œç„¶åä¸€ç³»åˆ—çš„beanå®šä¹‰å’Œä¸“é—¨çš„åº”ç”¨é…ç½®é€‰é¡¹ç»„æˆã€‚<br>SpringXMLé…ç½®çš„ä¸»è¦ç›®çš„æ—¶å€™æ˜¯ä½¿æ‰€æœ‰çš„Springç»„ä»¶éƒ½å¯ä»¥ç”¨xmlæ–‡ä»¶çš„å½¢å¼æ¥è¿›è¡Œé…ç½®ã€‚è¿™æ„å‘³ç€ä¸ä¼šå‡ºç°å…¶ä»–çš„Springé…ç½®ç±»å‹ï¼ˆæ¯”å¦‚å£°æ˜çš„æ–¹å¼æˆ–åŸºäºJava Classçš„é…ç½®æ–¹å¼ï¼‰<br>Springçš„XMLé…ç½®æ–¹å¼æ˜¯ä½¿ç”¨è¢«Springå‘½åç©ºé—´çš„æ‰€æ”¯æŒçš„ä¸€ç³»åˆ—çš„XMLæ ‡ç­¾æ¥å®ç°çš„ã€‚Springæœ‰ä»¥ä¸‹ä¸»è¦çš„å‘½åç©ºé—´ï¼šcontextã€beansã€jdbcã€txã€aopã€mvcå’Œasoã€‚</beans></p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/26/Spring%E5%9F%BA%E7%A1%80/content4.png" class title="content4">
<p>ä¸‹é¢è¿™ä¸ªweb.xmlä»…ä»…é…ç½®äº†DispatcherServletï¼Œè¿™ä»¶æœ€ç®€å•çš„é…ç½®ä¾¿èƒ½æ»¡è¶³åº”ç”¨ç¨‹åºé…ç½®è¿è¡Œæ—¶ç»„ä»¶çš„éœ€æ±‚ã€‚</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/26/Spring%E5%9F%BA%E7%A1%80/content5.png" class title="content5">

<h3 id="å¦‚ä½•ç”¨åŸºäºJavaé…ç½®çš„æ–¹å¼é…ç½®Springï¼Ÿ"><a href="#å¦‚ä½•ç”¨åŸºäºJavaé…ç½®çš„æ–¹å¼é…ç½®Springï¼Ÿ" class="headerlink" title="å¦‚ä½•ç”¨åŸºäºJavaé…ç½®çš„æ–¹å¼é…ç½®Springï¼Ÿ"></a>å¦‚ä½•ç”¨åŸºäºJavaé…ç½®çš„æ–¹å¼é…ç½®Springï¼Ÿ</h3><p>Springå¯¹Javaé…ç½®çš„æ”¯æŒæ˜¯ç”±@Configurationæ³¨è§£å’Œ@Beanæ³¨è§£æ¥å®ç°çš„ã€‚ç”±@Beanæ³¨è§£çš„æ–¹æ³•å°†ä¼šå®ä¾‹åŒ–ã€é…ç½®å’Œåˆå§‹åŒ–ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å°†ç”±Springçš„IoCå®¹å™¨æ¥ç®¡ç†ã€‚@Beanå£°æ˜æ‰€èµ·åˆ°çš„ä½œç”¨ä¸<bean> å…ƒç´ ç±»ä¼¼ã€‚è¢«@Configurationæ‰€æ³¨è§£çš„ç±»åˆ™è¡¨ç¤ºè¿™ä¸ªç±»çš„ä¸»è¦ç›®çš„æ˜¯ä½œä¸ºbeanå®šä¹‰çš„èµ„æºã€‚è¢«@Configurationå£°æ˜çš„ç±»å¯ä»¥é€šè¿‡åœ¨åŒä¸€ä¸ªç±»çš„å†…éƒ¨è°ƒç”¨@beanæ–¹æ³•æ¥è®¾ç½®åµŒå…¥beançš„ä¾èµ–å…³ç³»ã€‚<br>æœ€ç®€å•çš„@Configuration å£°æ˜ç±»è¯·å‚è€ƒä¸‹é¢çš„ä»£ç ï¼š</bean></p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/26/Spring%E5%9F%BA%E7%A1%80/content6.png" class title="content6">
<p>å¯¹äºä¸Šé¢çš„@Beansé…ç½®æ–‡ä»¶ç›¸åŒçš„XMLé…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/26/Spring%E5%9F%BA%E7%A1%80/content7.png" class title="content7">
<p>ä¸Šè¿°é…ç½®æ–¹å¼çš„å®ä¾‹åŒ–æ–¹å¼å¦‚ä¸‹ï¼šåˆ©ç”¨AnnotationConfigApplicationContext ç±»è¿›è¡Œå®ä¾‹åŒ–</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/26/Spring%E5%9F%BA%E7%A1%80/content8.png" class title="content8">
<p>è¦ä½¿ç”¨ç»„ä»¶ç»„å»ºæ‰«æï¼Œä»…éœ€ç”¨@Configurationè¿›è¡Œæ³¨è§£å³å¯ï¼š</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/26/Spring%E5%9F%BA%E7%A1%80/content9.png" class title="content9">
<p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œcom.acmeåŒ…é¦–å…ˆä¼šè¢«æ‰«åˆ°ï¼Œç„¶åå†å®¹å™¨å†…æŸ¥æ‰¾è¢«@Component å£°æ˜çš„ç±»ï¼Œæ‰¾åˆ°åå°†è¿™äº›ç±»æŒ‰ç…§Sring beanå®šä¹‰è¿›è¡Œæ³¨å†Œã€‚<br>å¦‚æœä½ è¦åœ¨ä½ çš„webåº”ç”¨å¼€å‘ä¸­é€‰ç”¨ä¸Šè¿°çš„é…ç½®çš„æ–¹å¼çš„è¯ï¼Œéœ€è¦ç”¨AnnotationConfigWebApplicationContext ç±»æ¥è¯»å–é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥ç”¨æ¥é…ç½®Springçš„Servletç›‘å¬å™¨ContrextLoaderListeneræˆ–è€…Spring MVCçš„DispatcherServletã€‚</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/26/Spring%E5%9F%BA%E7%A1%80/content10.png" class title="content10">
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/26/Spring%E5%9F%BA%E7%A1%80/content11.png" class title="content11">

<h3 id="æ€æ ·ç”¨æ³¨è§£çš„æ–¹å¼é…ç½®Springï¼Ÿ"><a href="#æ€æ ·ç”¨æ³¨è§£çš„æ–¹å¼é…ç½®Springï¼Ÿ" class="headerlink" title="æ€æ ·ç”¨æ³¨è§£çš„æ–¹å¼é…ç½®Springï¼Ÿ"></a>æ€æ ·ç”¨æ³¨è§£çš„æ–¹å¼é…ç½®Springï¼Ÿ</h3><p>Springåœ¨2.5ç‰ˆæœ¬ä»¥åå¼€å§‹æ”¯æŒç”¨æ³¨è§£çš„æ–¹å¼æ¥é…ç½®ä¾èµ–æ³¨å…¥ã€‚å¯ä»¥ç”¨æ³¨è§£çš„æ–¹å¼æ¥æ›¿ä»£XMLæ–¹å¼çš„beanæè¿°ï¼Œå¯ä»¥å°†beanæè¿°è½¬ç§»åˆ°ç»„ä»¶ç±»çš„å†…éƒ¨ï¼Œåªéœ€è¦åœ¨ç›¸å…³ç±»ä¸Šã€æ–¹æ³•ä¸Šæˆ–è€…å­—æ®µå£°æ˜ä¸Šä½¿ç”¨æ³¨è§£å³å¯ã€‚æ³¨è§£æ³¨å…¥å°†ä¼šè¢«å®¹å™¨åœ¨XMLæ³¨å…¥ä¹‹å‰è¢«å¤„ç†ï¼Œæ‰€ä»¥åè€…ä¼šè¦†ç›–æ‰å‰è€…å¯¹äºåŒä¸€ä¸ªå±æ€§çš„å¤„ç†ç»“æœã€‚<br>æ³¨è§£è£…é…åœ¨Springä¸­æ˜¯é»˜è®¤å…³é—­çš„ã€‚æ‰€ä»¥éœ€è¦åœ¨Springæ–‡ä»¶ä¸­é…ç½®ä¸€ä¸‹æ‰èƒ½ä½¿ç”¨åŸºäºæ³¨è§£çš„è£…é…æ¨¡å¼ã€‚å¦‚æœä½ æƒ³è¦åœ¨ä½ çš„åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨å…³äºæ³¨è§£çš„æ–¹æ³•çš„è¯ï¼Œè¯·å‚è€ƒå¦‚ä¸‹çš„é…ç½®</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/26/Spring%E5%9F%BA%E7%A1%80/content12.png" class title="content12">
<p>åœ¨<code> &lt;context:annotation-config/&gt;</code>æ ‡ç­¾é…ç½®å®Œæˆä»¥åï¼Œå°±å¯ä»¥ç”¨æ³¨è§£çš„æ–¹å¼åœ¨Springä¸­å‘å±æ€§ã€æ–¹æ³•å’Œæ„é€ æ–¹æ³•ä¸­è‡ªåŠ¨è£…é…å˜é‡ã€‚<br>ä¸‹é¢æ˜¯å‡ ç§æ¯”è¾ƒé‡è¦çš„æ³¨è§£ç±»å‹ï¼š</p>
<ul>
<li>@Requiredï¼šè¯¥æ³¨è§£åº”ç”¨äºè®¾å€¼æ–¹æ³•ã€‚  </li>
<li>@Autowiredï¼šè¯¥æ³¨è§£åº”ç”¨äºæœ‰å€¼è®¾å€¼æ–¹æ³•ã€éè®¾å€¼æ–¹æ³•ã€æ„é€ æ–¹æ³•å’Œå˜é‡ã€‚  </li>
<li>@Qualifierï¼šè¯¥æ³¨è§£å’Œ@Autowiredæ³¨è§£æ­é…ä½¿ç”¨ï¼Œç”¨äºæ¶ˆé™¤ç‰¹å®šbeanè‡ªåŠ¨è£…é…çš„æ­§ä¹‰ã€‚</li>
<li>JSR-250 Annotationsï¼šSpringæ”¯æŒåŸºäºJSR-250 æ³¨è§£çš„ä»¥ä¸‹æ³¨è§£ï¼Œ@Resourceã€@PostConstruct å’Œ@PreDestroyã€‚</li>
</ul>
<h3 id="è¯·è§£é‡ŠSpring-Beançš„ç”Ÿå‘½å‘¨æœŸï¼Ÿ"><a href="#è¯·è§£é‡ŠSpring-Beançš„ç”Ÿå‘½å‘¨æœŸï¼Ÿ" class="headerlink" title="è¯·è§£é‡ŠSpring Beançš„ç”Ÿå‘½å‘¨æœŸï¼Ÿ"></a>è¯·è§£é‡ŠSpring Beançš„ç”Ÿå‘½å‘¨æœŸï¼Ÿ</h3><p>Spring Beançš„ç”Ÿå‘½å‘¨æœŸç®€å•æ˜“æ‡‚ã€‚åœ¨ä¸€ä¸ªbeanå®ä¾‹è¢«åˆå§‹åŒ–æ—¶ï¼Œéœ€è¦æ‰§è¡Œä¸€ç³»åˆ—çš„åˆå§‹åŒ–æ“ä½œä»¥è¾¾åˆ°å¯ç”¨çš„çŠ¶æ€ã€‚åŒæ ·çš„ï¼Œå½“ä¸€ä¸ªbeanä¸åœ¨è¢«è°ƒç”¨æ—¶éœ€è¦è¿›è¡Œç›¸å…³çš„ææ„æ“ä½œï¼Œå¹¶ä»beanå®¹å™¨ä¸­ç§»é™¤ã€‚<br>Spring bean factory è´Ÿè´£ç®¡ç†åœ¨springå®¹å™¨ä¸­è¢«åˆ›å»ºçš„beançš„ç”Ÿå‘½å‘¨æœŸã€‚Beançš„ç”Ÿå‘½å‘¨æœŸç”±ä¸¤ç»„å›è°ƒï¼ˆcall backï¼‰æ–¹æ³•ç»„æˆã€‚</p>
<ul>
<li>åˆå§‹åŒ–ä¹‹åè°ƒç”¨çš„å›è°ƒæ–¹æ³•ã€‚  </li>
<li>é”€æ¯ä¹‹å‰è°ƒç”¨çš„å›è°ƒæ–¹æ³•ã€‚<br>Springæ¡†æ¶æä¾›äº†ä»¥ä¸‹å››ç§æ–¹å¼æ¥ç®¡ç†beançš„ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ï¼š  </li>
<li>InitializingBeanå’ŒDisposableBeanå›è°ƒæ¥å£</li>
<li>é’ˆå¯¹ç‰¹æ®Šè¡Œä¸ºçš„å…¶ä»–Awareæ¥å£  </li>
<li>Beané…ç½®æ–‡ä»¶ä¸­çš„Custom init()æ–¹æ³•å’Œdestroy()æ–¹æ³•  </li>
<li>@PostConstructå’Œ@PreDestroyæ³¨è§£æ–¹å¼<br>ä½¿ç”¨customInit()å’Œ customDestroy()æ–¹æ³•ç®¡ç†beanç”Ÿå‘½å‘¨æœŸçš„ä»£ç æ ·ä¾‹å¦‚ä¸‹ï¼š<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/26/Spring%E5%9F%BA%E7%A1%80/content36.png" class title="content36"></li>
</ul>
<h3 id="Spring-Beançš„ä½œç”¨åŸŸä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#Spring-Beançš„ä½œç”¨åŸŸä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="Spring Beançš„ä½œç”¨åŸŸä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>Spring Beançš„ä½œç”¨åŸŸä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p>Springå®¹å™¨ä¸­çš„beanå¯ä»¥åˆ†ä¸º5ä¸ªèŒƒå›´ã€‚æ‰€æœ‰èŒƒå›´çš„åç§°éƒ½æ˜¯è‡ªè¯´æ˜çš„ï¼Œä½†æ˜¯ä¸ºäº†é¿å…æ··æ·†ï¼Œè¿˜æ˜¯è®©æˆ‘ä»¬æ¥è§£é‡Šä¸€ä¸‹ï¼š</p>
<ul>
<li>singletonï¼šè¿™ç§beanèŒƒå›´æ˜¯é»˜è®¤çš„ï¼Œè¿™ç§èŒƒå›´ç¡®ä¿ä¸ç®¡æ¥å—åˆ°å¤šå°‘ä¸ªè¯·æ±‚ï¼Œæ¯ä¸ªå®¹å™¨ä¸­åªæœ‰ä¸€ä¸ªbeançš„å®ä¾‹ï¼Œå•ä¾‹çš„æ¨¡å¼ç”±bean factoryè‡ªèº«æ¥ç»´æŠ¤ã€‚</li>
<li>prototypeï¼šåŸå½¢èŒƒå›´ä¸å•ä¾‹èŒƒå›´ç›¸åï¼Œä¸ºæ¯ä¸€ä¸ªbeanè¯·æ±‚æä¾›ä¸€ä¸ªå®ä¾‹ã€‚</li>
<li>requestï¼šåœ¨è¯·æ±‚beanèŒƒå›´å†…ä¼šæ¯ä¸€ä¸ªæ¥è‡ªå®¢æˆ·ç«¯çš„ç½‘ç»œè¯·æ±‚åˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼Œåœ¨è¯·æ±‚å®Œæˆä»¥åï¼Œbeanä¼šå¤±æ•ˆå¹¶è¢«åƒåœ¾å›æ”¶å™¨å›æ”¶ã€‚</li>
<li>Sessionï¼šä¸è¯·æ±‚èŒƒå›´ç±»ä¼¼ï¼Œç¡®ä¿æ¯ä¸ªsessionä¸­æœ‰ä¸€ä¸ªbeançš„å®ä¾‹ï¼Œåœ¨sessionè¿‡æœŸåï¼Œbeanä¼šéšä¹‹å¤±æ•ˆã€‚</li>
<li>global-sessionï¼šglobal-sessionå’ŒPortletåº”ç”¨ç›¸å…³ã€‚å½“ä½ çš„åº”ç”¨éƒ¨ç½²åœ¨Portletå®¹å™¨ä¸­å·¥ä½œæ—¶ï¼Œå®ƒåŒ…å«å¾ˆå¤športletã€‚å¦‚æœä½ æƒ³è¦å£°æ˜è®©æ‰€æœ‰çš„portletå…±ç”¨å…¨å±€çš„å­˜å‚¨å˜é‡çš„è¯ï¼Œé‚£ä¹ˆè¿™å…¨å±€å˜é‡éœ€è¦å­˜å‚¨åœ¨global-sessionä¸­ã€‚<br>å…¨å±€ä½œç”¨åŸŸä¸Servletä¸­çš„sessionä½œç”¨åŸŸæ•ˆæœç›¸åŒã€‚</li>
</ul>
<h3 id="ä»€ä¹ˆæ˜¯Spring-inner-beansï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯Spring-inner-beansï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯Spring inner beansï¼Ÿ"></a>ä»€ä¹ˆæ˜¯Spring inner beansï¼Ÿ</h3><p>åœ¨Springæ¡†æ¶ä¸­ï¼Œæ— è®ºä½•æ—¶beanè¢«ä½¿ç”¨æ—¶ï¼Œå½“ä»…è¢«è°ƒç”¨äº†ä¸€ä¸ªå±æ€§ã€‚ä¸€ä¸ªæ˜æ™ºçš„åšæ³•æ˜¯å°†è¿™ä¸ªbeanå£°æ˜ä¸ºå†…éƒ¨beanã€‚å†…éƒ¨beanå¯ä»¥ç”¨setteræ³¨å…¥â€œå±æ€§â€å’Œæ„é€ æ–¹æ³•æ³¨å…¥â€œæ„é€ å‚æ•°â€çš„æ–¹å¼æ¥å®ç°ã€‚<br>æ¯”å¦‚ï¼Œåœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­ï¼Œä¸€ä¸ªCustomerç±»å¼•ç”¨äº†ä¸€ä¸ªPersonç±»ï¼Œæˆ‘ä»¬çš„è¦åšçš„æ˜¯åˆ›å»ºä¸€ä¸ªPersonçš„å®ä¾‹ï¼Œç„¶ååœ¨Customerå†…éƒ¨ä½¿ç”¨ã€‚</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/26/Spring%E5%9F%BA%E7%A1%80/content13.png" class title="content13">
<p>å†…éƒ¨beançš„å£°æ˜æ–¹å¼å¦‚ä¸‹ï¼š</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/26/Spring%E5%9F%BA%E7%A1%80/content14.png" class title="content14">

<h3 id="Springæ¡†æ¶ä¸­çš„å•ä¾‹Beansæ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿ"><a href="#Springæ¡†æ¶ä¸­çš„å•ä¾‹Beansæ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿ" class="headerlink" title="Springæ¡†æ¶ä¸­çš„å•ä¾‹Beansæ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿ"></a>Springæ¡†æ¶ä¸­çš„å•ä¾‹Beansæ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿ</h3><p>Springæ¡†æ¶å¹¶æ²¡æœ‰å¯¹å•ä¾‹beanè¿›è¡Œä»»ä½•å¤šçº¿ç¨‹çš„å°è£…å¤„ç†ã€‚å…³äºå•ä¾‹beançš„çº¿ç¨‹å®‰å…¨å’Œå¹¶å‘é—®é¢˜éœ€è¦å¼€å‘è€…è‡ªè¡Œå»æå®šã€‚ä½†å®é™…ä¸Šï¼Œå¤§éƒ¨åˆ†çš„Spring beanå¹¶æ²¡æœ‰å¯å˜çš„çŠ¶æ€(æ¯”å¦‚Serviewç±»å’ŒDAOç±»)ï¼Œæ‰€ä»¥åœ¨æŸç§ç¨‹åº¦ä¸Šè¯´Springçš„å•ä¾‹beanæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚å¦‚æœä½ çš„beanæœ‰å¤šç§çŠ¶æ€çš„è¯ï¼ˆæ¯”å¦‚ View Model å¯¹è±¡ï¼‰ï¼Œå°±éœ€è¦è‡ªè¡Œä¿è¯çº¿ç¨‹å®‰å…¨ã€‚<br>æœ€æµ…æ˜¾çš„è§£å†³åŠæ³•å°±æ˜¯å°†å¤šæ€beançš„ä½œç”¨åŸŸç”±â€œsingletonâ€å˜æ›´ä¸ºâ€œprototypeâ€ã€‚</p>
<h3 id="è¯·ä¸¾ä¾‹è¯´æ˜å¦‚ä½•åœ¨Springä¸­æ³¨å…¥ä¸€ä¸ªJava-Collectionï¼Ÿ"><a href="#è¯·ä¸¾ä¾‹è¯´æ˜å¦‚ä½•åœ¨Springä¸­æ³¨å…¥ä¸€ä¸ªJava-Collectionï¼Ÿ" class="headerlink" title="è¯·ä¸¾ä¾‹è¯´æ˜å¦‚ä½•åœ¨Springä¸­æ³¨å…¥ä¸€ä¸ªJava Collectionï¼Ÿ"></a>è¯·ä¸¾ä¾‹è¯´æ˜å¦‚ä½•åœ¨Springä¸­æ³¨å…¥ä¸€ä¸ªJava Collectionï¼Ÿ</h3><p>Springæä¾›äº†ä»¥ä¸‹å››ç§é›†åˆç±»çš„é…ç½®å…ƒç´ ï¼š</p>
<ul>
<li><list> : è¯¥æ ‡ç­¾ç”¨æ¥è£…é…å¯é‡å¤çš„listå€¼ã€‚</list></li>
<li><set> : è¯¥æ ‡ç­¾ç”¨æ¥è£…é…æ²¡æœ‰é‡å¤çš„setå€¼ã€‚</set></li>
<li><map>: è¯¥æ ‡ç­¾å¯ç”¨æ¥æ³¨å…¥é”®å’Œå€¼å¯ä»¥ä¸ºä»»ä½•ç±»å‹çš„é”®å€¼å¯¹ã€‚</map></li>
<li><props> : è¯¥æ ‡ç­¾æ”¯æŒæ³¨å…¥é”®å’Œå€¼éƒ½æ˜¯å­—ç¬¦ä¸²ç±»å‹çš„é”®å€¼å¯¹ã€‚<br>ä¸‹é¢çœ‹ä¸€ä¸‹å…·ä½“çš„ä¾‹å­ï¼š<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/26/Spring%E5%9F%BA%E7%A1%80/content15.png" class title="content15">
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/26/Spring%E5%9F%BA%E7%A1%80/content16.png" class title="content16"></props></li>
</ul>
<h3 id="å¦‚ä½•å‘Spring-Beanä¸­æ³¨å…¥ä¸€ä¸ªJava-util-Propertiesï¼Ÿ"><a href="#å¦‚ä½•å‘Spring-Beanä¸­æ³¨å…¥ä¸€ä¸ªJava-util-Propertiesï¼Ÿ" class="headerlink" title="å¦‚ä½•å‘Spring Beanä¸­æ³¨å…¥ä¸€ä¸ªJava.util.Propertiesï¼Ÿ"></a>å¦‚ä½•å‘Spring Beanä¸­æ³¨å…¥ä¸€ä¸ªJava.util.Propertiesï¼Ÿ</h3><p>ç¬¬ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨å¦‚ä¸‹é¢ä»£ç æ‰€ç¤ºçš„<props> æ ‡ç­¾ï¼š</props></p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/26/Spring%E5%9F%BA%E7%A1%80/content17.png" class title="content17">
<p>ä¹Ÿå¯ç”¨â€util:â€å‘½åç©ºé—´æ¥ä»propertiesæ–‡ä»¶ä¸­åˆ›å»ºå‡ºä¸€ä¸ªpropertiesbeanï¼Œç„¶ååˆ©ç”¨setteræ–¹æ³•æ³¨å…¥beançš„å¼•ç”¨ã€‚</p>
<h3 id="è¯·è§£é‡ŠSpring-Beançš„è‡ªåŠ¨è£…é…ï¼Ÿ"><a href="#è¯·è§£é‡ŠSpring-Beançš„è‡ªåŠ¨è£…é…ï¼Ÿ" class="headerlink" title="è¯·è§£é‡ŠSpring Beançš„è‡ªåŠ¨è£…é…ï¼Ÿ"></a>è¯·è§£é‡ŠSpring Beançš„è‡ªåŠ¨è£…é…ï¼Ÿ</h3><p>åœ¨Springæ¡†æ¶ä¸­ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­è®¾å®šbeançš„ä¾èµ–å…³ç³»æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æœºåˆ¶ï¼ŒSpringå®¹å™¨è¿˜å¯ä»¥è‡ªåŠ¨è£…é…åˆä½œå…³ç³»beanä¹‹é—´çš„å…³è”å…³ç³»ã€‚è¿™æ„å‘³ç€Springå¯ä»¥é€šè¿‡å‘Bean Factoryä¸­æ³¨å…¥çš„æ–¹å¼è‡ªåŠ¨æå®šbeanä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚è‡ªåŠ¨è£…é…å¯ä»¥è®¾ç½®åœ¨æ¯ä¸ªbeanä¸Šï¼Œä¹Ÿå¯ä»¥è®¾å®šåœ¨ç‰¹å®šçš„beanä¸Šã€‚<br>ä¸‹é¢çš„XMLé…ç½®æ–‡ä»¶è¡¨æ˜äº†å¦‚ä½•æ ¹æ®åç§°å°†ä¸€ä¸ªbeanè®¾ç½®ä¸ºè‡ªåŠ¨è£…é…ï¼š</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/26/Spring%E5%9F%BA%E7%A1%80/content18.png" class title="content18">
<p>é™¤äº†beané…ç½®æ–‡ä»¶ä¸­æä¾›çš„è‡ªåŠ¨è£…é…æ¨¡å¼ï¼Œè¿˜å¯ä»¥ä½¿ç”¨@Autowiredæ³¨è§£æ¥è‡ªåŠ¨è£…é…æŒ‡å®šçš„beanã€‚åœ¨ä½¿ç”¨@Autowiredæ³¨è§£ä¹‹å‰éœ€è¦åœ¨æŒ‰ç…§å¦‚ä¸‹çš„é…ç½®æ–¹å¼åœ¨Springé…ç½®æ–‡ä»¶è¿›è¡Œé…ç½®æ‰å¯ä»¥ä½¿ç”¨ã€‚</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/26/Spring%E5%9F%BA%E7%A1%80/content19.png" class title="content19">
<p>ä¹Ÿå¯ä»¥é€šè¿‡åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®AutowiredAnnotationBeanPostProcessor è¾¾åˆ°ç›¸åŒçš„æ•ˆæœã€‚</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/26/Spring%E5%9F%BA%E7%A1%80/content20.png" class title="content20">
<p>é…ç½®å¥½ä»¥åå°±å¯ä»¥ä½¿ç”¨@Autowiredæ¥æ ‡æ³¨äº†ã€‚</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/26/Spring%E5%9F%BA%E7%A1%80/content21.png" class title="content21">

<h3 id="è¯·è§£é‡Šè‡ªåŠ¨è£…é…æ¨¡å¼çš„åŒºåˆ«ï¼Ÿ"><a href="#è¯·è§£é‡Šè‡ªåŠ¨è£…é…æ¨¡å¼çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="è¯·è§£é‡Šè‡ªåŠ¨è£…é…æ¨¡å¼çš„åŒºåˆ«ï¼Ÿ"></a>è¯·è§£é‡Šè‡ªåŠ¨è£…é…æ¨¡å¼çš„åŒºåˆ«ï¼Ÿ</h3><p>åœ¨Springæ¡†æ¶ä¸­å…±æœ‰5ç§è‡ªåŠ¨è£…é…ï¼Œè®©æˆ‘ä»¬é€ä¸€åˆ†æã€‚</p>
<ul>
<li>noï¼šè¿™æ˜¯Springæ¡†æ¶çš„é»˜è®¤è®¾ç½®ï¼Œåœ¨è¯¥è®¾ç½®ä¸‹è‡ªåŠ¨è£…é…æ˜¯å…³é—­çš„ï¼Œå¼€å‘è€…éœ€è¦è‡ªè¡Œåœ¨beanå®šä¹‰ä¸­ç”¨æ ‡ç­¾æ˜ç¡®çš„è®¾ç½®ä¾èµ–å…³ç³»ã€‚  </li>
<li>byNameï¼šè¯¥é€‰é¡¹å¯ä»¥æ ¹æ®beanåç§°è®¾ç½®ä¾èµ–å…³ç³»ã€‚å½“å‘ä¸€ä¸ªbeanä¸­è‡ªåŠ¨è£…é…ä¸€ä¸ªå±æ€§æ—¶ï¼Œå®¹å™¨å°†æ ¹æ®beançš„åç§°è‡ªåŠ¨åœ¨åœ¨é…ç½®æ–‡ä»¶ä¸­æŸ¥è¯¢ä¸€ä¸ªåŒ¹é…çš„beanã€‚å¦‚æœæ‰¾åˆ°çš„è¯ï¼Œå°±è£…é…è¿™ä¸ªå±æ€§ï¼Œå¦‚æœæ²¡æ‰¾åˆ°çš„è¯å°±æŠ¥é”™ã€‚</li>
<li>byTypeï¼šè¯¥é€‰é¡¹å¯ä»¥æ ¹æ®beanç±»å‹è®¾ç½®ä¾èµ–å…³ç³»ã€‚å½“å‘ä¸€ä¸ªbeanä¸­è‡ªåŠ¨è£…é…ä¸€ä¸ªå±æ€§æ—¶ï¼Œå®¹å™¨å°†æ ¹æ®beançš„ç±»å‹è‡ªåŠ¨åœ¨åœ¨é…ç½®æ–‡ä»¶ä¸­æŸ¥è¯¢ä¸€ä¸ªåŒ¹é…çš„beanã€‚å¦‚æœæ‰¾åˆ°çš„è¯ï¼Œå°±è£…é…è¿™ä¸ªå±æ€§ï¼Œå¦‚æœæ²¡æ‰¾åˆ°çš„è¯å°±æŠ¥é”™ã€‚</li>
<li>constructorï¼šé€ å™¨çš„è‡ªåŠ¨è£…é…å’ŒbyTypeæ¨¡å¼ç±»ä¼¼ï¼Œä½†æ˜¯ä»…ä»…é€‚ç”¨äºä¸æœ‰æ„é€ å™¨ç›¸åŒå‚æ•°çš„beanï¼Œå¦‚æœåœ¨å®¹å™¨ä¸­æ²¡æœ‰æ‰¾åˆ°ä¸æ„é€ å™¨å‚æ•°ç±»å‹ä¸€è‡´çš„beanï¼Œé‚£ä¹ˆå°†ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</li>
<li>autodetectï¼šè¯¥æ¨¡å¼è‡ªåŠ¨æ¢æµ‹ä½¿ç”¨æ„é€ å™¨è‡ªåŠ¨è£…é…æˆ–è€…byTypeè‡ªåŠ¨è£…é…ã€‚é¦–å…ˆï¼Œé¦–å…ˆä¼šå°è¯•æ‰¾åˆé€‚çš„å¸¦å‚æ•°çš„æ„é€ å™¨ï¼Œå¦‚æœæ‰¾åˆ°çš„è¯å°±æ˜¯ç”¨æ„é€ å™¨è‡ªåŠ¨è£…é…ï¼Œå¦‚æœåœ¨beanå†…éƒ¨æ²¡æœ‰æ‰¾åˆ°ç›¸åº”çš„æ„é€ å™¨æˆ–è€…æ˜¯æ— å‚æ„é€ å™¨ï¼Œå®¹å™¨å°±ä¼šè‡ªåŠ¨é€‰æ‹©byTpeçš„è‡ªåŠ¨è£…é…æ–¹å¼ã€‚</li>
</ul>
<h3 id="å¦‚ä½•å¼€å¯åŸºäºæ³¨è§£çš„è‡ªåŠ¨è£…é…ï¼Ÿ"><a href="#å¦‚ä½•å¼€å¯åŸºäºæ³¨è§£çš„è‡ªåŠ¨è£…é…ï¼Ÿ" class="headerlink" title="å¦‚ä½•å¼€å¯åŸºäºæ³¨è§£çš„è‡ªåŠ¨è£…é…ï¼Ÿ"></a>å¦‚ä½•å¼€å¯åŸºäºæ³¨è§£çš„è‡ªåŠ¨è£…é…ï¼Ÿ</h3><p>è¦ä½¿ç”¨ @Autowiredï¼Œéœ€è¦æ³¨å†Œ AutowiredAnnotationBeanPostProcessorï¼Œå¯ä»¥æœ‰ä»¥ä¸‹ä¸¤ç§æ–¹å¼æ¥å®ç°ï¼š<br>1ã€å¼•å…¥é…ç½®æ–‡ä»¶ä¸­çš„<bean>ä¸‹å¼•å…¥<code>&lt;context:annotation-config&gt;</code></bean></p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/26/Spring%E5%9F%BA%E7%A1%80/content22.png" class title="content22">
<p>2ã€åœ¨beané…ç½®æ–‡ä»¶ä¸­ç›´æ¥å¼•å…¥AutowiredAnnotationBeanPostProcessor</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/26/Spring%E5%9F%BA%E7%A1%80/content23.png" class title="content23">

<h3 id="è¯·ä¸¾ä¾‹è§£é‡Š-Required-annotationï¼Ÿ"><a href="#è¯·ä¸¾ä¾‹è§£é‡Š-Required-annotationï¼Ÿ" class="headerlink" title="è¯·ä¸¾ä¾‹è§£é‡Š@Required annotationï¼Ÿ"></a>è¯·ä¸¾ä¾‹è§£é‡Š@Required annotationï¼Ÿ</h3><p>åœ¨äº§å“çº§åˆ«çš„åº”ç”¨ä¸­ï¼ŒIoCå®¹å™¨å¯èƒ½å£°æ˜äº†æ•°åä¸‡äº†beanï¼Œbeanä¸beanä¹‹é—´æœ‰ç€å¤æ‚çš„ä¾èµ–å…³ç³»ã€‚è®¾å€¼æ³¨è§£æ–¹æ³•çš„çŸ­æ¿ä¹‹ä¸€å°±æ˜¯éªŒè¯æ‰€æœ‰çš„å±æ€§æ˜¯å¦è¢«æ³¨è§£æ˜¯ä¸€é¡¹ååˆ†å›°éš¾çš„æ“ä½œã€‚å¯ä»¥é€šè¿‡åœ¨<bean>ä¸­è®¾ç½®â€œdependency-checkâ€æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚<br>åœ¨åº”ç”¨ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œä½ å¯èƒ½ä¸å¤§æ„¿æ„èŠ±æ—¶é—´åœ¨éªŒè¯æ‰€æœ‰beançš„å±æ€§æ˜¯å¦æŒ‰ç…§ä¸Šä¸‹æ–‡æ–‡ä»¶æ­£ç¡®é…ç½®ã€‚æˆ–è€…ä½ å®å¯éªŒè¯æŸä¸ªbeançš„ç‰¹å®šå±æ€§æ˜¯å¦è¢«æ­£ç¡®çš„è®¾ç½®ã€‚å³ä½¿æ˜¯ç”¨â€œdependency-checkâ€å±æ€§ä¹Ÿä¸èƒ½å¾ˆå¥½çš„è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ éœ€è¦ä½¿ç”¨@Required æ³¨è§£ã€‚<br>éœ€è¦ç”¨å¦‚ä¸‹çš„æ–¹å¼ä½¿ç”¨æ¥æ ‡æ˜beançš„è®¾å€¼æ–¹æ³•ã€‚</bean></p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/26/Spring%E5%9F%BA%E7%A1%80/content24.png" class title="content24">
<p>RequiredAnnotationBeanPostProcessoræ˜¯Springä¸­çš„åç½®å¤„ç†ç”¨æ¥éªŒè¯è¢«@Required æ³¨è§£çš„beanå±æ€§æ˜¯å¦è¢«æ­£ç¡®çš„è®¾ç½®äº†ã€‚åœ¨ä½¿ç”¨RequiredAnnotationBeanPostProcessoæ¥éªŒè¯beanå±æ€§ä¹‹å‰ï¼Œé¦–å…ˆè¦åœ¨IoCå®¹å™¨ä¸­å¯¹å…¶è¿›è¡Œæ³¨å†Œï¼š</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/26/Spring%E5%9F%BA%E7%A1%80/content25.png" class title="content25">
<p>ä½†æ˜¯å¦‚æœæ²¡æœ‰å±æ€§è¢«ç”¨ @Required æ³¨è§£è¿‡çš„è¯ï¼Œåç½®å¤„ç†å™¨ä¼šæŠ›å‡ºä¸€ä¸ªBeanInitializationException å¼‚å¸¸ã€‚</p>
<h3 id="è¯·ä¸¾ä¾‹è§£é‡Š-Autowiredæ³¨è§£"><a href="#è¯·ä¸¾ä¾‹è§£é‡Š-Autowiredæ³¨è§£" class="headerlink" title="è¯·ä¸¾ä¾‹è§£é‡Š@Autowiredæ³¨è§£?"></a>è¯·ä¸¾ä¾‹è§£é‡Š@Autowiredæ³¨è§£?</h3><p>@Autowiredæ³¨è§£å¯¹è‡ªåŠ¨è£…é…ä½•æ—¶ä½•å¤„è¢«å®ç°æä¾›äº†æ›´å¤šç»†ç²’åº¦çš„æ§åˆ¶ã€‚@Autowiredæ³¨è§£å¯ä»¥åƒ@Requiredæ³¨è§£ã€æ„é€ å™¨ä¸€æ ·è¢«ç”¨äºåœ¨beançš„è®¾å€¼æ–¹æ³•ä¸Šè‡ªåŠ¨è£…é…beançš„å±æ€§ï¼Œä¸€ä¸ªå‚æ•°æˆ–è€…å¸¦æœ‰ä»»æ„åç§°æˆ–å¸¦æœ‰å¤šä¸ªå‚æ•°çš„æ–¹æ³•ã€‚<br>æ¯”å¦‚ï¼Œå¯ä»¥åœ¨è®¾å€¼æ–¹æ³•ä¸Šä½¿ç”¨@Autowiredæ³¨è§£æ¥æ›¿ä»£é…ç½®æ–‡ä»¶ä¸­çš„ <property>å…ƒç´ ã€‚å½“Springå®¹å™¨åœ¨setteræ–¹æ³•ä¸Šæ‰¾åˆ°@Autowiredæ³¨è§£æ—¶ï¼Œä¼šå°è¯•ç”¨byType è‡ªåŠ¨è£…é…ã€‚<br>å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨æ„é€ æ–¹æ³•ä¸Šä½¿ç”¨@Autowired æ³¨è§£ã€‚å¸¦æœ‰@Autowired æ³¨è§£çš„æ„é€ æ–¹æ³•æ„å‘³ç€åœ¨åˆ›å»ºä¸€ä¸ªbeanæ—¶å°†ä¼šè¢«è‡ªåŠ¨è£…é…ï¼Œå³ä¾¿åœ¨é…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨<constructor-arg> å…ƒç´ ã€‚</constructor-arg></property></p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/26/Spring%E5%9F%BA%E7%A1%80/content26.png" class title="content26">
<p>ä¸‹é¢æ˜¯æ²¡æœ‰æ„é€ å‚æ•°çš„é…ç½®æ–¹å¼ï¼š</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/26/Spring%E5%9F%BA%E7%A1%80/content27.png" class title="content27">

<h3 id="è¯·ä¸¾ä¾‹è¯´æ˜-Qualifieræ³¨è§£ï¼Ÿ"><a href="#è¯·ä¸¾ä¾‹è¯´æ˜-Qualifieræ³¨è§£ï¼Ÿ" class="headerlink" title="è¯·ä¸¾ä¾‹è¯´æ˜@Qualifieræ³¨è§£ï¼Ÿ"></a>è¯·ä¸¾ä¾‹è¯´æ˜@Qualifieræ³¨è§£ï¼Ÿ</h3><p>@Qualifieræ³¨è§£æ„å‘³ç€å¯ä»¥åœ¨è¢«æ ‡æ³¨beançš„å­—æ®µä¸Šå¯ä»¥è‡ªåŠ¨è£…é…ã€‚Qualifieræ³¨è§£å¯ä»¥ç”¨æ¥å–æ¶ˆSpringä¸èƒ½å–æ¶ˆçš„beanåº”ç”¨ã€‚<br>ä¸‹é¢çš„ç¤ºä¾‹å°†ä¼šåœ¨Customerçš„personå±æ€§ä¸­è‡ªåŠ¨è£…é…personçš„å€¼ã€‚</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/26/Spring%E5%9F%BA%E7%A1%80/content28.png" class title="content28">
<p>ä¸‹é¢æˆ‘ä»¬è¦åœ¨é…ç½®æ–‡ä»¶ä¸­æ¥é…ç½®Personç±»ã€‚</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/26/Spring%E5%9F%BA%E7%A1%80/content29.png" class title="content29">
<p>Springä¼šçŸ¥é“è¦è‡ªåŠ¨è£…é…å“ªä¸ªperson beanä¹ˆï¼Ÿä¸ä¼šçš„ï¼Œä½†æ˜¯è¿è¡Œä¸Šé¢çš„ç¤ºä¾‹æ—¶ï¼Œä¼šæŠ›å‡ºä¸‹é¢çš„å¼‚å¸¸ï¼š</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/26/Spring%E5%9F%BA%E7%A1%80/content30.png" class title="content30">
<p>è¦è§£å†³ä¸Šé¢çš„é—®é¢˜ï¼Œéœ€è¦ä½¿ç”¨ @Quanlifieræ³¨è§£æ¥å‘Šè¯‰Springå®¹å™¨è¦è£…é…å“ªä¸ªbeanï¼š</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/26/Spring%E5%9F%BA%E7%A1%80/content31.png" class title="content31">

<h3 id="æ„é€ æ–¹æ³•æ³¨å…¥å’Œè®¾å€¼æ³¨å…¥æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#æ„é€ æ–¹æ³•æ³¨å…¥å’Œè®¾å€¼æ³¨å…¥æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="æ„é€ æ–¹æ³•æ³¨å…¥å’Œè®¾å€¼æ³¨å…¥æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>æ„é€ æ–¹æ³•æ³¨å…¥å’Œè®¾å€¼æ³¨å…¥æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p>è¯·æ³¨æ„ä»¥ä¸‹æ˜æ˜¾çš„åŒºåˆ«ï¼š</p>
<ul>
<li>åœ¨è®¾å€¼æ³¨å…¥æ–¹æ³•æ”¯æŒå¤§éƒ¨åˆ†çš„ä¾èµ–æ³¨å…¥ï¼Œå¦‚æœæˆ‘ä»¬ä»…éœ€è¦æ³¨å…¥intã€stringå’Œlongå‹çš„å˜é‡ï¼Œæˆ‘ä»¬ä¸è¦ç”¨è®¾å€¼çš„æ–¹æ³•æ³¨å…¥ã€‚å¯¹äºåŸºæœ¬ç±»å‹ï¼Œå¦‚æœæˆ‘ä»¬æ²¡æœ‰æ³¨å…¥çš„è¯ï¼Œå¯ä»¥ä¸ºåŸºæœ¬ç±»å‹è®¾ç½®é»˜è®¤å€¼ã€‚åœ¨æ„é€ æ–¹æ³•æ³¨å…¥ä¸æ”¯æŒå¤§éƒ¨åˆ†çš„ä¾èµ–æ³¨å…¥ï¼Œå› ä¸ºåœ¨è°ƒç”¨æ„é€ æ–¹æ³•ä¸­å¿…é¡»ä¼ å…¥æ­£ç¡®çš„æ„é€ å‚æ•°ï¼Œå¦åˆ™çš„è¯ä¸ºæŠ¥é”™ã€‚</li>
<li>è®¾å€¼æ³¨å…¥ä¸ä¼šé‡å†™æ„é€ æ–¹æ³•çš„å€¼ã€‚å¦‚æœæˆ‘ä»¬å¯¹åŒä¸€ä¸ªå˜é‡åŒæ—¶ä½¿ç”¨äº†æ„é€ æ–¹æ³•æ³¨å…¥åˆä½¿ç”¨äº†è®¾ç½®æ–¹æ³•æ³¨å…¥çš„è¯ï¼Œé‚£ä¹ˆæ„é€ æ–¹æ³•å°†ä¸èƒ½è¦†ç›–ç”±è®¾å€¼æ–¹æ³•æ³¨å…¥çš„å€¼ã€‚å¾ˆæ˜æ˜¾ï¼Œå› ä¸ºæ„é€ æ–¹æ³•å°½åœ¨å¯¹è±¡è¢«åˆ›å»ºæ—¶è°ƒç”¨ã€‚  </li>
<li>åœ¨ä½¿ç”¨è®¾å€¼æ³¨å…¥æ—¶æœ‰å¯èƒ½è¿˜ä¸èƒ½ä¿è¯æŸç§ä¾èµ–æ˜¯å¦å·²ç»è¢«æ³¨å…¥ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™æ—¶å¯¹è±¡çš„ä¾èµ–å…³ç³»æœ‰å¯èƒ½æ˜¯ä¸å®Œæ•´çš„ã€‚è€Œåœ¨å¦ä¸€ç§æƒ…å†µä¸‹ï¼Œæ„é€ å™¨æ³¨å…¥åˆ™ä¸å…è®¸ç”Ÿæˆä¾èµ–å…³ç³»ä¸å®Œæ•´çš„å¯¹è±¡ã€‚</li>
<li>åœ¨è®¾å€¼æ³¨å…¥æ—¶å¦‚æœå¯¹è±¡Aå’Œå¯¹è±¡Bäº’ç›¸ä¾èµ–ï¼Œåœ¨åˆ›å»ºå¯¹è±¡Aæ—¶Springä¼šæŠ›å‡ºsObjectCurrentlyInCreationExceptionå¼‚å¸¸ï¼Œå› ä¸ºåœ¨Bå¯¹è±¡è¢«åˆ›å»ºä¹‹å‰Aå¯¹è±¡æ˜¯ä¸èƒ½è¢«åˆ›å»ºçš„ï¼Œåä¹‹äº¦ç„¶ã€‚æ‰€ä»¥Springç”¨è®¾å€¼æ³¨å…¥çš„æ–¹æ³•è§£å†³äº†å¾ªç¯ä¾èµ–çš„é—®é¢˜ï¼Œå› å¯¹è±¡çš„è®¾å€¼æ–¹æ³•æ˜¯åœ¨å¯¹è±¡è¢«åˆ›å»ºä¹‹å‰è¢«è°ƒç”¨çš„ã€‚</li>
</ul>
<h3 id="Springæ¡†æ¶ä¸­æœ‰å“ªäº›ä¸åŒç±»å‹çš„äº‹ä»¶ï¼Ÿ"><a href="#Springæ¡†æ¶ä¸­æœ‰å“ªäº›ä¸åŒç±»å‹çš„äº‹ä»¶ï¼Ÿ" class="headerlink" title="Springæ¡†æ¶ä¸­æœ‰å“ªäº›ä¸åŒç±»å‹çš„äº‹ä»¶ï¼Ÿ"></a>Springæ¡†æ¶ä¸­æœ‰å“ªäº›ä¸åŒç±»å‹çš„äº‹ä»¶ï¼Ÿ</h3><p>Springçš„ApplicationContext æä¾›äº†æ”¯æŒäº‹ä»¶å’Œä»£ç ä¸­ç›‘å¬å™¨çš„åŠŸèƒ½ã€‚<br>æˆ‘ä»¬å¯ä»¥åˆ›å»ºbeanç”¨æ¥ç›‘å¬åœ¨ApplicationContext ä¸­å‘å¸ƒçš„äº‹ä»¶ã€‚ApplicationEventç±»å’Œåœ¨ApplicationContextæ¥å£ä¸­å¤„ç†çš„äº‹ä»¶ï¼Œå¦‚æœä¸€ä¸ªbeanå®ç°äº†ApplicationListeneræ¥å£ï¼Œå½“ä¸€ä¸ªApplicationEvent è¢«å‘å¸ƒä»¥åï¼Œbeanä¼šè‡ªåŠ¨è¢«é€šçŸ¥ã€‚</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/26/Spring%E5%9F%BA%E7%A1%80/content32.png" class title="content32">
<p>Spring æä¾›äº†ä»¥ä¸‹5ä¸­æ ‡å‡†çš„äº‹ä»¶ï¼š</p>
<ul>
<li>ä¸Šä¸‹æ–‡æ›´æ–°äº‹ä»¶ï¼ˆContextRefreshedEventï¼‰ï¼šè¯¥äº‹ä»¶ä¼šåœ¨ApplicationContextè¢«åˆå§‹åŒ–æˆ–è€…æ›´æ–°æ—¶å‘å¸ƒã€‚ä¹Ÿå¯ä»¥åœ¨è°ƒç”¨ConfigurableApplicationContext      æ¥å£ä¸­çš„refresh()æ–¹æ³•æ—¶è¢«è§¦å‘ã€‚  </li>
<li>ä¸Šä¸‹æ–‡å¼€å§‹äº‹ä»¶ï¼ˆContextStartedEventï¼‰ï¼šå½“å®¹å™¨è°ƒç”¨ConfigurableApplicationContextçš„Start()æ–¹æ³•å¼€å§‹/é‡æ–°å¼€å§‹å®¹å™¨æ—¶è§¦å‘è¯¥äº‹ä»¶ã€‚</li>
<li>ä¸Šä¸‹æ–‡åœæ­¢äº‹ä»¶ï¼ˆContextStoppedEventï¼‰ï¼šå½“å®¹å™¨è°ƒç”¨ConfigurableApplicationContextçš„Stop()æ–¹æ³•åœæ­¢å®¹å™¨æ—¶è§¦å‘è¯¥äº‹ä»¶ã€‚</li>
<li>ä¸Šä¸‹æ–‡å…³é—­äº‹ä»¶ï¼ˆContextClosedEventï¼‰ï¼šå½“ApplicationContextè¢«å…³é—­æ—¶è§¦å‘è¯¥äº‹ä»¶ã€‚å®¹å™¨è¢«å…³é—­æ—¶ï¼Œå…¶ç®¡ç†çš„æ‰€æœ‰å•ä¾‹Beanéƒ½è¢«é”€æ¯ã€‚</li>
<li>è¯·æ±‚å¤„ç†äº‹ä»¶ï¼ˆRequestHandledEventï¼‰ï¼šåœ¨Webåº”ç”¨ä¸­ï¼Œå½“ä¸€ä¸ªhttpè¯·æ±‚ï¼ˆrequestï¼‰ç»“æŸè§¦å‘è¯¥äº‹ä»¶ã€‚<br>é™¤äº†ä¸Šé¢ä»‹ç»çš„äº‹ä»¶ä»¥å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡æ‰©å±•ApplicationEvent ç±»æ¥å¼€å‘è‡ªå®šä¹‰çš„äº‹ä»¶ã€‚<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/26/Spring%E5%9F%BA%E7%A1%80/content33.png" class title="content33">
ä¸ºäº†ç›‘å¬è¿™ä¸ªäº‹ä»¶ï¼Œè¿˜éœ€è¦åˆ›å»ºä¸€ä¸ªç›‘å¬å™¨ï¼š<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/26/Spring%E5%9F%BA%E7%A1%80/content34.png" class title="content34">
ä¹‹åé€šè¿‡applicationContextæ¥å£çš„publishEvent()æ–¹æ³•æ¥å‘å¸ƒè‡ªå®šä¹‰äº‹ä»¶ã€‚<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2020/08/26/Spring%E5%9F%BA%E7%A1%80/content35.png" class title="content35"></li>
</ul>
<h3 id="FileSystemResourceå’ŒClassPathResourceæœ‰ä½•åŒºåˆ«ï¼Ÿ"><a href="#FileSystemResourceå’ŒClassPathResourceæœ‰ä½•åŒºåˆ«ï¼Ÿ" class="headerlink" title="FileSystemResourceå’ŒClassPathResourceæœ‰ä½•åŒºåˆ«ï¼Ÿ"></a>FileSystemResourceå’ŒClassPathResourceæœ‰ä½•åŒºåˆ«ï¼Ÿ</h3><p>åœ¨FileSystemResource ä¸­éœ€è¦ç»™å‡ºspring-config.xmlæ–‡ä»¶åœ¨ä½ é¡¹ç›®ä¸­çš„ç›¸å¯¹è·¯å¾„æˆ–è€…ç»å¯¹è·¯å¾„ã€‚åœ¨ClassPathResourceä¸­springä¼šåœ¨ClassPathä¸­è‡ªåŠ¨æœå¯»é…ç½®æ–‡ä»¶ï¼Œæ‰€ä»¥è¦æŠŠClassPathResource æ–‡ä»¶æ”¾åœ¨ClassPathä¸‹ã€‚<br>å¦‚æœå°†spring-config.xmlä¿å­˜åœ¨äº†srcæ–‡ä»¶å¤¹ä¸‹çš„è¯ï¼Œåªéœ€ç»™å‡ºé…ç½®æ–‡ä»¶çš„åç§°å³å¯ï¼Œå› ä¸ºsrcæ–‡ä»¶å¤¹æ˜¯é»˜è®¤ã€‚<br>ç®€è€Œè¨€ä¹‹ï¼ŒClassPathResourceåœ¨ç¯å¢ƒå˜é‡ä¸­è¯»å–é…ç½®æ–‡ä»¶ï¼ŒFileSystemResourceåœ¨é…ç½®æ–‡ä»¶ä¸­è¯»å–é…ç½®æ–‡ä»¶ã€‚</p>
<h3 id="Springæ¡†æ¶ä¸­éƒ½ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ"><a href="#Springæ¡†æ¶ä¸­éƒ½ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ" class="headerlink" title="Springæ¡†æ¶ä¸­éƒ½ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ"></a>Springæ¡†æ¶ä¸­éƒ½ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ</h3><p>Springæ¡†æ¶ä¸­ä½¿ç”¨åˆ°äº†å¤§é‡çš„è®¾è®¡æ¨¡å¼ï¼Œä¸‹é¢åˆ—ä¸¾äº†æ¯”è¾ƒæœ‰ä»£è¡¨æ€§çš„ï¼š</p>
<ul>
<li>ä»£ç†æ¨¡å¼â€”åœ¨AOPå’Œremotingä¸­è¢«ç”¨çš„æ¯”è¾ƒå¤šã€‚  </li>
<li>å•ä¾‹æ¨¡å¼â€”åœ¨springé…ç½®æ–‡ä»¶ä¸­å®šä¹‰çš„beané»˜è®¤ä¸ºå•ä¾‹æ¨¡å¼ã€‚</li>
<li>æ¨¡æ¿æ–¹æ³•â€”ç”¨æ¥è§£å†³ä»£ç é‡å¤çš„é—®é¢˜ã€‚æ¯”å¦‚. RestTemplate, JmsTemplate, JpaTemplateã€‚</li>
<li>å‰ç«¯æ§åˆ¶å™¨â€”Srpingæä¾›äº†DispatcherServletæ¥å¯¹è¯·æ±‚è¿›è¡Œåˆ†å‘ã€‚</li>
<li>è§†å›¾å¸®åŠ©(View Helper )â€”Springæä¾›äº†ä¸€ç³»åˆ—çš„JSPæ ‡ç­¾ï¼Œé«˜æ•ˆå®æ¥è¾…åŠ©å°†åˆ†æ•£çš„ä»£ç æ•´åˆåœ¨è§†å›¾é‡Œã€‚</li>
<li>ä¾èµ–æ³¨å…¥â€”è´¯ç©¿äºBeanFactory / ApplicationContextæ¥å£çš„æ ¸å¿ƒç†å¿µã€‚</li>
<li>å·¥å‚æ¨¡å¼â€”BeanFactoryç”¨æ¥åˆ›å»ºå¯¹è±¡çš„å®ä¾‹ã€‚ </li>
</ul>
]]></content>
      <categories>
        <category>Javaè¿›é˜¶</category>
      </categories>
      <tags>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title>åˆè¯†Activitiå·¥ä½œæµ</title>
    <url>/2021/02/06/%E5%88%9D%E8%AF%86Activiti%E5%B7%A5%E4%BD%9C%E6%B5%81/</url>
    <content><![CDATA[<h3 id="å·¥ä½œæµä»‹ç»"><a href="#å·¥ä½œæµä»‹ç»" class="headerlink" title="å·¥ä½œæµä»‹ç»"></a>å·¥ä½œæµä»‹ç»</h3><p>å·¥ä½œæµï¼ˆWorkflowï¼‰ï¼Œæ˜¯å¯¹å·¥ä½œæµç¨‹åŠå…¶å„æ“ä½œæ­¥éª¤ä¹‹é—´ä¸šåŠ¡è§„åˆ™çš„æŠ½è±¡ã€æ¦‚æ‹¬ã€æè¿°ã€‚<br>å·¥ä½œæµè¦è§£å†³çš„ä¸»è¦é—®é¢˜ï¼šä¸ºå®ç°æŸä¸ªä¸šåŠ¡ç›®æ ‡ï¼Œåœ¨å¤šä¸ªå‚ä¸è€…ä¹‹é—´ï¼Œåˆ©ç”¨è®¡ç®—æœºï¼ŒæŒ‰æŸç§é¢„å®šè§„åˆ™è‡ªåŠ¨ä¼ é€’æ–‡æ¡£ã€ä¿¡æ¯æˆ–è€…ä»»åŠ¡ã€‚</p>
<h3 id="BPMN-2-0è§„èŒƒç®€è¿°"><a href="#BPMN-2-0è§„èŒƒç®€è¿°" class="headerlink" title="BPMN 2.0è§„èŒƒç®€è¿°"></a>BPMN 2.0è§„èŒƒç®€è¿°</h3><p>BPMNè§„èŒƒï¼Œå…¨ç§°æ˜¯Business Process Modeling Notationï¼ˆ1.0-2004ï¼‰ï¼ŒBPMNè§„èŒƒçš„å‘å¸ƒä¸ºäº†è®©ä¸šåŠ¡æµç¨‹çš„å…¨éƒ¨å‚ä¸äººå‘˜å¯¹æµç¨‹å¯ä»¥è¿›è¡Œå¯è§†åŒ–ç®¡ç†ï¼Œæä¾›ä¸€å¥—è®©æ‰€æœ‰å‚ä¸äººå‘˜éƒ½æ˜“äºç†è§£çš„è¯­è¨€å’Œæ ‡è®°ã€‚<br>2.0 ç‰ˆæœ¬äº2011å¹´å‘å¸ƒï¼Œå…¨ç§°æ”¹ä¸ºBusiness Process Model And Notationï¼ˆä¸šåŠ¡æµç¨‹æ¨¡å‹å’Œç¬¦å·ï¼‰</p>
<p>BPMN2.0åœ¨ä»¥ä¸‹æ–¹é¢æ‰©å±•äº†BPMN1.2ï¼š</p>
<ul>
<li>è§„èŒƒäº†æµç¨‹å…ƒç´ çš„æ‰§è¡Œè¯­æ³•ã€‚</li>
<li>å®šä¹‰äº†æµç¨‹æ¨¡å‹å’Œæµç¨‹å›¾çš„æ‰©å±•æœºåˆ¶ã€‚</li>
<li>ç»†åŒ–äº†äº‹ä»¶çš„ç»„æˆã€‚</li>
<li>æ‰©å±•äº†å‚ä¸è€…çš„äº¤äº’å®šä¹‰ã€‚</li>
<li>å®šä¹‰äº†ç¼–æ’æ¨¡å‹ã€‚</li>
</ul>
<p>BPMN 2.0çš„<strong>ç›®çš„</strong>æ˜¯å»ºè®®ç®€å•å¹¶ä¸”æ˜“æ‡‚çš„ä¸šåŠ¡æµç¨‹æ¨¡å‹ï¼Œä½†æ˜¯åŒæ—¶åˆéœ€è¦å¤„ç†é«˜åº¦å¤æ‚çš„ä¸šåŠ¡æµç¨‹ï¼Œå› æ­¤è¦è§£å†³è¿™ä¸¤ä¸ªçŸ›ç›¾çš„è¦æ±‚ï¼Œéœ€è¦åœ¨è§„èŒƒä¸­å®šä¹‰æ ‡å‡†çš„å›¾å½¢å’Œç¬¦å·ã€‚</p>
<p>BPMNä¸­å®šä¹‰äº†5ä¸ªåŸºç¡€çš„å…ƒç´ ç±»åˆ«ï¼š</p>
<ol>
<li>æµå¯¹è±¡ï¼ˆFlow Objectsï¼‰ï¼šåœ¨ä¸€ä¸ªä¸šåŠ¡æµç¨‹ä¸­ï¼Œæµå¯¹è±¡æ˜¯ç”¨äºå®šä¹‰è¡Œä¸ºçš„å›¾å½¢å…ƒç´ ï¼Œä¸»è¦æœ‰äº‹ä»¶ï¼ˆEventsï¼‰ã€æ´»åŠ¨ï¼ˆActivitiesï¼‰å’Œç½‘å…³ï¼ˆGatewaysï¼‰ä¸‰ç§æµå¯¹è±¡ã€‚</li>
<li>æ•°æ®ï¼ˆDataï¼‰ï¼šä¸»è¦æœ‰æ•°æ®å¯¹è±¡ï¼ˆData Objectï¼‰ã€æ•°æ®è¾“å…¥ï¼ˆData Inputsï¼‰ã€æ•°æ®è¾“å‡ºï¼ˆData Outputsï¼‰å’Œæ•°æ®å­˜å‚¨ï¼ˆData Storesï¼‰4ç§å…ƒç´ ã€‚</li>
<li>è¿æ¥å¯¹è±¡ï¼ˆConnecting Objectsï¼‰ï¼šç”¨äºè¿æ¥æµå¯¹è±¡ï¼Œä¸»è¦æœ‰4ç§è¿æ¥æµå¯¹è±¡çš„æ–¹å¼ï¼ŒåŒ…æ‹¬é¡ºåºæµï¼ˆSequence Flowsï¼‰ã€æ¶ˆæ¯æµï¼ˆMessage Flowsï¼‰ã€å…³è”ï¼ˆAssociationsï¼‰å’Œæ•°æ®å…³è”ï¼ˆData Associationsï¼‰</li>
<li>æ³³é“ï¼ˆSwimlanesï¼‰ï¼šæ³³é“æœ‰ä¸¤ç§é€”å¾„ç»„ç»‡åŸºç¡€çš„æ¨¡å‹å…ƒç´ ï¼Œåˆ†åˆ«æ˜¯æ± ï¼ˆPoolsï¼‰å’Œé“ï¼ˆLanesï¼‰ã€‚</li>
<li>åˆ¶å“ï¼ˆArtifactsï¼‰ï¼šåˆ¶å“ä¸»è¦ç”¨äºä¸ºæµç¨‹æä¾›é™„ä»¶ä¿¡æ¯ï¼Œå½“å‰åˆ¶å“åŒ…æ‹¬ç»„ï¼ˆGroupï¼‰å’Œæ³¨é‡Šï¼ˆText Annotationï¼‰ã€‚</li>
</ol>
<p>BPMNå…ƒç´ çš„å›¾å½¢åŠå…¶æè¿°ï¼š</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2021/02/06/%E5%88%9D%E8%AF%86Activiti%E5%B7%A5%E4%BD%9C%E6%B5%81/content1.png" class title="content1">       
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2021/02/06/%E5%88%9D%E8%AF%86Activiti%E5%B7%A5%E4%BD%9C%E6%B5%81/content2.png" class title="content2"> 

<h3 id="Activitiæ•°æ®åº“è®¾è®¡"><a href="#Activitiæ•°æ®åº“è®¾è®¡" class="headerlink" title="Activitiæ•°æ®åº“è®¾è®¡"></a>Activitiæ•°æ®åº“è®¾è®¡</h3><p><strong>Activitiæµç¨‹å¼•æ“çš„æ•°æ®è¡¨åˆ†5å¤§ç±»</strong>ï¼š</p>
<ol>
<li>é€šç”¨æ•°æ®è¡¨</li>
<li>æµç¨‹å­˜å‚¨æ•°æ®è¡¨</li>
<li>èº«ä»½æ•°æ®è¡¨</li>
<li>è¿è¡Œæ—¶æ•°æ®è¡¨</li>
<li>å†å²æ•°æ®è¡¨<br>Activiti 6.0ç‰ˆæœ¬ç§åŠ å…¥äº†åŸºäºDMNè§„èŒƒçš„è§„åˆ™å¼•æ“ï¼ŒDMNè§„åˆ™å¼•æ“æ•°æ®è¡¨</li>
</ol>
<h4 id="é€šç”¨æ•°æ®è¡¨ï¼š"><a href="#é€šç”¨æ•°æ®è¡¨ï¼š" class="headerlink" title="é€šç”¨æ•°æ®è¡¨ï¼š"></a>é€šç”¨æ•°æ®è¡¨ï¼š</h4><p>ç”¨äºå­˜æ”¾ä¸€äº›é€šç”¨çš„æ•°æ®ï¼Œè¿™äº›è¡¨æœ¬èº«ä¸å…³å¿ƒç‰¹å®šçš„æµç¨‹æˆ–è€…ä¸šåŠ¡ï¼Œåªç”¨äºå­˜æ”¾è¿™äº›ä¸šåŠ¡æˆ–è€…æµç¨‹æ‰€ä½¿ç”¨çš„é€šç”¨èµ„æºã€‚<br>é€šç”¨æ•°æ®è¡¨æœ‰ä¸¤ä¸ªï¼Œéƒ½ä»¥â€œACT_GEâ€å¼€å¤´ï¼ŒGEæ˜¯å•è¯generalçš„ç¼©å†™ã€‚</p>
<ul>
<li>èµ„æºè¡¨ï¼šè¡¨ACT_GE_BYTEARRAYç”¨äºä¿å­˜ä¸æµç¨‹å¼•æ“ç›¸å…³çš„èµ„æºï¼Œåªè¦è°ƒç”¨äº†Activitiå­˜å‚¨æœåŠ¡çš„APIï¼Œæ¶‰åŠçš„èµ„æºå‡ä¼šè¢«è½¬æ¢ä¸ºbyteæ•°æ®ä¿å­˜åˆ°è¿™ä¸ªè¡¨ä¸­ã€‚ä½¿ç”¨è¿™ä¸ªè¡¨æ¥ä¿å­˜å­—ç¬¦ä¸²ã€æµç¨‹æ–‡ä»¶</li>
<li>å±æ€§è¡¨ï¼šActivitiå°†å…¨éƒ¨çš„å±æ€§æŠ½è±¡ä¸º key-value å¯¹ï¼Œæ¯ä¸ªå±æ€§éƒ½æœ‰åç§°å’Œå€¼ï¼Œä½¿ç”¨ACT_GE_PROPERTYæ¥ä¿å­˜è¿™äº›å±æ€§</li>
</ul>
<h4 id="æµç¨‹å­˜å‚¨è¡¨ï¼š"><a href="#æµç¨‹å­˜å‚¨è¡¨ï¼š" class="headerlink" title="æµç¨‹å­˜å‚¨è¡¨ï¼š"></a>æµç¨‹å­˜å‚¨è¡¨ï¼š</h4><p>ä½¿ç”¨ä»“å‚¨è¡¨æ¥ä¿å­˜æµç¨‹å®šä¹‰å’Œéƒ¨ç½²ä¿¡æ¯è¿™ç±»æ•°æ®ï¼Œå­˜å‚¨è¡¨åç§°ä»¥â€œACT_REâ€å¼€å¤´ï¼Œâ€œREâ€æ˜¯repositoryå•è¯çš„ç¼©å†™ã€‚</p>
<ul>
<li>éƒ¨ç½²æ•°æ®è¡¨ï¼šåœ¨Activitiä¸­ï¼Œä¸€æ¬¡éƒ¨ç½²å¯ä»¥æ·»åŠ å¤šä¸ªèµ„æºï¼Œèµ„æºä¼šè¢«ä¿å­˜åˆ°èµ„æºè¡¨ä¸­ï¼ˆACT_GE_BTYEARRAYï¼‰ï¼Œè€Œå¯¹äºéƒ¨ç½²ï¼Œåˆ™éƒ¨ç½²ä¿¡æ¯ä¼šè¢«ä¿å­˜åˆ°éƒ¨ç½²è¡¨ä¸­ï¼ˆACT_RE_DEPLOYMENTï¼‰</li>
<li>æµç¨‹å®šä¹‰è¡¨ï¼šActivitiåœ¨éƒ¨ç½²æ·»åŠ èµ„æºæ—¶ï¼Œå¦‚æœå‘å¸ƒéƒ¨ç½²çš„æ–‡ä»¶æ˜¯æµç¨‹æ–‡ä»¶ï¼ˆ.bpmnæˆ–è€….BPMN20.xmlï¼‰ï¼Œåˆ™é™¤äº†ä¼šè§£æè§£ææµç¨‹æ–‡ä»¶ï¼Œå°†å†…å®¹ä¿å­˜åˆ°èµ„æºè¡¨å¤–ï¼Œè¿˜ä¼šè§£ææµç¨‹æ–‡ä»¶çš„å†…å®¹ï¼Œå½¢æˆç‰¹å®šçš„æµç¨‹å®šä¹‰æ•°æ®ï¼Œå†™å…¥æµç¨‹å®šä¹‰è¡¨ï¼ˆACT_RE_PROCDEFï¼‰ä¸­ã€‚</li>
</ul>
<h4 id="èº«ä»½æ•°æ®è¡¨ï¼š"><a href="#èº«ä»½æ•°æ®è¡¨ï¼š" class="headerlink" title="èº«ä»½æ•°æ®è¡¨ï¼š"></a>èº«ä»½æ•°æ®è¡¨ï¼š</h4><p>Activitiçš„æ•´ä¸ªèº«ä»½æ•°æ®æ¨¡å—ï¼Œå¯ä»¥ç‹¬ç«‹äºæµç¨‹å¼•æ“è€Œå­˜åœ¨ï¼Œæœ‰å…³èº«ä»½æ•°æ®çš„å‡ å¼ è¡¨ï¼Œå¹¶æ²¡æœ‰ä¿å­˜ä¸æµç¨‹ç›¸å…³çš„æ•°æ®åŠå…³è”ã€‚èº«ä»½è¡¨åç§°ä»¥ACT_IDå¼€å¤´ï¼Œè¡¨åä¸­çš„â€IDâ€æ˜¯å•è¯identityçš„ç¼©å†™ã€‚</p>
<ul>
<li>ç”¨æˆ·è¡¨ï¼šæµç¨‹å¼•æ“ç”¨æˆ·çš„ä¿¡æ¯è¢«ä¿å­˜åœ¨ACT_ID_USERè¡¨ä¸­</li>
<li>ç”¨æˆ·è´¦å·ï¼ˆä¿¡æ¯ï¼‰è¡¨ï¼šActivitiå°†ç”¨æˆ·ã€ç”¨æˆ·è´¦å·å’Œç”¨æˆ·ä¿¡æ¯åˆ†ä¸ºä¸‰ç§æ•°æ®ï¼Œå…¶ä¸­ç”¨æˆ·è¡¨ä¿å­˜ç”¨æˆ·çš„æ•°æ®ï¼Œè€Œç”¨æˆ·è´¦å·å’Œç”¨æˆ·ä¿¡æ¯ï¼Œåˆ™è¢«ä¿å­˜åˆ°ACT_ID_INFOè¡¨ä¸­ã€‚</li>
<li>ç”¨æˆ·ç»„è¡¨ï¼šä½¿ç”¨ACT_ID_GROUPè¡¨æ¥ä¿å­˜ç”¨æˆ·ç»„çš„æ•°æ®</li>
<li>å…³ç³»è¡¨ï¼šä¸€ä¸ªç”¨æˆ·ç»„ä¸‹æœ‰å¤šä¸ªç”¨æˆ·ï¼Œä¸€ä¸ªç”¨æˆ·å¯ä»¥å±äºä¸åŒçš„ç”¨æˆ·ç»„ï¼Œé‚£ä¹ˆè¿™ç§å¤šå¯¹å¤šçš„å…³ç³»å°±ä½¿ç”¨å…³ç³»è¡¨æ¥è¿›è¡Œæè¿°ï¼Œå…³ç³»è¡¨ä¸ºACT_ID_MEMBERSHIP</li>
</ul>
<h4 id="è¿è¡Œæ—¶æ•°æ®è¡¨ï¼š"><a href="#è¿è¡Œæ—¶æ•°æ®è¡¨ï¼š" class="headerlink" title="è¿è¡Œæ—¶æ•°æ®è¡¨ï¼š"></a>è¿è¡Œæ—¶æ•°æ®è¡¨ï¼š</h4><p>è¿è¡Œæ—¶æ•°æ®è¡¨ç”¨æ¥ä¿å­˜æµç¨‹åœ¨è¿è¡Œè¿‡ç¨‹ä¸­æ‰€äº§ç”Ÿçš„æ•°æ®ï¼Œä¾‹å¦‚æµç¨‹å®ä¾‹ã€æ‰§è¡Œæµã€ä»»åŠ¡ç­‰ã€‚<br>è¿è¡Œæ—¶æ•°æ®è¡¨çš„åç§°ä»¥ACT_RUå¼€å¤´ï¼Œâ€RUâ€æ˜¯å•è¯runtimeçš„ç¼©å†™ã€‚</p>
<ul>
<li>æµç¨‹å®ä¾‹ï¼ˆæ‰§è¡Œæµï¼‰è¡¨ï¼šæµç¨‹å¯åŠ¨åï¼Œä¼šäº§ç”Ÿä¸€ä¸ªæµç¨‹å®ä¾‹ï¼ŒåŒæ—¶ä¼šäº§ç”Ÿç›¸åº”çš„æ‰§è¡Œæµï¼Œæµç¨‹å®ä¾‹å’Œæ‰§è¡Œæµæ•°æ®å‡è¢«ä¿å­˜åœ¨ACT_RU_EXECUTIONè¡¨ä¸­ï¼Œå¦‚æœä¸€ä¸ªæµç¨‹å®ä¾‹åªæœ‰ä¸€æ¡æ‰§è¡Œæµï¼Œé‚£ä¹ˆè¯¥è¡¨ä¸­åªäº§ç”Ÿä¸€æ¡æ•°æ®ï¼Œè¯¥æ•°æ®æ—¢è¡¨ç¤ºæ‰§è¡Œæµï¼Œä¹Ÿè¡¨ç¤ºæµç¨‹å®ä¾‹ã€‚</li>
<li>æµç¨‹ä»»åŠ¡è¡¨ï¼šæµç¨‹åœ¨è¿è¡Œè¿‡ç¨‹ä¸­æ‰€äº§ç”Ÿçš„ä»»åŠ¡æ•°æ®ä¿å­˜åœ¨ACT_RU_TASKè¡¨ä¸­</li>
<li>æµç¨‹å‚æ•°è¡¨ï¼šACT_RU_VARIABLEè¡¨æ¥å­˜æ”¾æµç¨‹ä¸­çš„å‚æ•°ï¼Œè¿™ç±»å‚æ•°åŒ…æ‹¬æµç¨‹å®ä¾‹å‚æ•°ã€æ‰§è¡Œæµå‚æ•°å’Œä»»åŠ¡å‚æ•°ï¼Œå‚æ•°æœ‰å¯èƒ½ä¼šæœ‰å¤šç§ç±»å‹</li>
<li>æµç¨‹ä¸èº«ä»½å…³ç³»è¡¨ï¼šç”¨æˆ·ç»„å’Œç”¨æˆ·ä¹‹é—´çš„å…³ç³»ï¼Œä½¿ç”¨ACT_ID_MEMBERSHIPè¡¨æ¥ä¿å­˜ï¼Œç”¨æˆ·æˆ–è€…ç”¨æˆ·ç»„ä¸æµç¨‹æ•°æ®ä¹‹é—´çš„å…³ç³»ï¼Œåˆ™ä½¿ç”¨ACT_RU_IDENTITYLINKè¡¨æ¥ä¿å­˜ï¼Œç›¸æ¯”äºACT_ID_MEMBERSHIPè¡¨ï¼ŒACT_RU_IDENTITYLINKè¡¨çš„å­—æ®µæ›´å¤šä¸€äº›ã€‚</li>
<li>å·¥ä½œæ•°æ®è¡¨ï¼šåœ¨æµç¨‹æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œä¼šæœ‰ä¸€äº›å·¥ä½œéœ€è¦å®šæ—¶æˆ–è€…é‡å¤æ‰§è¡Œï¼Œè¿™ç±»å·¥ä½œæ•°æ®è¢«ä¿å­˜åˆ°å·¥ä½œè¡¨ä¸­</li>
<li>äº‹ä»¶æè¿°è¡¨ï¼šå¦‚æœæµç¨‹åˆ°è¾¾æŸç±»äº‹ä»¶èŠ‚ç‚¹ï¼ŒActivitiä¼šå¾€ACT_RU_EVENT_SUBSCRè¡¨ä¸­åŠ å…¥äº‹ä»¶æè¿°æ•°æ®ï¼Œè¿™äº›äº‹ä»¶æè¿°æ•°æ®å°†ä¼šå†³å®šæµç¨‹äº‹ä»¶çš„è§¦å‘ã€‚</li>
</ul>
<h4 id="å†å²æ•°æ®è¡¨ï¼š"><a href="#å†å²æ•°æ®è¡¨ï¼š" class="headerlink" title="å†å²æ•°æ®è¡¨ï¼š"></a>å†å²æ•°æ®è¡¨ï¼š</h4><p>å†å²æ•°æ®è¡¨å°±å¥½åƒæµç¨‹å¼•æ“çš„æ—¥å¿—è¡¨ï¼Œæ“ä½œè¿‡çš„æµç¨‹å…ƒç´ å°†ä¼šè¢«è®°å½•åˆ°å†å²è¡¨ä¸­ã€‚å†å²æ•°æ®è¡¨åç§°ä»¥ACT_HIå¼€å¤´ï¼Œâ€œHIâ€æ˜¯å•è¯historyçš„ç¼©å†™ã€‚</p>
<ul>
<li>æµç¨‹å®ä¾‹è¡¨ï¼šæµç¨‹å®ä¾‹çš„å†å²æ•°æ®ä¼šè¢«ä¿å­˜åˆ°ACT_HI_PROCINSTè¡¨ä¸­ï¼Œåªè¦æµç¨‹è¢«å¯åŠ¨ï¼Œå°±ä¼šå°†æµç¨‹å®ä¾‹çš„æ•°æ®å†™å…¥è¡¨ä¸­ã€‚é™¤äº†åŸºæœ¬çš„æµç¨‹å­—æ®µå¤–ï¼Œä¸è¿è¡Œæ—¶æ•°æ®è¡¨ä¸åŒçš„æ˜¯ï¼Œå†å²æµç¨‹å®ä¾‹è¡¨è¿˜ä¼šè®°å½•æµç¨‹å¼€å§‹æ´»åŠ¨IDã€ç»“æŸæ´»åŠ¨IDç­‰ä¿¡æ¯ã€‚</li>
<li>æµç¨‹æ˜ç»†è¡¨ï¼šACT_HI_DETAILä¼šè®°å½•æµç¨‹æ‰§è¡Œè¿‡ç¨‹ä¸­çš„å‚æ•°æˆ–è€…è¡¨å•æ•°æ®ï¼Œç”±äºåœ¨æµç¨‹æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œä¼šäº§ç”Ÿå¤§é‡è¿™ç±»æ•°æ®ï¼Œå› æ­¤é»˜è®¤æƒ…å†µä¸‹ï¼ŒActivitiä¸ä¼šä¿å­˜æµç¨‹æ˜ç»†æ•°æ®ï¼Œé™¤éå°†æµç¨‹å¼•æ“çš„å†å²æ•°æ®ï¼ˆhistoryï¼‰é…ç½®ä¸ºnull</li>
<li>å†å²ä»»åŠ¡è¡¨å’Œå†å²è¡Œä¸ºè¡¨ï¼šå½“æµç¨‹åˆ°è¾¾æŸä¸ªä»»åŠ¡èŠ‚ç‚¹æ—¶ï¼Œå°±ä¼šå‘å†å²ä»»åŠ¡è¡¨ï¼ˆACT_HI_TASKINSTï¼‰ä¸­å†™å…¥å†å²ä»»åŠ¡æ•°æ®ï¼Œè¯¥è¡¨åœ¨è¿è¡Œæ—¶çš„ä»»åŠ¡è¡¨ç±»ä¼¼ã€‚å†å²è¡Œä¸ºè¡¨ï¼ˆACT_HI_ACTINSTï¼‰ä¼šè®°å½•æ¯ä¸€ä¸ªæµç¨‹æ´»åŠ¨çš„å®ä¾‹ï¼Œä¸€ä¸ªæµç¨‹æ´»åŠ¨å°†ä¼šè¢«è®°å½•ä¸ºä¸€æ¡æ•°æ®ï¼Œæ ¹æ®è¯¥è¡¨å¯ä»¥è¿½è¸ªæœ€å®Œæ•´çš„æµç¨‹ä¿¡æ¯ã€‚</li>
<li>é™„ä»¶è¡¨å’Œè¯„è®ºè¡¨ï¼šä½¿ç”¨ä»»åŠ¡æœåŠ¡ï¼ˆTasjServiceï¼‰çš„APIï¼Œå¯ä»¥æ·»åŠ é™„ä»¶å’Œè¯„è®ºï¼Œè¿™äº›é™„ä»¶å’Œè¯„è®ºçš„æ•°æ®å°†ä¼šè¢«ä¿å­˜åˆ°ACT_HI_ATTACHMENTå’ŒACT_HI_COMMENTè¡¨ä¸­ã€‚ACT_HI_COMMENTè¡¨å®é™…ä¸åªä¿å­˜è¯„è®ºæ•°æ®ï¼Œå®ƒè¿˜ä¼šä¿å­˜æŸäº›äº‹ä»¶æ•°æ®ï¼Œä½†å®ƒçš„è¡¨åä¸ºCOMMENTï¼Œå› æ­¤æ›´å€¾å‘æŠŠå®ƒå«åšè¯„è®ºè¡¨ã€‚è™½ç„¶é™„ä»¶è¡¨å’Œè¯„è®ºè¡¨çš„å‘½åéµå®ˆå†å²æ•°æ®è¡¨çš„å‘½åè§„èŒƒï¼ˆä»¥ACT_HIå¼€å¤´ï¼‰ï¼Œä½†æ˜¯å¯ä»¥è°ƒç”¨å…¶ä»–æœåŠ¡ç»„ä»¶çš„APIæ¥å¾€è¿™ä¸¤å¼ è¡¨ä¸­å†™å…¥æ•°æ®ã€‚å†å²æ•°æ®è¡¨å®é™…ä¸Šä¿å­˜çš„æ˜¯é‚£ç§ä¸€ç»å†™å…¥ï¼Œå°±å¾ˆå°‘ä¼šå‘ç”Ÿå˜åŒ–ï¼ˆç»“æ„æ€§å˜åŒ–ï¼‰çš„æ•°æ®ã€‚</li>
</ul>
<h4 id="DMNè§„èŒƒå¼•æ“è¡¨ï¼š"><a href="#DMNè§„èŒƒå¼•æ“è¡¨ï¼š" class="headerlink" title="DMNè§„èŒƒå¼•æ“è¡¨ï¼š"></a>DMNè§„èŒƒå¼•æ“è¡¨ï¼š</h4><p>Activiti 6.0ä¸­åŠ å…¥äº†åŸºäºDMNè§„èŒƒçš„è§„åˆ™å¼•æ“æ¨¡å—ï¼Œå½“å‰ç‰ˆæœ¬ä¸»è¦æœ‰ä¸‰ä¸ªæ•°æ®è¡¨ï¼Œä¿å­˜è§„åˆ™å¼•æ“ç›¸å…³çš„æ•°æ®ã€‚</p>
<ul>
<li>å†³ç­–éƒ¨ç½²è¡¨ï¼šä¿å­˜å†³ç­–æ•°æ®ï¼Œç±»ä¼¼äºæµç¨‹å®šä¹‰éƒ¨ç½²ï¼Œæ¯ä¸€æ¬¡éƒ¨ç½²ï¼Œå¯ä»¥æ·»åŠ å¤šä»½å†³ç­–æ–‡ä»¶ï¼Œå‘éƒ¨ç½²è¡¨ä¸­å†™å…¥ä¸€æ¡éƒ¨ç½²æ•°æ®ï¼Œå¯¹åº”æ•°æ®è¡¨ä¸ºACT_DMN_DEPLOYMENTã€‚</li>
<li>å†³ç­–è¡¨ï¼šå¯ä»¥å…ˆå°†å†³ç­–çœ‹ä½œæµç¨‹å®šä¹‰ï¼Œå†³ç­–æ–‡ä»¶ä¸­ä¿å­˜ç€å†³ç­–è¡¨ï¼Œéƒ¨ç½²æ—¶ä¼šè§£æå†³ç­–æ–‡ä»¶ä¸­çš„å†³ç­–æ¨¡å‹å¹¶å°†å…¶ä¿å­˜åˆ°ACT_DMN_DECISION_TABLEè¡¨ä¸­ã€‚</li>
<li>éƒ¨ç½²èµ„æºè¡¨ï¼šè§„åˆ™å¼•æ“ç›¸å…³çš„èµ„æºï¼Œä¾‹å¦‚å†³ç­–æ–‡ä»¶ã€å›¾ç‰‡ç­‰ï¼Œè¢«ä¿å­˜åœ¨ACT_DMN_DEPLOYMENT_RESOURCEè¡¨ä¸­ï¼Œè¯¥è¡¨ç±»ä¼¼æµç¨‹å¼•æ“çš„èµ„æºè¡¨ã€‚</li>
</ul>
<h3 id="Activitiæµç¨‹å¼•æ“"><a href="#Activitiæµç¨‹å¼•æ“" class="headerlink" title="Activitiæµç¨‹å¼•æ“"></a>Activitiæµç¨‹å¼•æ“</h3><p><strong>ProcessEngineConfigurationå¯¹è±¡</strong>ä»£è¡¨ä¸€ä¸ªActivitiæµç¨‹å¼•æ“çš„å…¨éƒ¨é…ç½®ï¼Œè¯¥ç±»æä¾›ä¸€ç³»åˆ—åˆ›å»º ProcessEngineConfiguration å®ä¾‹çš„é™æ€æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•ç”¨äºè¯»å–å’Œè§£æç›¸åº”çš„é…ç½®æ–‡ä»¶ï¼Œå¹¶è¿”å› ProcessEngineConfiguration çš„å®ä¾‹ã€‚</p>
<p>ä½¿ç”¨é™æ€æ–¹æ³•åˆ›å»º ProcessEngineConfiguration å®ä¾‹ï¼š</p>
<ol>
<li><p>è¯»å–é»˜è®¤çš„é…ç½®æ–‡ä»¶<br>ProcessEngineConfiguration å¯¹è±¡çš„ createProcessEngineConfigurationFromResourceDefault æ–¹æ³•ï¼Œ ä½¿ç”¨Activitié»˜è®¤çš„æ–¹å¼åˆ›å»ºProcessEngineConfigurationçš„å®ä¾‹ã€‚è¿™é‡Œæ‰€è¯´çš„é»˜è®¤æ–¹å¼ï¼Œæ˜¯<strong>æŒ‡ç”±Activitiå†³å®šè¯»å–é…ç½®æ–‡ä»¶çš„ä½ç½®ã€æ–‡ä»¶çš„åç§°å’Œé…ç½®beançš„åç§°è¿™äº›ä¿¡æ¯</strong>ã€‚Activitié»˜è®¤åˆ°ClassPathä¸‹è¯»å–åä¸ºâ€activiti.cfg.xmlâ€çš„Activitié…ç½®æ–‡ä»¶ï¼Œå¯åŠ¨å¹¶è·å–åç§°ä¸º â€œprocessEngineConfigurationâ€çš„beançš„å®ä¾‹ã€‚è§£æXMLä¸åˆ›å»ºè¯¥beanå®ä¾‹çš„è¿‡ç¨‹ï¼Œç”±Spring ä»£ä¸ºå®Œæˆã€‚</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2021/02/06/%E5%88%9D%E8%AF%86Activiti%E5%B7%A5%E4%BD%9C%E6%B5%81/content3.png" class title="content3"></li>
<li><p>è¯»å–è‡ªå®šä¹‰çš„é…ç½®æ–‡ä»¶<br>é»˜è®¤æƒ…å†µä¸‹Activitiå°†åˆ°ClassPathä¸‹è¯»å–activiti.cfg.xmlæ–‡ä»¶ï¼Œå¦‚æœå¸Œæœ› Activiti è¯»å–å¦å¤–åç§°çš„é…ç½®æ–‡ä»¶ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ createProcessEngineConfigurationFromResource æ–¹æ³•åˆ›å»ºProcessEngineConfiguration,è¯¥æ–¹æ³•å‚æ•°ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ï¼Œå½“è°ƒç”¨è¯¥æ–¹æ³•æ—¶ï¼Œéœ€è¦å‘Šè¯‰ Activiti é…ç½®æ–‡ä»¶çš„ä½ç½®ã€‚</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2021/02/06/%E5%88%9D%E8%AF%86Activiti%E5%B7%A5%E4%BD%9C%E6%B5%81/content4.png" class title="content4"></li>
<li><p>è¯»å–è¾“å…¥æµçš„é…ç½®<br>ProcessEngineConfigurationå¯¹è±¡ä¸­æä¾›äº†ä¸€ä¸ªcreateProcessEngineConfigurationFromInputStreamæ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä½¿å¾—Activitié…ç½®æ–‡ä»¶çš„åŠ è½½ä¸å†å±€é™äºé¡¹ç›®çš„ClassPathï¼Œåªè¦å¾—åˆ°é…ç½®æ–‡ä»¶çš„è¾“å…¥æµï¼Œ å³å¯åˆ›å»º ProcessEngineConfigurationã€‚createProcessEngineConfigurationFromInputStreamæ–¹æ³•ï¼Œæä¾›äº†ä¸¤ä¸ªé‡è½½çš„æ–¹æ³•ï¼Œå¯ä»¥æŒ‡å®šåœ¨è§£æXMLæ—¶beançš„åç§°ã€‚ </p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2021/02/06/%E5%88%9D%E8%AF%86Activiti%E5%B7%A5%E4%BD%9C%E6%B5%81/content5.png" class title="content5"></li>
<li><p>ä½¿ç”¨createStandaloneInMemProcessEngineConfigurationæ–¹æ³•<br>ä½¿ç”¨è¯¥æ–¹æ³•åˆ›å»ºProcessEngineConfigurationï¼Œå¹¶ä¸éœ€è¦æŒ‡å®šä»»åŠ¡å‚æ•°ï¼Œè¯¥æ–¹æ³•ç›´æ¥è¿”å›ä¸€ ä¸ª StandalonelnMemProcessEngineConfiguration å®ä¾‹ï¼Œè¯¥ç±»ä¸º ProcessEngineConfiguration çš„å­ç±»ã€‚ä½¿ç”¨è¯¥æ–¹æ³•åˆ›å»ºProcessEngineConfigurationï¼Œå¹¶ä¸ä¼šè¯»å–ä»»ä½•çš„Activitié…ç½®æ–‡ä»¶ï¼Œè¿™å°±æ„å‘³ç€æµç¨‹å¼•æ“é…ç½®çš„å…¨éƒ¨å±æ€§éƒ½ä¼šä½¿ç”¨é»˜è®¤å€¼ã€‚ä¸å…¶ä»–å­ç±»ä¸ä¸€æ ·çš„æ˜¯, åˆ›å»ºçš„ StandalonelnMemProcessEngineConfiguration å®ä¾‹ï¼Œåªç‰¹åˆ«æŒ‡å®šäº† databaseSchemaUpdate å±æ€§å’ŒjdbcUrlå±æ€§ã€‚</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2021/02/06/%E5%88%9D%E8%AF%86Activiti%E5%B7%A5%E4%BD%9C%E6%B5%81/content6.png" class title="content6"></li>
<li><p>ä½¿ç”¨createStandaloneProcessEngineConfigurationæ–¹æ³•<br>createStandaloneProcessEngineConfiguration æ–¹æ³•å®é™…è¿”å›ä¸€ä¸ª StandaloneProcessEngineConfiguration å®ä¾‹ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒStandaloneInMemProcessEngineConfigurationç±»æ˜¯ StandaloneProcessEngineConfiguration ç±»çš„å­ç±»ã€‚</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2021/02/06/%E5%88%9D%E8%AF%86Activiti%E5%B7%A5%E4%BD%9C%E6%B5%81/content7.png" class title="content7"></li>
</ol>
<h3 id="æ•°æ®æºé…ç½®"><a href="#æ•°æ®æºé…ç½®" class="headerlink" title="æ•°æ®æºé…ç½®"></a>æ•°æ®æºé…ç½®</h3><p>Activitiåœ¨å¯åŠ¨æ—¶ï¼Œä¼šè¯»å–ç›¸åº”çš„æ•°æ®æºé…ç½®ï¼Œç”¨äºå¯¹æ•°æ®åº“è¿›è¡Œç›¸åº”çš„æ“ä½œã€‚Activitiä¼šå…ˆè¯»å–é…ç½®æ–‡ä»¶ï¼Œç„¶åå–å¾—é…ç½®çš„bean,å¹¶å¯¹å…¶è¿›è¡Œåˆå§‹åŒ–ã€‚</p>
<p><strong>Activitiæ”¯æŒçš„æ•°æ®åº“</strong><br>Activitié»˜è®¤æ”¯æŒH2æ•°æ®åº“ï¼ŒH2æ˜¯ä¸€ä¸ªå¼€æºçš„åµŒå…¥å¼æ•°æ®åº“ï¼Œæ˜¯ä½¿ç”¨Javaè¯­è¨€ç¼–å†™çš„ã€‚ ä½¿ç”¨H2æ•°æ®åº“ä¸éœ€è¦å®‰è£…æœåŠ¡å™¨æˆ–è€…å®¢æˆ·ç«¯ï¼Œåªéœ€æä¾›ä¸€ä¸ªjaråŒ…å³å¯ä½¿ç”¨ã€‚åœ¨å®é™…çš„ä¼ä¸šåº”ç”¨ä¸­ï¼Œå¾ˆå°‘ä¼šä½¿ç”¨è¿™ç§è½»é‡çº§çš„åµŒå…¥å¼æ•°æ®åº“ï¼Œå› æ­¤H2æ•°æ®åº“æ›´é€‚åˆå•å…ƒæµ‹è¯•ã€‚é™¤äº† H2 æ•°æ®åº“ï¼ŒActivitiè¿˜å¯¹ä»¥ä¸‹æ•°æ®åº“æä¾›æ”¯æŒã€‚</p>
<ul>
<li>MySQLï¼šä¸»æµæ•°æ®åº“ä¹‹ä¸€ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¼€æºçš„å°å‹å…³ç³»å‹æ•°æ®åº“ï¼Œç”±äºå®ƒä½“ç§¯å°ã€é€Ÿåº¦å¿«ï¼Œå¾—åˆ°ç›¸å½“å¤šå¼€å‘è€…çš„é’çï¼Œå¹¶ä¸”æœ€é‡è¦çš„æ˜¯ï¼Œå®ƒæ˜¯å…è´¹çš„ã€‚</li>
<li>Oracleï¼šç›®å‰ä¸–ç•Œä¸Šæœ€æµè¡Œçš„å•†ä¸šæ•°æ®åº“ï¼Œä»·æ ¼æ˜‚è´µï¼Œä½†æ˜¯å®ƒé«˜æ•ˆçš„æ€§èƒ½ã€å¯é çš„æ•°æ®ç®¡ç†ï¼Œä»ä»¤ä¸å°‘ä¼ä¸šå¿ƒç”˜æƒ…æ„¿ä¸ºå…¶æé’±ã€‚</li>
<li>PostgreSQLï¼šPostgreSQLæ˜¯å¦å¤–ä¸€æ¬¾å¼€æºçš„æ•°æ®åº“ã€‚</li>
<li>DB2ï¼šç”±IBMå…¬å¸ç ”å‘çš„ä¸€æ¬¾å…³ç³»å‹æ•°æ®åº“ï¼Œå…¶è‰¯å¥½çš„ä¼¸ç¼©æ€§å’Œé«˜æ•ˆæ€§ï¼Œè®©å®ƒæˆä¸ºç»§ Oracleä¹‹ååˆä¸€å¼ºå¤§çš„å•†ä¸šæ•°æ®åº“ã€‚</li>
<li>MSSQLï¼šå¾®è½¯ç ”å‘çš„ä¸€æ¬¾æ•°æ®åº“äº§å“ï¼Œç›®å‰ä¹Ÿæ”¯æŒåœ¨Linuxä¸‹ä½¿ç”¨ã€‚</li>
</ul>
<p><strong>Activiti ä¸ Spring</strong><br>Springæ˜¯ç›®å‰éå¸¸æµè¡Œçš„ä¸€ä¸ªè½»é‡çº§J2EEæ¡†æ¶ï¼Œå®ƒæä¾›äº†ä¸€å¥—è½»é‡çº§çš„ä¼ä¸šåº”ç”¨è§£å†³æ–¹æ¡ˆï¼ŒåŒ…æ‹¬IoCå®¹å™¨ã€AOPé¢å‘åˆ‡é¢æŠ€æœ¯ä»¥åŠWebMVCæ¡†æ¶ç­‰ã€‚<br>ä½¿ç”¨Activitiçš„é¡¹ç›®ï¼Œå¹¶ä¸æ„å‘³ç€ä¸€å®šè¦ä½¿ç”¨Springï¼ŒActivitiå¯ä»¥åœ¨ä»»ä½•æœ‰æˆ–è€…æ²¡æœ‰Spring çš„ç¯å¢ƒä¸­ä½¿ç”¨ã€‚è™½ç„¶Activitiå¹¶ä¸éœ€è¦ä½¿ç”¨Springç¯å¢ƒï¼Œä½†æ˜¯Activitiåœ¨åˆ›å»ºæµç¨‹å¼•æ“æ—¶ï¼Œä½¿ç”¨äº† Springçš„XMLè§£æä¸ä¾èµ–æ³¨å…¥åŠŸèƒ½ProcessEngineConfigurationå¯¹åº”çš„é…ç½®ï¼Œå³ä¸ºSpring ä¸­çš„ä¸€ä¸ªbeanã€‚</p>
<p><strong>JDBC é…ç½®</strong><br>ä½¿ç”¨JDBCè¿æ¥æ•°æ®åº“ï¼Œéœ€è¦ä½¿ç”¨jdbc urlã€ jdbcé©±åŠ¨ã€æ•°æ®åº“ç”¨æˆ·åå’Œå¯†ç ã€‚</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2021/02/06/%E5%88%9D%E8%AF%86Activiti%E5%B7%A5%E4%BD%9C%E6%B5%81/content8.png" class title="content8">

<p><strong>DBCPæ•°æ®æºé…ç½®</strong><br>DBCPæ˜¯Apacheæä¾›çš„ä¸€-ä¸ªæ•°æ®åº“è¿æ¥æ± ã€‚ProcessEngineConfigurationä¸­æä¾›äº†ä¸€ä¸ª dataSourceå±æ€§ï¼Œå¦‚æœç”¨æˆ·ä¸å¸Œæœ›ç›´æ¥å°†JDBCçš„ç›¸å…³è¿æ¥å±æ€§äº¤ç»™Activitiï¼Œå¯ä»¥è‡ªå·±åˆ›å»ºæ•°æ®åº“è¿æ¥ï¼Œç„¶åé€šè¿‡è¿™ä¸ªdataSourceå±æ€§è®¾ç½®åˆ°ProcessEngineConfigurationä¸­ã€‚ä¸ºActivitiçš„ ProcessEngineConfigurationè®¾ç½®dataSourceï¼Œå¯ä»¥é‡‡ç”¨é…ç½®æˆ–è€…ç¼–ç çš„æ–¹å¼ã€‚</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2021/02/06/%E5%88%9D%E8%AF%86Activiti%E5%B7%A5%E4%BD%9C%E6%B5%81/content9.png" class title="content9">

<p><strong>C3P0æ•°æ®æºé…ç½®</strong><br>ä¸DBCPç±»ä¼¼ï¼ŒC3P0ä¹Ÿæ˜¯ä¸€ä¸ªå¼€æºçš„æ•°æ®åº“è¿æ¥æ± ï¼Œå®ƒä»¬éƒ½è¢«å¹¿æ³›åœ°åº”ç”¨åˆ°å¼€æºé¡¹ç›®ä»¥ åŠä¼ä¸šåº”ç”¨ä¸­ã€‚</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2021/02/06/%E5%88%9D%E8%AF%86Activiti%E5%B7%A5%E4%BD%9C%E6%B5%81/content10.png" class title="content10">

<p><strong>Activitiå…¶ä»–æ•°æ®æºé…ç½®</strong><br>å¦‚æœä¸ä½¿ç”¨ç¬¬ä¸‰æ–¹æ•°æ®æºï¼Œç›´æ¥ä½¿ç”¨Activitiæä¾›çš„æ•°æ®æºï¼Œé‚£ä¹ˆè¿˜å¯ä»¥æŒ‡å®šå…¶ä»–ä¸€äº›æ•°æ®åº“å±æ€§ã€‚Activitié»˜è®¤ä½¿ç”¨çš„æ˜¯myBatisçš„æ•°æ®è¿æ¥æ± ï¼Œå› æ­¤ProcessEngineConfigurationä¸­ä¹Ÿæä¾›äº†ä¸€äº›MyBatisçš„é…ç½®ã€‚<br>jdbcMaxActiveConnections: åœ¨æ•°æ®åº“è¿æ¥æ± å†…æœ€å¤§çš„æ´»è·ƒè¿æ¥æ•°ï¼Œé»˜è®¤å€¼ä¸º10ã€‚<br>jdbcMaxIdleConnections: è¿æ¥æ± æœ€å¤§çš„ç©ºé—²è¿æ¥æ•°ã€‚<br>jdbcMaxCheckoutTimeï¼šå½“è¿æ¥æ± å†…çš„è¿æ¥è€—å°½ï¼Œå¤–ç•Œå‘è¿æ¥æ± è¯·æ±‚è¿æ¥æ—¶ï¼Œåˆ›å»ºè¿æ¥çš„ç­‰å¾…æ—¶é—´ï¼Œå•ä½ä¸ºæ¯«ç§’ï¼Œé»˜è®¤å€¼ä¸º20000,å³20ç§’ã€‚<br>jdbcMaxWaitTimeï¼šå½“æ•´ä¸ªè¿æ¥æ± éœ€è¦é‡æ–°è·å–è¿æ¥çš„æ—¶å€™ï¼Œè®¾ç½®ç­‰å¾…çš„æ—¶é—´ï¼Œå•ä½ä¸ºæ¯«ç§’ï¼Œé»˜è®¤å€¼ä¸º20000,å³20ç§’ã€‚</p>
<p><strong>æ•°æ®åº“ç­–ç•¥é…ç½®</strong><br>ProcessEngineConfigurationæä¾›äº† databaseSchemaUpdateå±æ€§ï¼Œè¯¥é¡¹å¯ä»¥è®¾ç½®æµç¨‹å¼•æ“å¯åŠ¨ å’Œå…³é—­æ—¶æ•°æ®åº“æ‰§è¡Œçš„ç­–ç•¥ã€‚åœ¨Activitiçš„å®˜æ–¹æ–‡æ¡£ä¸­ï¼ŒdatabaseSchemaUpdateæœ‰ä»¥ä¸‹ä¸‰ä¸ªå€¼ã€‚<br>falseï¼š falseä¸ºé»˜è®¤å€¼ï¼Œè‹¥è®¾ç½®ä¸ºè¯¥å€¼ï¼ŒActivitiåœ¨å¯åŠ¨æ—¶ï¼Œä¼šå¯¹æ¯”æ•°æ®åº“è¡¨ä¸­ä¿å­˜çš„ç‰ˆæœ¬ï¼Œå¦‚æœæ²¡æœ‰è¡¨æˆ–è€…ç‰ˆæœ¬ä¸åŒ¹é…ï¼Œå°†åœ¨å¯åŠ¨æ—¶æŠ›å‡ºå¼‚å¸¸ã€‚<br>trueï¼š è‹¥è®¾ç½®ä¸ºè¯¥å€¼ï¼ŒActivitiä¼šå¯¹æ•°æ®åº“ä¸­æ‰€æœ‰çš„è¡¨è¿›è¡Œæ›´æ–°,å¦‚æœè¡¨ä¸å­˜åœ¨ï¼Œåˆ™Activitiä¼šè‡ªåŠ¨åˆ›å»ºã€‚<br>create-dropï¼š Activitiå¯åŠ¨æ—¶ï¼Œä¼šæ‰§è¡Œæ•°æ®åº“è¡¨çš„åˆ›å»ºæ“ä½œã€‚è€ŒActivitiå…³é—­å‹ï¼Œæ‰§è¡Œæ•°æ®åº“è¡¨çš„åˆ é™¤æ“ä½œã€‚</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2021/02/06/%E5%88%9D%E8%AF%86Activiti%E5%B7%A5%E4%BD%9C%E6%B5%81/content11.png" class title="content11">

<p><strong>databaseType é…ç½®</strong><br>å°†databaseSchemaUpdateè®¾ç½®ä¸ºcreate-dropæˆ–è€…drop-create æ—¶ï¼ŒActivitiåœ¨å¯åŠ¨å’Œåˆå§‹åŒ–æ—¶ï¼Œä¼šæ‰§è¡Œç›¸åº”çš„åˆ›å»ºè¡¨å’Œåˆ é™¤è¡¨æ“ä½œã€‚Activitiæ”¯æŒå¤šç§æ•°æ®åº“ï¼Œ æ¯ç§æ•°æ®åº“çš„åˆ›å»ºè¡¨ä¸åˆ é™¤è¡¨çš„è¯­æ³•æœ‰å¯èƒ½ä¸ä¸€æ ·ï¼Œå› æ­¤ï¼Œéœ€è¦æŒ‡å®šdatabaseTypeå±æ€§ï¼Œæ¥å‘Šè¯‰Activitiï¼Œç›®å‰ä½¿ç”¨äº†ä½•ç§æ•°æ®åº“(å½“ç„¶ï¼Œå¦‚æœè®¾ç½®ä¸ºtrueè€Œæ•°æ®åº“ä¸­æ²¡æœ‰è¡¨çš„è¯ï¼Œä¹Ÿéœ€è¦çŸ¥é“ä½¿ç”¨å“ªç§æ•°æ®åº“)ã€‚databaseTypeå±æ€§æ”¯æŒè¿™äº›å€¼ï¼šh2ã€mysqlã€oracleã€postgresã€mssql å’Œdb2ã€‚æ²¡æœ‰æŒ‡å®šå€¼æ—¶ï¼ŒdatabaseTypeä¸ºnullã€‚æŒ‡å®šdatabaseTypeå±æ€§ï¼Œç›®çš„æ˜¯ä¸ºäº†ç¡®å®šæ‰§è¡Œåˆ›å»ºï¼ˆæˆ–åˆ é™¤ï¼‰<br>è¡¨çš„SQLè„šæœ¬ã€‚</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2021/02/06/%E5%88%9D%E8%AF%86Activiti%E5%B7%A5%E4%BD%9C%E6%B5%81/content12.png" class title="content12">

<h3 id="æµç¨‹å¼•æ“çš„åˆ›å»º"><a href="#æµç¨‹å¼•æ“çš„åˆ›å»º" class="headerlink" title="æµç¨‹å¼•æ“çš„åˆ›å»º"></a>æµç¨‹å¼•æ“çš„åˆ›å»º</h3><h4 id="ProcessEngineConfiguration-çš„-buildProcessEngine-æ–¹æ³•"><a href="#ProcessEngineConfiguration-çš„-buildProcessEngine-æ–¹æ³•" class="headerlink" title="ProcessEngineConfiguration çš„ buildProcessEngine æ–¹æ³•"></a>ProcessEngineConfiguration çš„ buildProcessEngine æ–¹æ³•</h4><p>ä½¿ç”¨ProcessEngineConfigurationçš„createæ–¹æ³•å¯ä»¥åˆ›å»ºProcessEngineConfiguration çš„å®ä¾‹ã€‚ProcessEngineConfiguration ä¸­æä¾›äº†ä¸€ä¸ª buildProcessEngineæ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªProcessEngineå®ä¾‹ã€‚</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2021/02/06/%E5%88%9D%E8%AF%86Activiti%E5%B7%A5%E4%BD%9C%E6%B5%81/content13.png" class title="content13">
<p>å¾—åˆ°æµç¨‹å¼•æ“çš„ç›¸å…³é…ç½®åï¼ŒbuildProcessEngineæ–¹æ³•ä¼šæ ¹æ®è¿™äº›é…ç½®ï¼Œåˆå§‹åŒ–æµç¨‹å¼•æ“ çš„ç›¸å…³æœåŠ¡å’Œå¯¹è±¡ï¼ŒåŒ…æ‹¬æ•°æ®æºã€äº‹åŠ¡ã€æ‹¦æˆªå™¨å’ŒæœåŠ¡ç»„ä»¶ç­‰ã€‚è¿™ä¸ªæµç¨‹å¼•æ“çš„åˆå§‹åŒ–è¿‡ç¨‹, å®é™…ä¸Šä¹Ÿå¯ä»¥è¢«çœ‹ä½œæ˜¯ä¸€ä¸ªé…ç½®æ£€æŸ¥çš„è¿‡ç¨‹ã€‚</p>
<h4 id="ProcessEngines"><a href="#ProcessEngines" class="headerlink" title="ProcessEngines"></a>ProcessEngines</h4><p>é™¤äº† ProcessEngineConfiguration çš„ buildProcessEngine æ–¹æ³•å¤–ï¼ŒProcessEngines ç±»æä¾›äº†åˆ›å»ºProcessEngineConfigurationå®ä¾‹çš„æ–¹æ³•ã€‚ProcessEnginesæ˜¯ä¸€ä¸ªåˆ›å»ºæµç¨‹å¼•æ“ä¸å…³é—­æµç¨‹å¼•æ“çš„å·¥å…·ç±»ï¼Œæ‰€æœ‰åˆ›å»º(åŒ…æ‹¬å…¶ä»–æ–¹å¼åˆ›å»º)çš„ProcessEngineå®ä¾‹å‡è¢«æ³¨å†Œåˆ°ProcessEngines ä¸­ã€‚è¿™é‡Œæ‰€è¯´çš„æ³¨å†Œï¼Œå®é™…ä¸Šæ˜¯ProcessEnginesç±»ä¸­ç»´æŠ¤ä¸€ä¸ªMapå¯¹è±¡ï¼Œè¯¥å¯¹è±¡çš„keyä¸º ProcessEngine å®ä¾‹çš„åç§°ï¼Œvalue ä¸º ProcessEngine çš„å®ä¾‹ï¼Œå½“å‘ ProcessEngines æ³¨å†Œ ProcessEngineå®ä¾‹æ—¶ï¼Œå®é™…ä¸Šæ˜¯è°ƒç”¨Mapçš„putæ–¹æ³•ï¼Œå°†è¯¥å®ä¾‹ç¼“å­˜åˆ°Mapä¸­ã€‚<br><strong>init ä¸ getDefaultProcessEngine æ–¹æ³•</strong><br>ProcessEnginesçš„initæ–¹æ³•ï¼Œä¼šè¯»å–Activitiçš„é»˜è®¤é…ç½®æ–‡ä»¶ï¼Œç„¶åå°†åˆ›å»ºçš„ProcessEngine å®ä¾‹ç¼“å­˜åˆ°Mapä¸­ã€‚è¿™é‡Œæ‰€è¯´çš„é»˜è®¤é…ç½®æ–‡ä»¶ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æ˜¯æŒ‡ClassPath ä¸‹çš„activiti.cfg.xml, å¦‚æœä¸Springè¿›è¡Œäº†æ•´åˆï¼Œåˆ™è¯»å–ClassPathä¸‹çš„activiti-context.xmlæ–‡ä»¶ã€‚</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2021/02/06/%E5%88%9D%E8%AF%86Activiti%E5%B7%A5%E4%BD%9C%E6%B5%81/content14.png" class title="content14">
<p>æ­¤å¤„çš„initæ–¹æ³•å¹¶ä¸ä¼šè¿”å›ä»»ä½•ProcessEngineå®ä¾‹ï¼Œè¯¥æ–¹æ³•åªä¼šåŠ è½½classpathä¸‹å…¨éƒ¨çš„ Activitié…ç½®æ–‡ä»¶å¹¶ä¸”å°†åˆ›å»ºçš„ProcessEngineå®ä¾‹ä¿å­˜åˆ°ProcessEnginesä¸­ã€‚å¦‚æœéœ€è¦å¾—åˆ°ç›¸ åº”çš„ProcessEngineå®ä¾‹ï¼Œå¯ä»¥ä½¿ç”¨getProcessEnginesæ–¹æ³•è·å–ProcessEnginesä¸­å…¨éƒ¨çš„ ProcessEngine å®ä¾‹ ï¼ŒgetProcessEngines è¿”å›çš„æ˜¯ä¸€ä¸ª Mapï¼Œåªéœ€è¦æ ¹æ® ProcessEngine çš„åç§°ï¼Œ å³å¯å¾—åˆ°ç›¸åº”çš„ProcessEngineå®ä¾‹ã€‚<br>å¦å¤–ï¼ŒProcessEngines æä¾›äº†ä¸€ä¸ª getDefaultProcessEngine æ–¹æ³•ï¼Œç”¨äºè¿”å› key ä¸º â€œdefaultâ€ çš„ProcessEngineå®ä¾‹ï¼Œè¯¥æ–¹æ³•ä¼šåˆ¤æ–­ProcessEnginesæ˜¯å¦è¿›è¡Œåˆå§‹åŒ–ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™ä¼šè°ƒç”¨ initæ–¹æ³•è¿›è¡Œåˆå§‹åŒ–ã€‚</p>
<p><strong>registerProcessEngine å’Œ unregister æ–¹æ³•</strong><br>æ³¨å†Œå’Œæ³¨é”€æ–¹æ³•ï¼ŒregisterProcessEngine æ–¹æ³•å‘ ProcessEngines ä¸­æ³¨å†Œä¸€ä¸ª ProcessEngine å®ä¾‹ï¼Œunregisteræ–¹æ³•åˆ™ä»ProcessEnginesä¸­æ³¨é”€ä¸€ä¸ªProcessEngineå®ä¾‹ã€‚æ³¨å†Œä¸æ³¨é”€ ProcessEngineå®ä¾‹ï¼Œå‡ä¼šæ ¹æ®è¯¥ProcessEngineå®ä¾‹çš„åç§°è¿›è¡Œæ“ä½œï¼Œå› ä¸ºMapçš„keyä½¿ç”¨çš„ æ˜¯ProcessEngineçš„åç§°ã€‚</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2021/02/06/%E5%88%9D%E8%AF%86Activiti%E5%B7%A5%E4%BD%9C%E6%B5%81/content15.png" class title="content15">
<p>æ³¨æ„ï¼šunregisteræ–¹æ³•åªæ˜¯å•çº¯åœ°å°†ProcessEngineå®ä¾‹ä»Mapç§»é™¤ï¼Œå¹¶ä¸ä¼šè°ƒç”¨ ProcessEngine çš„ close æ–¹æ³•ã€‚</p>
<p><strong>retry æ–¹æ³•</strong><br>å¦‚æœActivitiåœ¨åŠ è½½é…ç½®æ–‡ä»¶æ—¶å‡ºç°å¼‚å¸¸ï¼Œåˆ™å¯ä»¥è°ƒç”¨ProcessEnginesçš„retryæ–¹æ³•é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶ï¼Œé‡æ–°åˆ›å»ºProcessEngineå®ä¾‹å¹¶åŠ å…¥åˆ°Mapä¸­ã€‚</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2021/02/06/%E5%88%9D%E8%AF%86Activiti%E5%B7%A5%E4%BD%9C%E6%B5%81/content16.png" class title="content16">

<p><strong>destroy æ–¹æ³•</strong><br>ProcessEnginesçš„destroyæ–¹æ³•ï¼Œé¡¾åæ€ä¹‰ï¼Œæ˜¯å¯¹å…¶æ‰€æœ‰ç»´æŠ¤çš„ProcessEngineå®ä¾‹è¿›è¡Œé”€ æ¯ï¼Œå¹¶ä¸”åœ¨é”€æ¯æ—¶è°ƒç”¨ProcessEngineçš„closeæ–¹æ³•ã€‚<br>Destoryæ–¹æ³•åœ¨æ‰§è¡Œæ—¶ï¼Œä¼šè°ƒç”¨æ‰€æœ‰ProcessEngineå®ä¾‹çš„closeæ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šå°†å¼‚æ­¥å·¥ä½œæ‰§è¡Œå™¨ï¼ˆAsyncExecutorï¼‰å…³é—­ï¼Œå¦‚æœä¸ºæµç¨‹å¼•æ“é…ç½®çš„æ•°æ®åº“ç­–ç•¥ä¸º create-dropï¼Œåˆ™ä¼šæ‰§è¡Œæ•°æ®åº“è¡¨çš„ drop æ“ä½œã€‚</p>
<h4 id="ProcessEngine-å¯¹è±¡"><a href="#ProcessEngine-å¯¹è±¡" class="headerlink" title="ProcessEngine å¯¹è±¡"></a>ProcessEngine å¯¹è±¡</h4><p>åœ¨Activitiä¸­ï¼Œä¸€ä¸ªProcessEngineå®ä¾‹ä»£è¡¨ä¸€ä¸ªæµç¨‹å¼•æ“ï¼ŒProcessEngineä¿å­˜ç€å„ä¸ªæœåŠ¡ç»„ä»¶çš„å®ä¾‹ï¼Œæ ¹æ®è¿™äº›æœåŠ¡ç»„ä»¶ï¼Œå¯ä»¥æ“ä½œæµç¨‹å®ä¾‹ã€ä»»åŠ¡ã€ç³»ç»Ÿè§’è‰²ç­‰æ•°æ®ã€‚<br><strong>æœåŠ¡ç»„ä»¶</strong><br>å½“åˆ›å»ºæµç¨‹å¼•æ“å®ä¾‹åï¼ŒProcessEngineä¸­ä¼šåˆå§‹åŒ–ä¸€ç³»åˆ—æœåŠ¡ç»„ä»¶ï¼Œè¿™äº›ç»„ä»¶æä¾›äº†å¤§éƒ¨åˆ†æ§åˆ¶æµç¨‹å¼•æ“æ•°æ®çš„ä¸šåŠ¡æ–¹æ³•ï¼Œè¿™äº›ç»„ä»¶å°±å¥½åƒJ2EEä¸­çš„Serviceå±‚ã€‚å¯ä»¥ä½¿ç”¨ ProcessEngineä¸­çš„getAXYServiceæ–¹æ³•å¾—åˆ°è¿™äº›ç»„ä»¶çš„å®ä¾‹ã€‚ä¸€ä¸ªProcessEngineç»´æŠ¤ä»¥ä¸‹ä¸šåŠ¡ç»„ä»¶å®ä¾‹ã€‚</p>
<ul>
<li>Repositoryserviceï¼šæä¾›ä¸€ç³»åˆ—ç®¡ç†æµç¨‹å®šä¹‰å’Œæµç¨‹éƒ¨ç½²çš„APIã€‚</li>
<li>Runtimeserviceï¼šåœ¨æµç¨‹è¿è¡Œæ—¶å¯¹æµç¨‹å®ä¾‹è¿›è¡Œç®¡ç†ä¸æ§åˆ¶ã€‚</li>
<li>TaskServiceï¼šå¯¹æµç¨‹ä»»åŠ¡è¿›è¡Œç®¡ç†ï¼Œä¾‹å¦‚ä»»åŠ¡æé†’ã€ä»»åŠ¡å®Œæˆå’Œåˆ†é…ä»»åŠ¡ç­‰ã€‚</li>
<li>Identityserviceï¼šæä¾›å¯¹æµç¨‹è§’è‰²æ•°æ®è¿›è¡Œç®¡ç†çš„API,è¿™äº›è§’è‰²æ•°æ®åŒ…æ‹¬ç”¨æˆ·ç»„ã€ç”¨ æˆ·ä»¥åŠå®ƒä»¬ä¹‹é—´çš„å…³ç³»ã€‚</li>
<li>Managementserviceï¼šæä¾›å¯¹æµç¨‹å¼•æ“è¿›è¡Œç®¡ç†å’Œç»´æŠ¤çš„æœåŠ¡ã€‚</li>
<li>HistoryServiceï¼šå¯¹æµç¨‹çš„å†å²æ•°æ®è¿›è¡Œæ“ä½œï¼ŒåŒ…æ‹¬æŸ¥è¯¢ã€åˆ é™¤è¿™äº›å†å²æ•°æ®ã€‚<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2021/02/06/%E5%88%9D%E8%AF%86Activiti%E5%B7%A5%E4%BD%9C%E6%B5%81/content17.png" class title="content17"></li>
</ul>
<p>å…³é—­æµç¨‹å¼•æ“<br>ProcessEngineså®ä¾‹åœ¨è¿›è¡Œé”€æ¯æ“ä½œæ—¶ï¼Œä¼šè°ƒç”¨æ‰€æœ‰ProcessEngineçš„closeæ–¹æ³•ï¼Œè¿˜ä¼šå¯¹æµç¨‹å¼•æ“è¿›è¡Œå…³é—­æ“ä½œï¼Œè¿™äº›æ“ä½œåŒ…æ‹¬å…³é—­å¼‚æ­¥æ‰§è¡Œå™¨ (AsyncExecutor)å’Œæ‰§è¡Œæ•°æ®åº“è¡¨åˆ é™¤(drop)ã€‚éœ€è¦è®©å…¶åˆ é™¤æ•°æ®è¡¨ï¼Œå‰ææ˜¯è¦å°†æµç¨‹å¼•æ“é…ç½®çš„databaseSchemaUpdateå±æ€§è®¾ç½®ä¸ºcreate-dropã€‚</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2021/02/06/%E5%88%9D%E8%AF%86Activiti%E5%B7%A5%E4%BD%9C%E6%B5%81/content18.png" class title="content18">

<p>æµç¨‹å¼•æ“åç§°<br>æ¯ä¸ªProcessEngineå®ä¾‹å‡æœ‰è‡ªå·±çš„åç§°ï¼Œåœ¨ProcessEnginesçš„ Mapä¸­ï¼Œä¼šä½¿ç”¨è¯¥åç§°ä½œä¸ºMapçš„keyå€¼ã€‚å¦‚æœä¸ä¸ºProcessEngineè®¾ç½®åç§°ï¼ŒActivitiä¼šé»˜è®¤å°†å…¶è®¾ç½®ä¸ºâ€defaultâ€ã€‚ProcessEngineæœ¬èº«æ²¡æœ‰æä¾›è®¾ç½®åç§°çš„æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ç”± ProcessEngineConfigurationæä¾›ã€‚</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2021/02/06/%E5%88%9D%E8%AF%86Activiti%E5%B7%A5%E4%BD%9C%E6%B5%81/content19.png" class title="content19">

]]></content>
      <categories>
        <category>å·¥ä½œæµ</category>
      </categories>
      <tags>
        <tag>Activiti</tag>
      </tags>
  </entry>
</search>
